window.ScriptAPI = {
    _0x238994: {
    /*-----------------------------------
    * SCRIPT AUTOCOMMANDS VERSION 1.0.0 *
    ------------------------------------*/
        _0x238939: function (event) {
            /* ADD COMMANDS */
            let train_ui = $('.train-ui td'), length = $('.train-container .units-row').length, content = `<tr class="units-row"><th class="train-name" style="text-align: center;"><span>COMANDO #${length+1}</span><img src="/graphic/delete_14.png" class="float_right" style="cursor: pointer" onclick="ScriptAPI._0x238994._0x238943(this)"></th>`;
            game_data.units.slice(0, -1).forEach((unit, i) => content += `<td><input type="number" data-unit="${unit}" name="train[${length+1}][${unit}]" style="width: 40px;${train_ui[i].style.opacity && ' opacity: 0.3;'}"${train_ui[i].style.opacity && ' disabled'}></td>`);
            content += '</tr>';
            return length < 5 && $('.train-container .container').append(content).find('.units-row').each((i, $pb) => $($pb.cells).slice(1 ?? !null).each((i, {firstChild: $pb}) => train_ui[i].style.color && $($pb).val(~~(train_ui[i].textContent / $('.train-container .units-row').length) || !i && 1e+0 || 0e+0)) || !void 0).length > 4 && $(event).css('cursor', 'no-drop');
        },
        _0x238940: function (landingTime, currentTime, script_fixed, script_min, script_max, village, target, unit) {
            /* CALCULATE TIMES */
            let distance = ScriptAPI._0x238979(village, target), unitTime = distance * unit * 6e+4;
            let milliSeconds = $('#ms-container option:selected')[0].textContent != 'MS RANDOM' ? script_fixed : script_min + Math.random() * (script_max - script_min);
            let $pbLaunch = new Date(Math.round((landingTime - unitTime) / 1000) * 1000 + milliSeconds);
            return distance > 0 && $pbLaunch > currentTime && $pbLaunch;
        },
        _0x238941: function(event) {
            /* COMMANDS STATUS */
            $(event).each(function(i) {
                let randomID = $(this.id && `#${this.id}` || `.${this.className}`), columns = $(this.cells), village = columns[1].textContent, $pbLaunch = columns.slice(-5)[0].textContent, timeLeft = new Date(ScriptAPI._0x238980($pbLaunch) ?? void 0) - ScriptAPI._0x238994._0x238892.timer;
                return timeLeft > 0 ? randomID.children().slice(-3)[0].firstChild.textContent = ScriptAPI._0x238993(timeLeft / 1000) : randomID.remove() && !ScriptAPI._0x238994._0x238957() && ScriptAPI._0x238994._0x238949(`AVISO: A coordenada ${village} expirou e foi deletado!`, 'alert');
            });
            return !void 0;
        },
        _0x238942: function(event) {
            /* DUPLICATE COORDINATE */                  
            let registered = [];                                                    
            return $('.registered tr').each((i, $pb) => registered.push($pb.cells[1].textContent) && !void 0) && $('.combinations-found tr').each((i, $pb) => !registered.includes($pb.cells[1].textContent) ? $pb.style.opacity = String() : $pb.style.opacity = '0.5');
        },
        _0x238931: function(event) {
            /* TRAIN COMMAND */ 
            let $pbElement = event.src.includes('plus') ? ['table-row', 'plus', 'minus'] : ['none', 'minus', 'plus'], selector = event.closest('tr');
            $(selector).nextAll(`.${selector.id}`).each((i, $pb) => $($pb).css('display', $pbElement[0])) && $(event).attr('src', (i, $pb) => event.src = $pb.replace($pbElement[1], $pbElement[2]));
            return !void 0;
        },
        _0x238943: function (event) {
            /* DELETE TRAIN */
            return !event.closest('tbody').lastChild.remove() && $('.vis-troops a').css('cursor', 'pointer');
        },
        _0x238944: function (event) {
            /* DELETE COMMAND */
            let selector = event.closest('tr');
            return this._0x238948(selector, false) && !selector.remove() && $(`.${selector.id || void 0}`).remove() && this._0x238942() && this._0x238957();
        },
        _0x238945: function (event) {
            /* FORMAT DATE TIME */
            return ('' + event.getDate()).padStart(2, '0') + '/' + ('' + (event.getMonth() + 1)).padStart(2, '0') + '/' + event.getFullYear() + ' ' + ('' + event.getHours()).padStart(2, '0') + ':' + ('' + event.getMinutes()).padStart(2, '0') + ':' + ('' + event.getSeconds()).padStart(2, '0') + ':' + ('' + event.getMilliseconds()).padStart(3, '0');
        },
        _0x238946: function(index) { 
            /* GENERATE ID */
            return 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.split(!void 0 && '').reduce((acc, $pb, i, arr) => i < index && (acc += arr[~~(Math.random() * 62)]) || acc, ``);
        },
        _0x238776: function(event) {
            /* COORDINATES COUNTER */
            let $pbElement = event.value.match(/\d{1,3}\|\d{1,3}/g);
            return $(event.className != 'coordinates' && '#targets-counter' || '#coordinates-counter').html((i, $pb) => $pb.replace(/>\d+</, `>${$pbElement?.length || '0'}<`) || !void 0);
        },
        _0x238916: function(event) {
            /* FORMAT INPUT */
            return $('#container-small-planner #arrival').val(event.value.replace(/\D/g, '').split('').reduce((acc, $pb, i) => (acc + (i == 2 || i == 4 ? '/' : i == 8 && '\x20' || (i == 10 || i == 12) && ':' || ``) + $pb).substr(0, 19), ``) ?? !void 0);
        },
        _0x238814: async function(event) {
            /* IMPORT GROUPS */
            let $pbElement = $('#container-small-planner textarea.coordinates');
            return await $.post(game_data.link_base_pure + 'groups&ajax=load_villages_from_group', {group_id: $('#options-container select')[0].value, h: game_data.csrf}).then((xhr) => $pbElement.val(xhr.html.match(/\d{1,3}\|\d{1,3}/g)?.reduce((acc, village) => acc + '\x20' + village) || ``)) && this._0x238776($pbElement[0]);
        },
        _0x238947: function(event) {
            /* INIT */
            let scriptUpdated = JSON.parse(localStorage._0x238994 || null); 
            let container = scriptUpdated && (scriptUpdated.sound && $('#sound-commands').prop('checked', true), scriptUpdated.reportInput && $('#report-commands').prop('checked', true) && $('#_0x238949').html(scriptUpdated.report) && $('#_0x238949').scrollTop(9e+6), scriptUpdated.innerHTML);
            return !this._0x238949('O histórico de todos os comandos enviados, alertas ou erros ficará nesta caixa!', 'alert') && $('#_0x238994 .registered').html(container) && this._0x238941(container) && this._0x238956(container) && this._0x238948(container, true) && Timing.tickHandlers.timers.init();
        },
        _0x238857: function(event) {
            /* EXPORT COMMANDS */
            let exportText = $('#_0x238994 .registered')[0].innerHTML.replace(/class=""/g, 'class="timer"');
            return navigator.clipboard.writeText(exportText) && UI.SuccessMessage('Os comandos foram exportados com sucesso!');
        },
        _0x238856: function(event) {
            /* IMPORT COMMANDS */
            let selector = $('#import-textarea')[0].value;
            return $('#_0x238994 .registered').html(selector) && this._0x238941(selector) && this._0x238956(selector) && this._0x238948(selector, true) && !this._0x238957(!void 0) && Timing.tickHandlers.timers.init();
        },
        _0x238948: function(string, increment) {
            /* INFO SCRIPT */
            $(string).each(function(i, $pb) {
                let columns = $($pb.cells), target = columns[2].textContent, selector = $('.info-targets tr'), targetSelector = $('.info-targets tr:contains(' + target + ')');
                let $pbElement = columns.slice(-6)[0], $pbSnob = Number($pbElement.style.opacity && '0' || $pbElement.textContent), $pbSum = columns.slice(-2)[0].textContent == 'APOIAR' ? increment ? [0, 1, $pbSnob] : [0, -1, -$pbSnob] : increment ? [$pb.id && 1 || 0, 0, $pbSnob] : [!$pb.className && -1 || 0, 0, $pb.className ? -$pbSnob : -$pbSnob + -[...$(`.${$pb.id}`)].reduce((acc, {cells: {length, [length-6]: $pb}}) => acc += Number($pb.style.opacity && '0' || $pb.textContent), 0)];
                return !$(this.id && `#${this.id}` || `.${this.className}`).length ? !void 0 : !selector.filter((i, $pb) => $pb.cells[1].textContent == target).length ? $('.info-targets').append(`<tr><td align="center">${selector.length+1}</td><td style="text-align: center; width: 70px;">${columns[2].innerHTML}</td><td class="td-targets"><span style="color: #c14848;">${$pbSum[0]}</span>&nbsp;ATAQUE(S)</td><td class="td-targets"><span style="color: #53853b;">${$pbSum[1]}</span>&nbsp;APOIO(S)</td><td class="td-targets"><span style="color: #c9c922;">${$pbSum[2]}</span>&nbsp;NOBRE(S)</td></tr>`) : targetSelector.children().slice(2).each((i, $pb) => $pb.innerHTML = $pb.innerHTML.replace(/(?<=>)\d+(?=<)/, Number($pb.textContent.match(/\d+/)[0]) + $pbSum[i])).filter((i, $pb) => $pb.textContent.charAt(0) > 0).length || targetSelector.remove() && selector.filter((i, $pb) => $pb.cells[1].textContent != target).each((i, $pb) => $pb.cells[0].textContent = i+1);
            });
            return !void 0;
        },
        _0x238949: function(message, event) {
            /* LOG SCRIPT */
            let logScript = document.querySelector('#_0x238949'), currentTime = document.querySelector('#time').textContent, spanElement = document.createElement('span'), brElement = document.createElement('br'), logEvent = event != 'error' ? event != 'alert' ? ['#53853b', '✅'] : ['#8b8b44', '⚠️'] : ['#c14848', '❌'];
            spanElement.style.color = logEvent[0]; spanElement.textContent = `${logEvent[1]} ${currentTime} - ${message}`;
            logScript.append(spanElement), logScript.append(brElement);
            return logScript.scrollTop = logScript.scrollHeight;
        },
        _0x238951: function (event) {
            /* OPACITY COLUMN */
            let target = event.target.closest('th');
            return event.target.localName == 'img' && !target.style.opacity ? $(target).css('opacity', '0.3') : $(target).css('opacity', '');
        },
        _0x238892: function(event) {
            /* TIMING SCRIPT */
            let selector = $('#welcome-obsidian #time'), timeScript = ScriptAPI._0x238980(selector[0].textContent), $pbTime = Date.now(), TribalWarsTimers = function(event) {
                let diference = Date.now() - $pbTime;
                return (ScriptAPI._0x238994._0x238892.timer = new Date(`${timeScript}:${diference <= 999 && diference || 999}`), !void 0);
            };
            return this._0x238892.intervalID = setInterval(TribalWarsTimers, 4);
        },
        _0x238952: function (event) {
            /* PICK UP UNITS */
            let columns = $(event).closest('tr').children(!0e+9), trElement = columns.end(!void 0), optionSelected = $(columns).find('option:selected')[0].textContent;
            switch(optionSelected) {
            case 'AGENDAR':
                let selector = $('select#choose option:selected')[0].textContent, all_troops = $('#all-troops option:selected')[0].textContent, registered = $('.registered tr').length, container = `<tr id="${this._0x238946(9)}"><td align="center">${registered + 1}</td><td style="text-align: center; width: 70px;">${columns[1].innerHTML}</td><td style="text-align: center; width: 70px;">${columns[2].innerHTML}</td>`, $pbLaunch = columns[columns.length - 5].textContent, timeLeft = new Date(ScriptAPI._0x238980($pbLaunch) ?? void 0) - ScriptAPI._0x238994._0x238892.timer;
                Array.from(columns).slice(3, -5).forEach((unit, i, arr) => container += `<td style="${unit.style.cssText}` + (all_troops != 'ATIVADO' ? `` : ' -webkit-text-security: disc;') + ` width: 35px;">` + unit.textContent + `</td>`);
                container += '<td style="white-space: nowrap;">' + $pbLaunch + '</td><td style="white-space: nowrap; color: #6d6db3;">' + columns[columns.length - 4].textContent + '</td><td style="color: #c14848;"><span class="timer">' + ScriptAPI._0x238993(timeLeft / 1000) + '</span></td><td class="description" style="color: ' + (selector != 'APOIAR' ? '#c9c922;' : 'seagreen;') + '">' + selector + '</td><td class="close" onclick="ScriptAPI._0x238994._0x238944(this)">X</td></tr>';
                $('.registered').append(container) && this._0x238956(container) && this._0x238948(container, true) && this._0x238942() && this._0x238957();
                break;
            case 'ALTERAR':
                Array.from(columns).slice(3, -5).forEach((unit, i) => $('#_0x238994 [class*=unit-item]').eq(i).text(unit.textContent)[0].style.cssText = unit.style.cssText);
                document.querySelectorAll('.vis-train td').forEach(($pb, i) => $pb.innerHTML = [columns[1].innerHTML, columns[2].innerHTML, columns[columns.length - 5].innerHTML, columns[columns.length - 4].innerHTML, columns[columns.length - 3].innerHTML.replace(/class=""/, 'class="timer"')][i]);
                $('.units-row').remove() && $('.vis-troops a').trigger('click');
                break;
            };
            return trElement.next().find('input').focus() && trElement.remove() && Timing.tickHandlers.timers.init();
        },
        _0x238953: function(event) {
            /* PICK UP TRAIN */
            let selector = $('select#choose option:selected')[0].textContent, train_ui = [...$('#container-small-planner .train-ui td')].reduce((acc, $pb, i) => acc.push($pb.style.opacity ? 0 : APIUpdated.units[$pb.className.match(/\w+$/)[0]]) && acc, []), units_row = [...$('#container-small-planner .units-row')], vis_train = $('.vis-train td'), registered = $('.registered tr').length;
            let $pbLaunch = vis_train[2].textContent, $pbRandomID = this._0x238946(9), timeLeft = new Date(ScriptAPI._0x238980($pbLaunch) ?? void 0) - ScriptAPI._0x238994._0x238892.timer;
            let container = units_row.reduce((acc, $pb, i) => acc += `<tr ${!i ? `id="${$pbRandomID}" ${units_row.length < 2 ? `` : 'style="display: table-row; outline: 2px solid #c9c922;"'}` : ` class="${$pbRandomID}" style="display: none;"`}><td align="center">${registered+i+1}</td><td style="text-align: center; width: 70px;">${vis_train[0].innerHTML}</td><td style="text-align: center; width: 70px;">${vis_train[1].innerHTML}</td>` + [...$pb.cells].slice(1).reduce((acc, {firstChild: {value: $pb}}, i) => acc += `<td style="${$pb != 0 ? 'color: #C3FFA5;' : 'opacity: 0.3;'} width: 35px;">${$pb != 0 ? Math.abs($pb) : $('.train-ui td')[i].textContent}</td>`, ``) + `<td style="white-space: nowrap;">${$pbLaunch}</td><td style="white-space: nowrap; color: #6d6db3;">${vis_train[3].textContent}</td><td style="color: #c14848;"><span class="timer">${ScriptAPI._0x238993(timeLeft / 1000)}</span></td><td class="description" ${i ? 'style="color: #ae441c;"' : units_row.length > 1 ? `` : 'style="color: ' + (selector != 'APOIAR' ? '#c9c922;' : 'seagreen;') + '"'}>${units_row.length < 2 ? selector : i ? 'TRAIN ' + (i + 1) : '<img src="https://twdevtools.github.io/images/obsidian-plus.png" onclick="ScriptAPI._0x238994._0x238931(this)">'}</td><td class="close" onclick="ScriptAPI._0x238994._0x238944(this)">X</td></tr>`, ``);
            return !units_row.length ? UI.ErrorMessage('Não existem entradas disponíveis!') : units_row.every(($pb) => [...$pb.cells].slice(1).some(({firstChild: input}, i) => !input.disabled && train_ui.every(($pb) => train_ui[i] >= $pb) && input.value != 0) && !void 0) && $('#_0x238994 .registered').append(container) && !Timing.tickHandlers.timers.init() && this._0x238956(container) && this._0x238948(container, true) && this._0x238942() && !this._0x238957() || UI.ErrorMessage('Existem unidades que não podem ficar vazias!');
        },  
        _0x238851: function(dataURL, villageID) {
            /* ALL TROOPS */
            return $.get(`/game.php?village=${villageID}&screen=overview`).then((xhr) => dataURL.replace(/(\w+)=([^&]*)/g, function (regex, unit, string) {
                let $pbElement = $(xhr).find(`.home_unit strong[data-count=${unit}]`).prop('textContent');
                    return !game_data.units.includes(unit) || string != 'true' ? regex : `${unit}=${$pbElement || ``}`;
                }),
            );
        },
        _0x238954: function (event) {
            /* REORDER COMMANDS */
            let container = [...$('.registered tr')].reduce((acc, el) => acc.push({html: `<tr ${!el.id ? String() : `id="${el.id}"`} ${!el.className ? String() : `class="${el.className}"`} ${el.style.outline ? `style="display: ${el.style.display}; outline: ${el.style.outline};"` : !el.style.display ? String() : `style="display: ${el.style.display};"`}>${el.innerHTML.replace(/class=""/, 'class="timer"')}</tr>`, $pbLaunch: $(el.cells).slice(-5)[0].textContent}) && acc, []).sort((a, b) => new Date(ScriptAPI._0x238980(a.$pbLaunch)) - new Date(ScriptAPI._0x238980(b.$pbLaunch))).reduce((acc, el, i) => acc += el.html.replace(/>\d+</, '>' + (i + 1) + '<'), ``);
            return $('.registered').html(container) && !Timing.tickHandlers.timers.init() && this._0x238957(!void 0);
        },
        _0x238955: function(string, event) {
            /* PROCESS PAGES */
            return $.ajax({'url': game_data.link_base_pure + 'overview_villages&mode=units&action=change_page_size&type=own_home&group=0', method: 'POST', data: `page_size=1000&h=${game_data.csrf}`}).then(async (xhr) => {
                let pagedNavItem = $(xhr).find('.paged-nav-item'), pageSize = [xhr]; for (let i=0;i<pagedNavItem.length-1;i++) {
                    let response = await $.get(game_data.link_base_pure + `overview_villages&mode=units&type=own_home&group=0&page=${i+1}`);
                    pageSize.push(response);
                };          
                return pageSize.forEach(event);
            });
        },
        _0x238956: function(event) {
            /* PROCESS XML */
            return $(event).filter((i, $pb) => $pb.id).each(function(i) {
                let columns = $(this.cells), randomID = this.id, village = columns[1].textContent, target = columns[2].textContent;
                let villageID = APIUpdated.database[village].villageID, dataURL = `${ScriptAPI._0x238994._0x238946(22)}=${ScriptAPI._0x238994._0x238946(14)}&template_id=&source_village=${villageID}`, $pbElement = columns.slice(3, -5).map(function(i) {
                    return dataURL += `&${game_data.units[i]}=${this.style.color && (!this.style.webkitTextSecurity && this.textContent || true)}`, !this.style.color ? 0 : APIUpdated.units[game_data.units[i]];
                });
                let unitTime = Math.round((ScriptAPI._0x238979(village, target) * Math.max(...$pbElement) * 6e+4) / 1000) * 1000, $pbLaunch = new Date(ScriptAPI._0x238980(columns.slice(-5)[0].textContent));
                let description = columns.slice(-2)[0].textContent != 'APOIAR' ? ['attack=Ataque', 'Enviar%20ataque'] : ['support=Apoio', 'Enviar%20apoio'], [targetX, targetY] = target.split('|');
                return dataURL += `&x=${targetX}&y=${targetY}&target_type=coord&input=${targetX}%7C${targetY}&${description[0]}`, ScriptAPI._0x238994._0x238960(dataURL, villageID, randomID, description[1], village, target, $pbLaunch, unitTime);
            });
        },
        _0x238957: function(event) {
            /* SAVE SCRIPT */
            let contentUpdated = { 
                'report': $('#_0x238949')[0].innerHTML, innerHTML: $('.registered')[0].innerHTML.replace(/class=""/g, 'class="timer"'), 'sound': $('#sound-commands').prop('checked'), 
                'reportInput': $('#report-commands').prop('checked'),
            };
            return localStorage.setItem('_0x238994', JSON.stringify(contentUpdated));
        },
        _0x238958: async function (event) {
            /* COMBINATIONS FOUND */
            $('#options-container textarea').each((i, $pb) => $($pb).val((i, $pb) => $pb.match(/\d{1,3}\|\d{1,3}/g)?.reduce((acc, village) => acc + '\x20' + village)) || !void 0), [script_time, script_arrival] = $('#welcome-obsidian #time, #container-small-planner #arrival').map((i, el) => new Date(ScriptAPI._0x238980(el.textContent || el.value) || !void 0)), [script_fixed, script_min, script_max] = $('#_0x238994').find('#fixed, #min, #max').map((i, $pb) => Number($pb.value) ?? void 0); 
            let $pbCommands = [], $pbCoordinates = $('#options-container textarea:not(#targets)').each((i, $pb) => $($pb).val((i, $pb) => $pb.split(' ').reduce((acc, village) => (acc[village] = true, acc), {}))), $pbCustom = [...$('#container-small-planner #custom-units input')].reduce((acc, el, i) => (acc[game_data.units[i]] = Number(el.value), acc), {}), $pbFilter = Object.values($pbCustom).some(($pb) => $pb > 0), $pbElement = $('#container-small-planner #instantly option:selected')[0].textContent != 'DESATIVADO', $pbSelect = [...$('#container-small-planner .units-select').children().slice(3, -4)].reduce((acc, el, i) => {
                let unit = game_data.units[i];                                                          
                !el.style.opacity && acc.push({[unit]: APIUpdated.units[unit]});
                return acc;
            }, []).sort((a, b) => Object.values(b)[0] - Object.values(a)[0]).map((unit) => Object.keys(unit)[0]);
            await this._0x238955('troops', function(xhr) { 
                $(xhr).find('.quickedit-label').each(function(i) {
                    let village = this.textContent.match(/\d{1,3}\|\d{1,3}/)[0], $pbUnits = [...$(this).closest('tr').find('.unit-item').slice(0, -1)].reduce((acc, el, i) => (acc[game_data.units[i]] = Number(el.textContent), acc), {});
                    $pbCoordinates[village] && $('#container-small-planner .targets')[0].value.match(/\d{1,3}\|\d{1,3}/g)?.forEach((target) => $($pbSelect).each(function init(i, $pb) {
                        return (init.launchTime = ScriptAPI._0x238994._0x238940(script_arrival, script_time, script_fixed, script_min, script_max, village, target, APIUpdated.units[$pb]) || $pbElement || null) && (
                            !$pbFilter ? $pbUnits[$pb] : $pbUnits[$pb] >= $pbCustom[$pb] ? $pbCustom[$pb] : null) && !$pbCommands.push({...!$pbFilter && $pbUnits || $pbCustom, $pbUnits, $pb, '$pbLaunch': init.launchTime, 'coord': village, target,
                        });
                    }),
                )},
            )});
            let $pbCommandsList = $('#container-small-planner #commands-list')[0].value, $pbtableCommands = $pbCommands.sort((a, b) => a.$pbLaunch - b.$pbLaunch).splice($pbCommandsList) && !$pbCommands.length ? !UI.ErrorMessage('Nenhuma combinação encontrada!') && NaN : $pbCommands.reduce((acc, village, index) => {
                acc += '<tr><td align="center">' + (index + 1) + '</td><td style="text-align: center; width: 50px;"><a href="/game.php?village=' + APIUpdated.database[village.coord].villageID + '&screen=overview" target="_blank" rel="noopener noreferrer">' + village.coord + '</a></td><td style="text-align: center; width: 50px;"><a href="' + game_data.link_base_pure + 'info_village&id=' + APIUpdated.database[village.target].villageID + '"target="_blank" rel="noopener noreferrer">' + village.target + '</a></td>';
                game_data.units.slice(0, -1).forEach((unit) => {
                    return acc += `<td style="${$pbSelect.includes(unit) && APIUpdated.units[unit] <= APIUpdated.units[village.$pb] && village.$pbUnits[unit] >= village[unit] && village[unit] ? 'color: #C3FFA5;' : 'opacity: 0.3;'}">${village[unit]}</td>`;
                });
                return acc += `<td>${this._0x238945(!$pbElement && village.$pbLaunch || script_time)}</td><td style="color: #6d6db3;">${!$pbElement && $('#container-small-planner #arrival')[0].value || '??/??/???? ??:??:??'}</td><td style="color: #c14848;"><span class="${!$pbElement && 'timer' || ``}">${!$pbElement && ScriptAPI._0x238993((village.$pbLaunch - script_time) / 1000) || '??:??:??'}</span</td><td><select style="width: 100%; border: none;"><option value="1">AGENDAR</option><option value="2">ALTERAR</option></td><td align="center"><input type="button" class="btn" style="font-family: monospace;" onclick="ScriptAPI._0x238994._0x238952(this)" value="ENVIAR"></td></tr>`;
            }, ``); 
            return $('#container-small-planner .combinations-found').html($pbtableCommands) && !Timing.tickHandlers.timers.init() && this._0x238942(void 0);
        },
        _0x238959: function(dataURL, villageID, randomID, village, target, timestamp) {
            /* SEND COMMAND */
            let TribalWarsRequest = function(event) {
                let selector = $('#' + randomID);
                return selector.length && $.ajax({url: `/game.php?village=${villageID}&screen=place&action=command`, method: 'POST', data: dataURL,
                    success: function(xhr) {
                        $('#sound-commands').prop('checked') && TribalWars.playSound('chat');
                        let errorBox = $(xhr).find('.error_box');
                        return errorBox.length ? ScriptAPI._0x238994._0x238949(`Houve um erro ao enviar a coordenada ${village}, erro: ${errorBox[0].textContent.trim()}`, 'error') : ScriptAPI._0x238994._0x238949(`A coordenada ${village}, alvo: ${target} foi enviada com sucesso!`, 'success');
                    },
                    error: function(error) {
                        return ScriptAPI._0x238994._0x238949(`Verifique se a coordenada ${village} foi enviada, não é possível enviar muitos comandos ao mesmo tempo!`, 'alert');
                    },
                    complete: function(event) {
                        return ScriptAPI._0x238994._0x238948(selector, false) && selector.remove() && $(`.${selector.attr('id') || void 0}`).remove() && ScriptAPI._0x238994._0x238942() && ScriptAPI._0x238994._0x238957();
                    },
                }); 
            };
            return setTimeout(TribalWarsRequest, timestamp);
        },
        _0x238960: function (dataURL, villageID, randomID, description, village, target, $pbLaunch, unitTime) {
            /* TIMER COMMAND */
            let TribalWarsRequest = async function(success) {
                let timestamp = Date.now(), selector = $('#' + randomID);
                selector.length && $.ajax({url: `/game.php?village=${villageID}&screen=place&try=confirm`, method: 'POST', data: !dataURL.includes('true') ? dataURL : await ScriptAPI._0x238994._0x238851(dataURL, villageID), 
                    success: function(xhr) {
                        let diference = Date.now() - timestamp, errorBox = $(xhr).find('.error_box'), dataForm = $(xhr).find('#command-data-form'), duration = dataForm.attr('action').includes('command') && ScriptAPI._0x238982(dataForm[0].innerHTML.match(/(?<=<td>)\d+:\d+:\d+(?=<\/td>)/)[0]) * 1000, dataURI = dataForm.serialize() + [...$(`.${randomID}`)].reduce((acc, $pb, i) => $($pb.cells).slice(3, -5).each((index, $pb) => acc += `&train[${i+2}][${game_data.units[index]}]=${$pb.style.color && $pb.textContent}`) && acc, ``) + `&submit_confirm=${description}&h=${game_data.csrf}`;
                        let $pbTimes = selector.children().slice(-5), sigilRatio = new Date($pbLaunch.getTime() + unitTime - duration), timeScript = $('#welcome-obsidian #time')[0].textContent, secondsDiference = sigilRatio - new Date(ScriptAPI._0x238980(timeScript) ?? void 0);
                        return errorBox.length ? !ScriptAPI._0x238994._0x238960.removeElements() && ScriptAPI._0x238994._0x238949('Não foi possível requisitar o comando, erro: ' + errorBox[0].textContent.trim(), 'error') : !dataURL.includes('support') || unitTime == duration ? ScriptAPI._0x238994._0x238959(dataURI, villageID, randomID, village, target, result - diference) : unitTime < duration ? !ScriptAPI._0x238994._0x238960.removeElements() && ScriptAPI._0x238994._0x238949(`AVISO: A coordenada ${village} reagendada precisou ser deletado devido a aflição do alvo ${target} ter expirado!`, 'alert') : ($pbTimes[0].textContent = ScriptAPI._0x238994._0x238945(sigilRatio), $pbTimes[2].innerHTML = $pbTimes[2].innerHTML.replace(/class=""/, 'class="timer"').replace(/\d+:\d+:\d+/, ScriptAPI._0x238993(secondsDiference / 1000)), !Timing.tickHandlers.timers.init() && ScriptAPI._0x238994._0x238960(dataURL, villageID, randomID, description, village, target, sigilRatio, duration) && ScriptAPI._0x238994._0x238949(`AVISO: A coordenada ${village} foi reagendada devido o alvo ${target} estar com aflição ativada!`, 'alert') && ScriptAPI._0x238994._0x238957(), !void 0);            
                    },
                    error: function(error) {
                        return ScriptAPI._0x238994._0x238949(`O servidor recebeu muitas requisições, a coordenada ${village} foi deletado!`, 'error') && ScriptAPI._0x238994._0x238960.removeElements();
                    },
                });
                return ScriptAPI._0x238994._0x238960.removeElements = function(event) {
                    return ScriptAPI._0x238994._0x238948(selector, false) && selector.remove() && $(`.${selector.attr('id') || void 0}`).remove() && ScriptAPI._0x238994._0x238942() && ScriptAPI._0x238994._0x238957();
                };
            };
            let $pbDiference = $pbLaunch - ScriptAPI._0x238994._0x238892.timer, result = $pbDiference < 1e+4 && $pbDiference || 1e+4;
            return setTimeout(TribalWarsRequest, $pbDiference - 1e+4);
        },
    },
    _0x238995: {
    /*-------------------------------
    * SCRIPT AUTOFARM VERSION 1.0.0 *
    --------------------------------*/
        _0x238961: async function(event) {
            /* BARBARIAN MAPPING */
            $('#loading').html('<h4 style="padding: 6px; margin: 0px;">PROCURANDO NOVAS ALDEIAS BÁRBARAS PARA MAPEAR 🔍 AGUARDE...</h4><br><img src="/graphic/throbber.gif" style="width: 40px;">');
            let selector = $('#_0x238995 #init, #_0x238995 #stop, #_0x238995 #mapping').prop('disabled', true), barbsRadius = $('#_0x238995 #radius')[0].value, template_id = $('#template_a input[type=hidden]')[0].value;
            let villages_units = await this._0x238965(null), template_units = [...$('#template_a input[name*=unit]')].reduce((acc, $pb) => (acc[$pb.name.replace(/unit_/, ``)] = Number($pb.value), acc), {});
            let targetsAPIUpdated = Object.entries(APIUpdated.database).filter(([, {playerID}]) => playerID == 0).map(([village]) => village), skipBarbs = [], barbsFilter = [];
            await this._0x238955('report', (xhr) => $(xhr).find('#report_list tr[class*=report]').each((i, $pb) => skipBarbs.push($pb.textContent.match(/\d{1,3}\|\d{1,3}/g)[1])));
            Object.entries(villages_units).forEach(([village, units]) => {
                let template = this._0x238963.units.reduce((acc, unit) => (template_units[unit] && acc.push(units[unit] / template_units[unit]), acc), []), max_template = Math.min(...template), templates_found = targetsAPIUpdated.filter((barbarian) => !skipBarbs.includes(barbarian)).map((barbarian) => ({barbarian, distance: ScriptAPI._0x238979(village, barbarian)})).filter(({distance}) => distance <= Number(barbsRadius)).sort((a, b) => a.distance - b.distance).slice(0, max_template).map(({barbarian}) => {
                    return skipBarbs.push(barbarian), {
                        village_id: APIUpdated.database[village].villageID, template_id, target_id: APIUpdated.database[barbarian].villageID
                    };
                });
                return barbsFilter.push(...templates_found);
            });
            return barbsFilter.length ? this._0x238971(barbsFilter, 'mapping') && selector.eq(1).prop('disabled', false) : !UI.ErrorMessage('Nenhum mapeamento encontrado!') && selector.prop('disabled', false) && $('#loading').empty(this);
        },
        _0x238963: function(event) {
            /* FILTER UNITS */
            let skipUnits = ['snob', 'ram', 'catapult', 'militia'];
            return this._0x238963.units = game_data.units.filter((unit) => !skipUnits.includes(unit)); 
        },
        _0x238964: function(event) {
            /* FILTER REPORTS */
            let RequestFilters = function(resolve) { 
                let Promises = [{url: '&action=set_filter_subject', method: 'POST', data: 'filter_subject='}, {url: '&action=set_filter_current_village', method: 'POST', data: null}, {url: '&action=set_filter_max_loot', method: 'POST', data: null}, {url: '&action=set_filter_own_reports', method: 'POST', data: null}, {url: '&action=set_filter_dots', method: 'POST', data: 'filter_dots=0'}, {url: '&action=set_filter_icon', method: 'POST', data: 'filter_attack_type=1&filter_icon_operator=AND'}];
                return $.get(game_data.link_base_pure + 'report&mode=all&group_id=-1').then(async (xhr) => {
                    let selectors = $(xhr).find('input#filter_subject, input#filter_current_village, input#filter_max_loot, input#filter_own_reports, input#filter_dots_none, input[name*="filter_attack_type"][value="1"], input[value=AND], input[name="filter_icon[2]"], input[name="filter_icon[64]"]'); for (let i=0;i<selectors.length;i++) {
                        let {url, method, data} = Promises[i > 5e+0 ? 5e+0 : i];
                        (selectors[i][!i && 'value' || 'checked'] ? i < 4 || i > 6 : i > 3 && i < 7) && await $.ajax({url: game_data.link_base_pure + 'report&mode=all' + url, method, data: data + `&h=${game_data.csrf}`});
                    };
                    return resolve(this);
                });
            };
            return new Promise(RequestFilters);
        },
        _0x238947: function (event) {
            /* INIT */
            return localStorage._0x238995 && $('#_0x238995 input:not(.btn)').each((i, input) => (input[input.type == 'checkbox' ? 'checked' : 'value'] = JSON.parse(localStorage._0x238995).template[i], void 0)) && $(`#_0x238995 option[value=${JSON.parse(localStorage._0x238995).optionGroup}]`).prop('selected', true);
        },
        _0x238956: async function(event) {
            /* PROCESS XML */ 
            $('#loading').html('<h4 style="padding: 6px; margin: 0px;">PROCESSANDO TODOS OS DADOS E APLICANDO FILTROS 🔍 AGUARDE...</h4><span id="troops" style="color: #53853b;"></span><br><img src="/graphic/throbber.gif" style="width: 40px;">');
            let selector = $('#_0x238995 #init, #_0x238995 #stop, #_0x238995 #mapping').prop('disabled', true);
            let villages_units = await this._0x238965(null), template_activated = [...$('input#farm_start:checked').closest('tr')].reduce((acc, $pb) => (acc[$pb.id] = [...$($pb).find('[name*=unit], #distance, [id*=loot], [id*=dots]')].reduce((acc, $pb) => (acc[!$pb.id ? $pb.name : $pb.id] = $pb.type == 'number' ? Number($pb.value) : $pb.checked, acc), {}), acc), {}), {template_a, template_b, template_c} = template_activated, [template_id_a, template_id_b] = [$('#template_a input[type=hidden]')[0].value, $('#template_b input[type=hidden]')[0].value];
            let targetsAPIUpdated = Object.entries(APIUpdated.database).filter(([, {playerID}]) => playerID == 0).reduce((acc, [village, {villageID}]) => (acc[village] = villageID, acc), {}), $pbFilter = [];
            await this._0x238955('report', function(xhr) { 
                return $(xhr).find('#report_list tr[class*=report]').each(function(i) {
                    let barbarian = this.textContent.match(/\d{1,3}\|\d{1,3}/g)[1], target_id = targetsAPIUpdated[barbarian];
                    let report_color = $(this).find('img[src*=dots]').attr('src').match(/\w+(?=.png)/)[0], report_loot = $(this).find('img[src*=loot]').attr('src'), max_loot = report_loot && Number(report_loot.match(/\d+(?=.png)/)[0]), report_id = this.className.match(/\d+/)[0], report_spy = $(this).find('img[src*=spy]');
                    return target_id && $pbFilter.push({barbarian, target_id, report_id, report_spy, report_color, report_loot, max_loot});
                });
            });
            let barbsFilter = [], skipBarbs = [];
            !$('#_0x238995 #ignore-attacks').prop('checked') && await this._0x238955('commands', (xhr) => $(xhr).find('#commands_table tr:has(img[src*=farm])').each((i, $pb) => skipBarbs.push($pb.textContent.match(/\d{1,3}\|\d{1,3}/)[0])));
            Object.keys(villages_units).forEach((village) => {
                let templates_found = $pbFilter.reduce((acc, $pb) => {
                    let distance = ScriptAPI._0x238979(village, $pb.barbarian); 
                    $pb.distance = distance;
                    return !skipBarbs.includes($pb.barbarian) && [
                        template_c, 
                        template_b, 
                        template_a,
                    ].some((template) => template && distance <= template.distance) && acc.push($pb), acc;
                }, []).sort((a, b) => $('#_0x238995 #order').prop('value') != 2 ? a.distance - b.distance : b.distance - a.distance).reduce((acc, $pb, i) => { 
                    let village_id = APIUpdated.database[village].villageID;
                    return [
                        template_c,
                        template_b, 
                        template_a,
                    ].some((template, i) => (!i ? $pb.report_spy.length : !void 0) && template && $pb.distance <= template.distance && (!$pb.report_loot ? template[$pb.report_color + '_dots'] : ($pb.max_loot && template.max_loot || !$pb.max_loot && template.parcial_loot) && template[$pb.report_color + '_dots']) && (!i ? this._0x238963.units.filter((unit) => template['unit_' + unit]).some((unit) => villages_units[village][unit] > 0) : this._0x238963.units.filter((unit) => template['unit_' + unit] > 0).every((unit) => villages_units[village][unit] > 0 && (villages_units[village][unit] -= template['unit_' + unit]) >= 0)) && (!i ? acc.push({
                        village_id, 
                        report_id: $pb.report_id
                    }) : acc.push({
                        target_id: $pb.target_id, 
                        template_id: i == 1 ? template_id_b : template_id_a, village_id
                    }), skipBarbs.push($pb.barbarian) && !void 0)), acc;
                }, []);
                return barbsFilter.push(...templates_found); 
            });
            barbsFilter.length ? this._0x238971(barbsFilter, 'farm') : !UI.ErrorMessage('Não existem aldeias bárbaras ou unidades!') && this._0x238968(this);
            return selector.eq(1).prop('disabled', false);
        },
        _0x238965: async function(event) {
            /* REQUEST TROOPS BY GROUPS */
            let group_id = $('#_0x238995 .optionGroup option:selected')[0].value, villages = await this._0x238966(group_id), troops = {};
            await this._0x238955('troops', (xhr) => $(xhr).find('.quickedit-label').each(function(i) {
                let village = this.textContent.match(/\d{1,3}\|\d{1,3}/)[0]; 
                    return !villages.includes(village) ? void 0 : troops[village] = $(this).closest('tr').find('.unit-item').toArray(void 0).reduce((acc, $pb, i) => (acc[game_data.units[i]] = Number($pb.textContent), acc), {});
                }),
            );
            return troops;
        },
        _0x238966: function (group_id) {
            /* REQUEST VILLAGES BY GROUPS */
            return $.post(game_data.link_base_pure + 'groups&ajax=load_villages_from_group', {group_id, h: game_data.csrf}).then((xhr) => xhr.html.match(/\d{1,3}\|\d{1,3}/g) ?? []);
        },
        _0x238955: async function(string, event) {
            /* PROCESS PAGES */
            return ScriptAPI._0x238676(string, 0).includes('report') && await this._0x238964(!void 0) && NaN || $.ajax({url: game_data.link_base_pure + ScriptAPI._0x238676(string, 0), method: 'POST', data: `page_size=1000&h=${game_data.csrf}`}).then(async (xhr) => {
                let pagedNavItem = $(xhr).find('.paged-nav-item'), pageSize = [xhr]; for (let i=0;i<pagedNavItem.length;i++) {
                    let response = await $.get(game_data.link_base_pure + ScriptAPI._0x238676(string, 1) + (!ScriptAPI._0x238676(string, 1).includes('report') ? `&page=${i+1}` : `&from=${(i+1)*1000}`));
                    pageSize.push(response);
                };          
                return pageSize.forEach(event);
            });
        },
        _0x238967: function(event) {
            /* REQUEST TEMPLATE C */
            let dataURL = [...$(event.target).closest('tr').find('[name*=unit]')].reduce((acc, unit) => unit.checked ? acc + `&` + unit.name.replace(/unit_/, ``) + '=on' : acc, ``) + '&target_screen=am_farm';
            return event.target.name && event.target.name.includes('unit') && $.ajax({url: game_data.link_base_pure + `am_farm&ajaxaction=change_troops&h=${game_data.csrf}`, method: 'POST', data: dataURL});
        },
        _0x238968: function(event) {
            /* RELOAD FARMS */
            let [script_fixed, script_min, script_max] = $('#time-farm-fixed, #time-farm-min, #time-farm-max').map((i, input) => ScriptAPI._0x238982(input.value) ?? void 0), script_timer = $('#time-farm option:selected')[0].textContent != 'RANDOM' ? script_fixed : script_min + Math.random() * (script_max - script_min);
            this._0x238968.timers = setTimeout(($pb) => this._0x238956(this), script_timer * 1000);
            return $('#loading').find('h4').html(`REINICIANDO A FARM EM:&nbsp;<span class="timer" style="color: #c14848;">${ScriptAPI._0x238993(script_timer)}</span>&nbsp;🕐`).nextAll('div, span, img, br').remove() && Timing.tickHandlers.timers.init();
        },
        _0x238969: function(event) {
            /* TEMPLATE SAVE */
            return $.get(game_data.link_base_pure + 'am_farm').then((xhr) => {
                let [template_id_a, template_new_a, template_id_b, template_new_b] = [...$(xhr).find('input[name*=template]')].map((input) => input.value), template_a = $('#template_a input[name*=unit]'), template_b = $('#template_b input[name*=unit]');
                let dataURL = `template[${template_id_a}][id]=${template_id_a}&template[${template_id_a}][new]=${template_new_a}` + this._0x238963.units.reduce((acc, unit, i) => acc + `&${unit}[${template_id_a}]=${template_a[i].value}`, ``) + `&template[${template_id_b}][id]=${template_id_b}&template[${template_id_b}][new]=${template_new_b}` + this._0x238963.units.reduce((acc, unit, i) => acc + `&${unit}[${template_id_b}]=${template_b[i].value}`, ``) + `&h=${game_data.csrf}`;
                return this._0x238970(dataURL);
            });
        },
        _0x238970: function(event) {
            /* CREATE NEW TEMPLATE */
            return $.ajax({url: game_data.link_base_pure + 'am_farm&action=edit_all', method: 'POST', data: encodeURI(event),
                success: function (xhr) {
                    let [template_id_a, template_new_a, template_id_b, template_new_b] = [...$(xhr).find('input[name*=template]')].map((input) => input.value);
                    $('#_0x238995 input[type=hidden]').each((i, input) => !i ? input.value = template_id_a : i == 1 ? input.value = template_new_a : i == 2 ? input.value = template_id_b : input.value = template_new_b);
                    return !UI.SuccessMessage('O Modelo foi salvo com sucesso!') && ScriptAPI._0x238995._0x238957();
                },
            });
        },
        _0x238971: function(barbsFilter, event) {
            /* SEND FARMS */
            $('#loading').find('h4').html(event != 'mapping' ? 'AUTOFARM INICIADO! 🏇' : 'MAPEAMENTO INICIADO! 🎠').after('<div class="progress-bar live-progress-bar progress-bar-alive" style="width: auto; margin: 6px;"><div style="background: rgb(146, 194, 0);"></div><span class="label"></span></div>').closest('div').find('img').attr('src', '/graphic/loading.gif');
            let updateProgressBar = $('.progress-bar'), [script_fixed, script_min, script_max] = $('#interval-farm-fixed, #interval-farm-min, #interval-farm-max').map((i, input) => Number(input.value) ?? void 0), script_timer = $('#interval-farm option:selected')[0].textContent != 'RANDOM' ?  script_fixed : script_min + Math.random() * (script_max - script_min), TribalWarsRequest = function(index) {
                let source = barbsFilter[index].village_id, template_id = barbsFilter[index].template_id, target = barbsFilter[index].target_id, report_id = barbsFilter[index].report_id;
                let baseURL = `/game.php?village=${source}&screen=am_farm&mode=farm&ajaxaction=farm`, dataURL = report_id ? [baseURL + `_from_report&json=1`, {report_id, h: game_data.csrf}] : [baseURL + `&json=1`, {target, template_id, source}];
                TribalWars.post(dataURL[0], null, dataURL[1], 
                function(event) {
                    return $('#loading').find('span').html('<br><b>' + event.success + '</b><br>') && updatedProgressBar(index+1);
                }, 
                function(event) {
                    let errorMessage = _('8c51142762038a5b8e6c677aabcbedff'), timers = ScriptAPI._0x238995._0x238971.timers;
                    return event != errorMessage ? updatedProgressBar(index+1) : !timers.forEach((referrer) => clearTimeout(referrer)) && barbsFilter.splice(0, barbsFilter.length, ...barbsFilter.filter((template) => template.village_id != source)) && !barbsFilter.length ? updatedProgressBar(null) : timers.splice(0, timers.length, ...barbsFilter.map((el, i) => setTimeout(TribalWarsRequest, i * script_timer, i)));
                });
            };
            let updatedProgressBar = ($pb) => !UI.updateProgressBar(updateProgressBar, $pb ?? 0, barbsFilter.length) && (!$pb || $pb == barbsFilter.length) && (event != 'mapping' ? ScriptAPI._0x238995._0x238968(this) : $('#loading').empty(this) && $('#_0x238995 #init, #_0x238995 #mapping').prop('disabled', ![]));
            return this._0x238971.timers = barbsFilter.map((el, i) => setTimeout(TribalWarsRequest, i * script_timer, i));
        },
        _0x238972: function(event) {
            /* STOP SCRIPT */
            !this._0x238971.timers ? clearTimeout(this._0x238968.timers) : [...this._0x238971.timers, this._0x238968.timers].forEach((referrer) => clearTimeout(referrer));
            return $('#_0x238995 #init, #_0x238995 #mapping').prop('disabled', false) && $('#loading').empty(this);
        },
        _0x238957: function(event) {
            /* SAVE SCRIPT */
            let optionGroup = $('#_0x238995 .optionGroup option:selected')[0].value, template = $('#_0x238995 input:not(.btn)').map((i, input) => input.type == 'checkbox' ? input.checked : input.value); 
            return localStorage.setItem('_0x238995', JSON.stringify({template, optionGroup}));
        },
    },
    _0x238996: {
    /*--------------------------------
    * SCRIPT AUTOCOINS VERSION 1.0.0 *
    ---------------------------------*/
        _0x238973: async function(event) {
            /* CALL RESOURCES */
            let selector = $('#request-resources #init'); if (true && !selector.prop('checked') || selector.prop('disabled', true) && !!void 0) return ![this._0x238973.timers, this._0x238975.timers].forEach(($pb) => clearTimeout($pb) || !void 0) && $('#end-time-resources').html(`00:00:00`);
            let [village_id, group_id] = $('#_0x238996').find('.optionVillage option:selected, .optionGroup option:selected').map((i, input) => !i ? APIUpdated.database[input.textContent.match(/\d{1,3}\|\d{1,3}/)[0]].villageID : input.value), [time_resources_fixed, time_resources_min, time_resources_max] = $('#time-resources-fixed, #time-resources-min, #time-resources-max').map((i, input) => ScriptAPI._0x238982(input.value)), script_timer = $('#time-resources option:selected')[0].textContent != 'RANDOM' ? time_resources_fixed : time_resources_min + Math.random() * (time_resources_max - time_resources_min);
            let BuildingRequestResources = 'target_id=0&select-all=on';
            await this._0x238955('market', village_id, group_id, (xhr) => $(xhr).find('tr.supply_location').each(function(i) {
                let resources = [...$(this).find('td a, td.wood, td.stone, td.iron, td.traders')].reduce((acc, el, i) => (acc[!el.className && 'village' || el.className] = !i ? this.dataset.village : Number(i != 4 ? el.dataset.res : this.dataset.capacity), acc), {});
                    let componentFractions = {
                        wood: 0.3373493975903614, stone: 0.3614457831325301, iron: 0.30120481927710846,
                    };   
                    let $pbElement = ['wood', 'stone', 'iron'].reduce((acc, $pb) => acc.push(Math.min(resources[$pb], resources.traders * (!NaN && $('#_0x238996 input[type=radio]:checked')[0].value != '2' && componentFractions[$pb] || resources[$pb] / (resources.wood + resources.stone + resources.iron)))) && acc, []);
                    BuildingRequestResources += `&resource[${resources.village}][wood]=${~~($pbElement[0])}&resource[${resources.village}][stone]=${~~($pbElement[1])}&resource[${resources.village}][iron]=${~~($pbElement[2])}&select-village=${resources.village}`;
                }),
            );
            BuildingRequestResources.match(/(?<=\[.*\]=)\d+/g).some(($pb) => $pb > 0e+0) && await $.ajax({url: `/game.php?village=${village_id}&screen=market&ajaxaction=call&h=${game_data.csrf}`, method: 'POST', data: encodeURI(BuildingRequestResources)});
            !this._0x238975(village_id, group_id) || $('#end-time-resources').html(`<span class="timer">${ScriptAPI._0x238993(script_timer)}</span>`) && Timing.tickHandlers.timers.init();
            return this._0x238973.timers = setTimeout(($pb) => this._0x238973(!void 0), script_timer * 1000), selector.prop('disabled', false);
        },
        _0x238956: async function(event) {
            /* PROCESS XML */
            let selector = $('#_0x238996 #user-actions #init, #_0x238996 #user-actions #stop').prop('disabled', true), village = $('.optionVillage option:selected').text().match(/\d{1,3}\|\d{1,3}/)[0], village_id = APIUpdated.database[village].villageID; 
            let [time_coins_fixed, time_coins_min, time_coins_max] = $('#time-coins-fixed, #time-coins-min, #time-coins-max').map((i, input) => ScriptAPI._0x238982(input.value)), script_timer = $('#time-coins option:selected')[0].textContent != 'RANDOM' ? time_coins_fixed : time_coins_min + Math.random() * (time_coins_max - time_coins_min);
            await $.get(`/game.php?village=${village_id}&screen=snob&mode=train`).then(async (xhr) => $(xhr).find('#coin_mint_fill_max').length && await $.ajax({url: `/game.php?village=${village_id}&screen=snob&action=coin`, method: 'POST', data: `count=` + $(xhr).find('#coin_mint_fill_max')[0].textContent.match(/\d+/)[0] + `&h=${game_data.csrf}`}));
            $('#end-time-coins').html(`<span class="timer">` + ScriptAPI._0x238993(script_timer) + `</span>`) && Timing.tickHandlers.timers.init(), this._0x238956.timers = setTimeout(($pb) => this._0x238956(this), script_timer * 1000);
            selector.eq(1).prop('disabled', false);
        },
        _0x238955: function(string, village_id, group_id, event) { 
            /* PROCESS PAGES */
            return $.ajax({url: `/game.php?village=${village_id}&screen=${ScriptAPI._0x238676(string, 0)}&group=${group_id}`, method: 'POST', data: `page_size=1000&h=${game_data.csrf}`}).then(async (xhr) => {
                let pagedNavItem = $(xhr).find('a.paged-nav-item'), pageSize = [xhr]; for (let i=0;i<pagedNavItem.length-1;i++) {
                    let response = await $.get(`/game.php?village=${village_id}&screen=${ScriptAPI._0x238676(string, 1, village_id)}&page=${i+1}`);
                    pageSize.push(response);
                };          
                return pageSize.forEach(event);
            });
        },
        _0x238975: async function(village_id, group_id) {
            /* OVERVIEW RESOURCES */
            let $pbElement = ``;
            !await this._0x238955('transport', village_id, group_id, (xhr) => $pbElement += $(xhr).find('#trades_table')[0]?.innerHTML || ``) && $pbElement ? $('#_0x238996 #resources-table').html('<table id="container" width="100%">' + $pbElement + '</table>').find('tr').each((i, $pb) => $($pb.cells).each((i, $pb) => [0, 1, 4, 7].includes(i) ? $($pb).remove() : void 0) && !$pb.className.includes('selected') && i ? $($pb).remove() : void 0) && Timing.tickHandlers.timers.init() : $('#_0x238996 #resources-table').html(`<span style="font-size: smaller; color: #6d6db3;">NÃO EXISTEM TRANSPORTES PARA SEREM EXIBIDOS!</span>`);
            this._0x238975.timers = !clearTimeout(this._0x238975.timers) && setTimeout(($pb) => this._0x238975(village_id, group_id), 60 * 1000 + Math.random() * (180 * 1000 - 60 * 1000) || !void 0);
        },
        _0x238972: function(event) {
            /* STOP SCRIPT */
            !clearTimeout(this._0x238956.timers) && $('#end-time-coins').html(`00:00:00`);
            return $('#_0x238996 #user-actions #init').prop('disabled', false);
        },
    },
    _0x238997: {
    /*------------------------------------
    * SCRIPT AUTOINCOMINGS VERSION 1.0.0 *
    -------------------------------------*/
        _0x238947: function(event) {
            /* INIT */
            return JSON.parse(localStorage._0x238997 || null)?.incomings && $('#welcome-obsidian #run-incomings').prop('checked', true) && ScriptAPI._0x238997._0x238956(!NaN);
        },
        _0x238956: function(event) {
            /* INCOMINGS */
            return !$('#run-incomings').prop('checked') && !clearTimeout(this._0x238977.timers) && $('#timer-incomings').html('00:00:00') || !$('#run-incomings')[0].setAttribute('disabled', ``) && $.ajax({url: game_data.link_base_pure + 'overview_villages&subtype=attacks&mode=incomings&group=0', method: 'GET',
                success: function(xml) {
                    let $pbElement = $(xml).find('#incomings_form').serialize();
                    $pbElement += $pbElement.match(/(?<=\%5B)\d+(?=\%5D)/g)?.reduce((acc, $pb) => acc += `&id_${$pb}=on` , ``) + `&all=on&label=Etiqueta`;
                    return ScriptAPI._0x238997._0x238977($pbElement);
                },
            });
        },
        _0x238977: function(event) {
            /* SEND INCOMINGS */
            return $.ajax({url: game_data.link_base_pure + `overview_villages&mode=incomings&action=process&type=unignored&subtype=all&h=${game_data.csrf}`, method: 'POST', data: event.replace(/undefined&/, ``),
                complete: function(event) {
                    let $pbTimer = 60 + Math.random() * (300 - 60);
                    ScriptAPI._0x238997._0x238977.timers = setTimeout(($pb) => ScriptAPI._0x238997._0x238956(this), $pbTimer * 1000);
                    return $('#welcome-obsidian #run-incomings').prop('disabled', false) && $('#welcome-obsidian #timer-incomings').html(`<span class="timer">${ScriptAPI._0x238993($pbTimer)}</span>`) && Timing.tickHandlers.timers.init();
                },
            });
        },
        _0x238957: function(event) {
            /* SAVE SCRIPT */
            return localStorage.setItem('_0x238997', JSON.stringify({incomings: $('#run-incomings')[0].checked}));
        },
    },  
    _0x238899: {
        /*--------------------------------------
        * SCRIPT BALANCER BY COSTACHE MODIFIED *
        ---------------------------------------*/ 
        _0x238947: async function(event) {
            /* INIT */
            JSON.parse(localStorage._0x238899 || null)?.options.forEach(($pb, i) => i != 4 && $('#_0x238897 table').find('input, select:not(#time-balancer)').eq(i).val($pb).closest('td').find('output').val($pb) || $(`#_0x238897 table option[value=${$pb}]`).prop('selected', true) || !void 0);
            var _0x58d0bc='resource_balancer';var _0x34e37a='madalinoTribalWarsScripts';if(typeof TWMap!='undefined')var _0x11abe9=TWMap['mapHandler']['spawnSector'];var _0x172c0a='#001a33';var _0x54fc2c='#002e5a';var _0x24644b='#3b3b00';var _0x2d56b4='#626200';var _0x3111d='#1e003b';var _0x45e143='#3c0076';var _0x5e6c51='[[\x22theme1\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#C5979D\x22,\x22#2B193D\x22,\x22#2C365E\x22,\x22#484D6D\x22,\x22#4B8F8C\x22,\x2250\x22]],[\x22currentTheme\x22,\x22theme1\x22],[\x22theme2\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#F76F8E\x22,\x22#113537\x22,\x22#37505C\x22,\x22#445552\x22,\x22#294D4A\x22,\x2250\x22]],[\x22theme3\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#ACFCD9\x22,\x22#190933\x22,\x22#665687\x22,\x22#7C77B9\x22,\x22#623B5A\x22,\x2250\x22]],[\x22theme4\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#181F1C\x22,\x22#60712F\x22,\x22#274029\x22,\x22#315C2B\x22,\x22#214F4B\x22,\x2250\x22]],[\x22theme5\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#9AD1D4\x22,\x22#007EA7\x22,\x22#003249\x22,\x22#1F5673\x22,\x22#1C448E\x22,\x2250\x22]],[\x22theme6\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#EA8C55\x22,\x22#81171B\x22,\x22#540804\x22,\x22#710627\x22,\x22#9E1946\x22,\x2250\x22]],[\x22theme7\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#754043\x22,\x22#37423D\x22,\x22#171614\x22,\x22#3A2618\x22,\x22#523A34\x22,\x2250\x22]],[\x22theme8\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#9E0031\x22,\x22#8E0045\x22,\x22#44001A\x22,\x22#600047\x22,\x22#770058\x22,\x2250\x22]],[\x22theme9\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#C1BDB3\x22,\x22#5F5B6B\x22,\x22#323031\x22,\x22#3D3B3C\x22,\x22#575366\x22,\x2250\x22]],[\x22theme10\x22,[\x22#E0E0E0\x22,\x22#000000\x22,\x22#E6BCCD\x22,\x22#29274C\x22,\x22#012A36\x22,\x22#14453D\x22,\x22#7E52A0\x22,\x2250\x22]]]';var _0x1e441c='resBalancerTheme';if(localStorage['getItem'](_0x1e441c)!=undefined){let _0x7b172b=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));Array['from'](_0x7b172b['keys']())['forEach'](_0x4d7a50=>{if(_0x4d7a50!='currentTheme'){let _0x149fb5=_0x7b172b['get'](_0x4d7a50);if(_0x149fb5['length']==0x7){_0x149fb5['push'](0x32);_0x7b172b['set'](_0x4d7a50,_0x149fb5);}}});localStorage['setItem'](_0x1e441c,JSON['stringify'](Array['from'](_0x7b172b['entries']())));}var _0x4afef4='#ffffff';var _0x126948='#000000';var _0x28dc98='#C5979D';var _0x36fef7='#2B193D';var _0x551ec1='#2C365E';var _0xf32e6f='#484D6D';var _0x25cb9c='#4B8F8C';var _0x1ddf5e=0x32;var _0x52ee4d=-0x32;var _0x23b653=-0x1e;var _0x5ecbac=0x1e;var _0x252335=_0x36fef7;var _0x4c907f=_0x308715(_0x36fef7,_0x23b653);async function _0x5eeaa8(){_0x2c8c03();_0x4d2961();_0x39867f();}_0x5eeaa8();function _0x308715(_0x5388cf,_0x521cf7){let _0x31e3ff=_0x5388cf;_0x31e3ff=_0x31e3ff['replace'](/^\s*#|\s*$/g,'');if(_0x31e3ff['length']===0x3){_0x31e3ff=_0x31e3ff['replace'](/(.)/g,'$1$1');}let _0x5a122d=parseInt(_0x31e3ff['substr'](0x0,0x2),0x10);let _0x2f70bf=parseInt(_0x31e3ff['substr'](0x2,0x2),0x10);let _0x568a46=parseInt(_0x31e3ff['substr'](0x4,0x2),0x10);const _0x55f2d7=(0x64+_0x521cf7)/0x64;_0x5a122d=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x5a122d*_0x55f2d7)));_0x2f70bf=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x2f70bf*_0x55f2d7)));_0x568a46=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x568a46*_0x55f2d7)));return'#'+('00'+_0x5a122d['toString'](0x10))['slice'](-0x2)['toUpperCase']()+('00'+_0x2f70bf['toString'](0x10))['slice'](-0x2)['toUpperCase']()+('00'+_0x568a46['toString'](0x10))['slice'](-0x2)['toUpperCase']();}function _0x4d2961(){let _0x5327b3='<p>if\x20the\x20factor\x20is\x200\x20your\x20villages\x20will\x20receive\x20resources\x20only\x20for\x20building\x20construction(from\x20account\x20manager)\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>if\x20the\x20factor\x20is\x201\x20resources\x20will\x20be\x20distributed\x20equally,\x20at\x20the\x20end\x20of\x20balancing\x20every\x20village\x20will\x20have\x20the\x20same\x20amount\x20of\x20resources\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>if\x20it\x27s\x20for\x20example\x200.2\x20in\x20this\x20case\x20your\x20villages\x20will\x20receive\x2020%\x20from\x20average\x20value\x20of\x20each\x20resources\x20and\x20in\x20adition\x20will\x20receive\x20enough\x20resources\x20for\x20building\x20construction(from\x20account\x20manager)</p>';let _0x277632='<p>set\x20for\x20how\x20many\x20hours\x20the\x20villages\x20should\x20have\x20resources\x20for\x20building\x20construction\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>\x20your\x20account\x20manager\x20must\x20be\x20active\x20and\x20your\x20villages\x20must\x20have\x20a\x20template\x20construction\x20active,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20otherwise\x20this\x20setting\x20will\x20be\x20ignored\x20';let _0xf888b='<p>if\x20it\x27s\x20set\x20to\x201\x20cluster\x20then\x20balancing\x20resources\x20will\x20be\x20globally\x20and\x20for\x202\x20or\x20more\x20it\x20will\x20be\x20locally\x20per\x20each\x20cluster\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>a\x20larger\x20number\x20of\x20clusters\x20results\x20in\x20a\x20shorter\x20maximum\x20travel\x20time\x20and\x20balanced\x20more\x20locally\x20which\x20is\x20less\x20optimal\x20\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>every\x20time\x20the\x20script\x20is\x20run\x20clusters\x20are\x20calculated\x20randomly\x20and\x20they\x20may\x20not\x20be\x20optimally\x20calculated\x20\x20every\x20time\x20so\x20look\x20out\x20for\x20maximum\x20travel\x20distance\x20\x0a</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>if\x20it\x27s\x20run\x20on\x20the\x20map\x20it\x20can\x20be\x20seen\x20how\x20clusters\x20were\x20formed\x20and\x20how\x20many\x20resources\x20are\x20sent\x20and\x20received\x0a</p>';let _0x2e5694='\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20id=\x22div_container\x22\x20class=\x22scriptContainer\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22scriptHeader\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22\x20margin-top:10px;\x22><h2>Resources\x20balancer</h2></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:absolute;top:10px;right:\x2010px;\x22><a\x20href=\x22#\x22\x20onclick=\x22$(\x27#div_container\x27).remove()\x22><img\x20src=\x22https://img.icons8.com/emoji/24/000000/cross-mark-button-emoji.png\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:absolute;top:8px;right:\x2035px;\x22\x20id=\x22div_minimize\x22><a\x20href=\x22#\x22><img\x20src=\x22https://img.icons8.com/plasticine/28/000000/minimize-window.png\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22position:absolute;top:10px;right:\x2060px;\x22\x20id=\x22div_theme\x22><a\x20href=\x22#\x22\x20onclick=\x22$(\x27#theme_settings\x27).toggle()\x22><img\x20src=\x22https://img.icons8.com/material-sharp/24/fa314a/change-theme.png\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22theme_settings\x22></div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22div_body\x22\x20style=\x22height:\x20600px;\x20overflow-y:\x20auto\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20id=\x22table_main\x22\x20\x20class=\x22scriptTable\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>setting\x20name</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>setting\x20value</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>reserve\x20merchants</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;justify-content:\x20center;\x20align-items:\x20center;\x20\x20\x20\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22number\x22\x20id=\x22nr_merchants_reserve\x22\x20class=\x22scriptInput\x22\x20placeholder=\x2215\x22\x20value=\x220\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><a\x20href=\x22#\x22\x20onclick=\x22UI.InfoMessage(\x27how\x20many\x20merchants\x20do\x20you\x20want\x20to\x20keep\x20home\x27,4000)\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/dbeaf8db/graphic/questionmark.png\x22\x20style=\x22width:\x2013px;\x20height:\x2013px\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>construction\x20time[hours]</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;justify-content:\x20center;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22number\x22\x20id=\x22time_construction\x22\x20class=\x22scriptInput\x22\x20placeholder=\x220\x22\x20value=\x220\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><a\x20href=\x22#\x22\x20onclick=\x22UI.InfoMessage(`'+_0x277632+'`,15000)\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/dbeaf8db/graphic/questionmark.png\x22\x20style=\x22width:\x2013px;\x20height:\x2013px\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>average\x20factor[0-1]</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;justify-content:\x20center;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22number\x22\x20id=\x22nr_average_factor\x22\x20class=\x22scriptInput\x22\x20placeholder=\x221\x22\x20value=\x221\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><a\x20href=\x22#\x22\x20onclick=\x22UI.InfoMessage(`'+_0x5327b3+'`,20000)\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/dbeaf8db/graphic/questionmark.png\x22\x20style=\x22width:\x2013px;\x20height:\x2013px\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>number\x20of\x20clusters</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;justify-content:\x20center;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><center><input\x20type=\x22number\x22\x20id=\x22nr_clusters\x22\x20class=\x22scriptInput\x22\x20placeholder=\x221\x22\x20value=\x221\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><a\x20href=\x22#\x22\x20onclick=\x22UI.InfoMessage(`'+_0xf888b+'`,20000)\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/dbeaf8db/graphic/questionmark.png\x22\x20style=\x22width:\x2013px;\x20height:\x2013px\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20hidden\x20id=\x22tr_merchant_capacity\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>merchant\x20capacity</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;justify-content:\x20center;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><input\x20type=\x22number\x22\x20id=\x22merchant_capacity\x22\x20class=\x22scriptInput\x22\x20placeholder=\x221000\x22\x20value=\x271000\x27></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><a\x20href=\x22#\x22\x20onclick=\x22UI.InfoMessage(\x27set\x20merchant\x20capacity\x20to\x20either\x201000\x20or\x201500\x27,3000)\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/dbeaf8db/graphic/questionmark.png\x22\x20style=\x22width:\x2013px;\x20height:\x2013px\x22/></a></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</center>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20type=\x22button\x22\x20onclick=\x22balancingResources()\x22\x20style=\x22margin:10px\x22\x20value=\x22start\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</center>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22div_tables\x22\x20hidden>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center><div\x20id=\x22table_stats\x22\x20style=\x22width:100%\x22></div></center><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center><div\x20id=\x22table_view\x22\x20style=\x22height:500px;width:100%;overflow:auto\x22></div></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22scriptFooter\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22\x20margin-top:5px;\x22><h5>made\x20by\x20Costache</h5></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>';$('#div_container')['remove']();$('#contentContainer')['eq'](0x0)['prepend'](_0x2e5694);$('#mobileContent')['eq'](0x0)['prepend'](_0x2e5694);if(game_data['device']!='desktop'){$('#div_body')['css']('height','500px');}$('#div_container')['css']('position','fixed');$('#div_container')['draggable']();if(game_data['locale']=='pt_PT'){$('#tr_merchant_capacity')['show']();}$('#div_minimize')['on']('click',()=>{let _0x3f3f51=Math['ceil']($('#div_container')['width']()/$('body')['width']()*0x64);if(_0x3f3f51>=_0x1ddf5e){$('#div_container')['css']({'width':'10%'});$('#div_body')['hide']();}else{$('#div_container')['css']({'width':_0x1ddf5e+'%'});$('#div_body')['show']();}});if(localStorage['getItem'](game_data['world']+'settings_resources_balancer2')!=null){let _0x42ca4d=JSON['parse'](localStorage['getItem'](game_data['world']+'settings_resources_balancer2'));$('#div_container\x20input[type=number]')['each'](function(_0xbdf663,_0x6524e3){this['value']=_0x42ca4d[_0xbdf663];});}$('#div_container\x20input[type=number]')['on']('click\x20input\x20change',()=>{let _0x2cf6ee=[];$('#div_container\x20input[type=number]')['each'](function(){var _0x28a035=this['value'];_0x2cf6ee['push'](_0x28a035);});let _0x14ce32=JSON['stringify'](_0x2cf6ee);let _0x34d24f=localStorage['getItem'](game_data['world']+'settings_resources_balancer2');if(_0x14ce32!=_0x34d24f){localStorage['setItem'](game_data['world']+'settings_resources_balancer2',_0x14ce32);}});}function _0x39867f(){let _0x546cd1='\x0a\x20\x20\x20\x20<h3\x20style=\x22color:'+_0x4afef4+';padding-left:10px;padding-top:5px\x22>after\x20theme\x20is\x20selected\x20run\x20the\x20script\x20again<h3>\x0a\x20\x20\x20\x20<table\x20class=\x22scriptTable\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20\x20id=\x22select_theme\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme1\x22>theme1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme2\x22>theme2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme3\x22>theme3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme4\x22>theme4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme5\x22>theme5</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme6\x22>theme6</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme7\x22>theme7</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme8\x22>theme8</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme9\x22>theme9</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22theme10\x22>theme10</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>value</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>color\x20hex</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>textColor</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x4afef4+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x4afef4+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>backgroundInput</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x126948+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x126948+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>borderColor</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x28dc98+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x28dc98+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>backgroundContainer</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x36fef7+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x36fef7+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>backgroundHeader</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x551ec1+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x551ec1+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>backgroundMainTable</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0xf32e6f+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0xf32e6f+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>backgroundInnerTable</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+_0x25cb9c+'\x22\x20class=\x22td_background\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22text\x22\x20class=\x22scriptInput\x20input_theme\x22\x20value=\x22'+_0x25cb9c+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>widthInterface</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20type=\x22range\x22\x20min=\x2225\x22\x20max=\x22100\x22\x20class=\x22slider\x20input_theme\x22\x20id=\x22input_slider_width\x22\x20value=\x22'+_0x1ddf5e+'\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20id=\x22td_width\x22>'+_0x1ddf5e+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20type=\x22button\x22\x20id=\x22btn_save_theme\x22\x20value=\x22Save\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20type=\x22button\x22\x20id=\x22btn_reset_theme\x22\x20value=\x22Default\x20themes\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x0a\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20';$('#theme_settings')['append'](_0x546cd1);$('#theme_settings')['hide']();let _0x169306='';let _0x868f48=[];let _0x31b2a2=new Map();$('#select_theme')['on']('change',()=>{if(localStorage['getItem'](_0x1e441c)!=undefined){_0x169306=$('#select_theme')['find'](':selected')['text']();_0x868f48=Array['from']($('.input_theme'))['map'](_0x5d08d2=>_0x5d08d2['value']['toUpperCase']()['trim']());_0x31b2a2=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));_0x868f48=_0x31b2a2['get'](_0x169306);Array['from']($('.input_theme'))['forEach']((_0x180473,_0x418c9a)=>{_0x180473['value']=_0x868f48[_0x418c9a];});Array['from']($('.td_background'))['forEach']((_0x85d85,_0x19780e)=>{_0x85d85['style']['background']=_0x868f48[_0x19780e];});_0x31b2a2['set']('currentTheme',_0x169306);localStorage['setItem'](_0x1e441c,JSON['stringify'](Array['from'](_0x31b2a2['entries']())));}});$('#btn_save_theme')['on']('click',()=>{_0x868f48=Array['from']($('.input_theme'))['map'](_0x3bb776=>_0x3bb776['value']['toUpperCase']()['trim']());_0x169306=$('#select_theme')['find'](':selected')['text']();for(let _0x26cdcd=0x0;_0x26cdcd<_0x868f48['length']-0x1;_0x26cdcd++){if(_0x868f48[_0x26cdcd]['match'](/#[0-9 A-F]{6}/)==null){UI['ErrorMessage']('wrong\x20colour:\x20'+_0x868f48[_0x26cdcd]);throw new Error('wrong\x20colour');}}if(localStorage['getItem'](_0x1e441c)!=undefined)_0x31b2a2=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));_0x31b2a2['set'](_0x169306,_0x868f48);_0x31b2a2['set']('currentTheme',_0x169306);localStorage['setItem'](_0x1e441c,JSON['stringify'](Array['from'](_0x31b2a2['entries']())));});$('#btn_reset_theme')['on']('click',()=>{localStorage['setItem'](_0x1e441c,_0x5e6c51);});$('#input_slider_width')['on']('input',()=>{$('#td_width')['text']($('#input_slider_width')['val']()+'%');});if(localStorage['getItem'](_0x1e441c)!=undefined){_0x31b2a2=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));let _0x16d854=_0x31b2a2['get']('currentTheme');document['querySelector']('#select_theme')['value']=_0x16d854;}}function _0x2c8c03(){if(localStorage['getItem'](_0x1e441c)!=undefined){let _0x1416ea=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));let _0x2c1afc=_0x1416ea['get']('currentTheme');let _0x300607=_0x1416ea['get'](_0x2c1afc);_0x4afef4=_0x300607[0x0];_0x126948=_0x300607[0x1];_0x28dc98=_0x300607[0x2];_0x36fef7=_0x300607[0x3];_0x551ec1=_0x300607[0x4];_0xf32e6f=_0x300607[0x5];_0x25cb9c=_0x300607[0x6];_0x1ddf5e=_0x300607[0x7];if(game_data['device']!='desktop'){_0x1ddf5e=0x62;}_0x252335=_0x36fef7;_0x4c907f=_0x308715(_0x36fef7,_0x23b653);}else{localStorage['setItem'](_0x1e441c,_0x5e6c51);let _0xcbfa76=new Map(JSON['parse'](localStorage['getItem'](_0x1e441c)));let _0xaa2f08=_0xcbfa76['get']('currentTheme');let _0x36cdf1=_0xcbfa76['get'](_0xaa2f08);_0x4afef4=_0x36cdf1[0x0];_0x126948=_0x36cdf1[0x1];_0x28dc98=_0x36cdf1[0x2];_0x36fef7=_0x36cdf1[0x3];_0x551ec1=_0x36cdf1[0x4];_0xf32e6f=_0x36cdf1[0x5];_0x25cb9c=_0x36cdf1[0x6];_0x1ddf5e=_0x36cdf1[0x7];if(game_data['device']!='desktop'){_0x1ddf5e=0x62;}_0x252335=_0x36fef7;_0x4c907f=_0x308715(_0x36fef7,_0x23b653);}}window['balancingResources']=async function(){$('#_0x238897\x20#init.btn,\x20#_0x238897\x20#stop')['prop']('disabled',!![])&&ScriptAPI['_0x238899']['_0x238749'](this);await $['post'](game_data['link_base_pure']+'groups&ajax=load_villages_from_group',{'group_id':$('#_0x238897\x20.optionGroup\x20option:selected')[0x0]['value'],'h':game_data['csrf']});let _0x3fa2c5=parseFloat(document['getElementById']('time-building')['value']);let _0xa2b1f5=parseFloat(document['getElementById']('balancing-factor')['value']);let _0x179df1=parseInt(document['getElementById']('reserve-merchants')['value']);let _0x231b7f=0x3e8;let _0x2698bb=parseInt(document['getElementById']('number-clusters')['value']);_0x179df1=Number['isNaN'](_0x179df1)==!![]||_0x179df1<0x0?0x0:_0x179df1;_0x2698bb=Number['isNaN'](_0x2698bb)==!![]||_0x2698bb<0x1?0x1:_0x2698bb;_0x3fa2c5=Number['isNaN'](_0x3fa2c5)==!![]||_0x3fa2c5<0x0?0x14:_0x3fa2c5;_0xa2b1f5=Number['isNaN'](_0xa2b1f5)==!![]?0x1:_0xa2b1f5<0x0?0x0:_0xa2b1f5>0x1?0x1:_0xa2b1f5;_0x231b7f=Number['isNaN'](_0x231b7f)==!![]?0x3e8:_0x231b7f<0x3e8?0x3e8:_0x231b7f>0x5dc?0x5dc:_0x231b7f;_0x3fa2c5=_0x3fa2c5*0xe10;$('#div_container')['remove']();let {list_production:_0x59877c,map_farm_usage:_0x2d18fc}=await _0x281e38()['catch'](_0xaca063=>alert(_0xaca063));let _0x1eb46a=await _0x3795ab()['catch'](_0x55fc18=>alert(_0x55fc18));let _0x1ca80e=await _0x28671d(_0x3fa2c5,_0x2d18fc)['catch'](_0x54ed4d=>alert(_0x54ed4d));let _0x38c24e=JSON['parse'](JSON['stringify'](_0x59877c));let _0x3ce482=new Date()['getTime']();let _0x53882d=[];for(let _0x5c1d60=0x0;_0x5c1d60<_0x59877c['length'];_0x5c1d60++){_0x53882d['push']([parseInt(_0x59877c[_0x5c1d60]['coord']['split']('|')[0x0]),parseInt(_0x59877c[_0x5c1d60]['coord']['split']('|')[0x1])]);}let _0x298f99={'numberOfClusters':_0x2698bb,'maxIterations':0x64};let _0x250f41=_0x141e11(_0x53882d,_0x298f99);let _0x36986d=[];let _0x29015f=[];let _0x389a96=new Map();for(let _0x1a8081=0x0;_0x1a8081<_0x250f41['length'];_0x1a8081++){let _0x4e66b7=_0x250f41[_0x1a8081]['data'];let _0x4c5b9f=[],_0x5e0a6b=[];for(let _0x34ce66=0x0;_0x34ce66<_0x4e66b7['length'];_0x34ce66++){let _0x38edc1=_0x4e66b7[_0x34ce66]['join']('|');for(let _0x20e1cd=0x0;_0x20e1cd<_0x59877c['length'];_0x20e1cd++){if(_0x59877c[_0x20e1cd]['coord']==_0x38edc1){_0x4c5b9f['push'](_0x59877c[_0x20e1cd]);_0x5e0a6b['push'](_0x38c24e[_0x20e1cd]);let _0x25389b=0x0;if(_0x1eb46a['has'](_0x38edc1)){_0x25389b=_0x1eb46a['get'](_0x38edc1)['wood']+_0x1eb46a['get'](_0x38edc1)['stone']+_0x1eb46a['get'](_0x38edc1)['iron'];}_0x389a96['set'](_0x59877c[_0x20e1cd]['id'],{'label_cluster':_0x1a8081,'villageId':_0x59877c[_0x20e1cd]['id'],'total_resources_get':_0x25389b,'total_resources_send':0x0});break;}}}_0x36986d['push'](_0x4c5b9f);_0x29015f['push'](_0x5e0a6b);}let _0x39d2bd=0x0,_0x329c16=0x0,_0x539f54=0x0;let _0x41b06e=0x0,_0xe393b0=0x0,_0x43a015=0x0;for(let _0xe0bb9b=0x0;_0xe0bb9b<_0x59877c['length'];_0xe0bb9b++){let _0x32a1f0=_0x59877c[_0xe0bb9b]['coord'];if(_0x1eb46a['has'](_0x32a1f0)){_0x59877c[_0xe0bb9b]['wood']+=_0x1eb46a['get'](_0x32a1f0)['wood'];_0x59877c[_0xe0bb9b]['stone']+=_0x1eb46a['get'](_0x32a1f0)['stone'];_0x59877c[_0xe0bb9b]['iron']+=_0x1eb46a['get'](_0x32a1f0)['iron'];_0x59877c[_0xe0bb9b]['wood']=Math['min'](_0x59877c[_0xe0bb9b]['wood'],_0x59877c[_0xe0bb9b]['capacity']);_0x59877c[_0xe0bb9b]['stone']=Math['min'](_0x59877c[_0xe0bb9b]['stone'],_0x59877c[_0xe0bb9b]['capacity']);_0x59877c[_0xe0bb9b]['iron']=Math['min'](_0x59877c[_0xe0bb9b]['iron'],_0x59877c[_0xe0bb9b]['capacity']);}_0x41b06e+=_0x59877c[_0xe0bb9b]['wood']/_0x59877c['length'];_0xe393b0+=_0x59877c[_0xe0bb9b]['stone']/_0x59877c['length'];_0x43a015+=_0x59877c[_0xe0bb9b]['iron']/_0x59877c['length'];_0x39d2bd+=_0x59877c[_0xe0bb9b]['wood'];_0x329c16+=_0x59877c[_0xe0bb9b]['stone'];_0x539f54+=_0x59877c[_0xe0bb9b]['iron'];}let _0x50a3e0=[];let _0x532fbd=[];let _0x5565d8=0x0,_0x5e01d9=0x0,_0x39d4b5=0x0;let _0x30fad5=0x0,_0x2fa589=0x0,_0x158d1a=0x0;for(let _0x1378b9=0x0;_0x1378b9<_0x36986d['length'];_0x1378b9++){let _0x7768e7=_0x36986d[_0x1378b9];let _0x13a41a=_0x29015f[_0x1378b9];let _0x49f7e3=0x0,_0xf61ad2=0x0,_0x1b2641=0x0;let _0x4e0610=0x0,_0x3f0873=0x0,_0x15bfc6=0x0;let _0x21cab4=0x0,_0x1e9beb=0x0,_0x509ecc=0x0;let _0x380ca7=0x0,_0x4c7808=0x0,_0x2dcc0f=0x0;let _0x4b7450=[],_0x49eb48=[];let _0x5a64a5=0x0,_0x199499=0x0,_0x1be2a6=0x0;for(let _0x2f8ce6=0x0;_0x2f8ce6<_0x7768e7['length'];_0x2f8ce6++){_0x49f7e3+=_0x7768e7[_0x2f8ce6]['wood']/_0x7768e7['length'];_0xf61ad2+=_0x7768e7[_0x2f8ce6]['stone']/_0x7768e7['length'];_0x1b2641+=_0x7768e7[_0x2f8ce6]['iron']/_0x7768e7['length'];_0x5a64a5+=_0x7768e7[_0x2f8ce6]['wood'];_0x199499+=_0x7768e7[_0x2f8ce6]['stone'];_0x1be2a6+=_0x7768e7[_0x2f8ce6]['iron'];}_0x4e0610=_0x49f7e3*_0xa2b1f5;_0x3f0873=_0xf61ad2*_0xa2b1f5;_0x15bfc6=_0x1b2641*_0xa2b1f5;for(let _0x262234=0x0;_0x262234<_0x7768e7['length'];_0x262234++){let _0x1f46b8=_0x7768e7[_0x262234]['coord'];let _0x13f259=_0x7768e7[_0x262234]['name'];let _0x57bd40=_0x7768e7[_0x262234]['id'];let _0x53bf92=_0x7768e7[_0x262234]['merchants'];_0x53bf92-=_0x179df1;let _0x432e83=_0x7768e7[_0x262234]['capacity']*0.95;let _0x47acb5=_0x53bf92*_0x231b7f;let _0x230010=_0x4e0610;let _0x1b20ec=_0x3f0873;let _0x2c5902=_0x15bfc6;if(_0x1ca80e['has'](_0x7768e7[_0x262234]['coord'])){let _0x2bc889=_0x1ca80e['get'](_0x7768e7[_0x262234]['coord']);_0x230010+=_0x2bc889['total_wood'];_0x1b20ec+=_0x2bc889['total_stone'];_0x2c5902+=_0x2bc889['total_iron'];_0x7768e7[_0x262234]['time_finished']=_0x2bc889['time_finished'];}else{_0x7768e7[_0x262234]['time_finished']=0x0;}let _0x2af636=_0x7768e7[_0x262234]['wood']-Math['round'](_0x230010);let _0x312bf3=_0x7768e7[_0x262234]['stone']-Math['round'](_0x1b20ec);let _0x43a450=_0x7768e7[_0x262234]['iron']-Math['round'](_0x2c5902);_0x2af636=_0x2af636<0x0?_0x2af636:_0x13a41a[_0x262234]['wood']-_0x2af636>0x0?_0x2af636:_0x13a41a[_0x262234]['wood'];_0x312bf3=_0x312bf3<0x0?_0x312bf3:_0x13a41a[_0x262234]['stone']-_0x312bf3>0x0?_0x312bf3:_0x13a41a[_0x262234]['stone'];_0x43a450=_0x43a450<0x0?_0x43a450:_0x13a41a[_0x262234]['iron']-_0x43a450>0x0?_0x43a450:_0x13a41a[_0x262234]['iron'];let _0x248e92=0x0;_0x248e92=_0x2af636>0x0?_0x248e92+_0x2af636:_0x248e92;_0x248e92=_0x312bf3>0x0?_0x248e92+_0x312bf3:_0x248e92;_0x248e92=_0x43a450>0x0?_0x248e92+_0x43a450:_0x248e92;let _0x57dde5=_0x47acb5<=_0x248e92?_0x47acb5/_0x248e92:0x1;let _0xfd0b4b=0x0,_0x3d9232=0x0,_0x26465b=0x0;let _0x340a37=0x0,_0x39bc7d=0x0,_0x1c50f2=0x0;_0xfd0b4b=_0x2af636>0x0?parseInt(_0x2af636*_0x57dde5):_0xfd0b4b;_0x3d9232=_0x312bf3>0x0?parseInt(_0x312bf3*_0x57dde5):_0x3d9232;_0x26465b=_0x43a450>0x0?parseInt(_0x43a450*_0x57dde5):_0x26465b;_0x340a37=_0x2af636>0x0?_0x340a37:_0x7768e7[_0x262234]['wood']+Math['abs'](_0x2af636)<_0x432e83?Math['abs'](_0x2af636):_0x432e83-_0x7768e7[_0x262234]['wood'];_0x39bc7d=_0x312bf3>0x0?_0x39bc7d:_0x7768e7[_0x262234]['stone']+Math['abs'](_0x312bf3)<_0x432e83?Math['abs'](_0x312bf3):_0x432e83-_0x7768e7[_0x262234]['stone'];_0x1c50f2=_0x43a450>0x0?_0x1c50f2:_0x7768e7[_0x262234]['iron']+Math['abs'](_0x43a450)<_0x432e83?Math['abs'](_0x43a450):_0x432e83-_0x7768e7[_0x262234]['iron'];_0x21cab4+=_0xfd0b4b;_0x1e9beb+=_0x3d9232;_0x509ecc+=_0x26465b;_0x380ca7+=_0x340a37;_0x4c7808+=_0x39bc7d;_0x2dcc0f+=_0x1c50f2;let _0x1058fa={'coord':_0x1f46b8,'id':_0x57bd40,'name':_0x13f259};let _0x3a6019={'coord':_0x1f46b8,'id':_0x57bd40,'name':_0x13f259};_0x1058fa['wood']=_0xfd0b4b>0x0?_0xfd0b4b:0x0;_0x1058fa['stone']=_0x3d9232>0x0?_0x3d9232:0x0;_0x1058fa['iron']=_0x26465b>0x0?_0x26465b:0x0;if(_0x1058fa['wood']>0x0||_0x1058fa['stone']>0x0||_0x1058fa['iron']>0x0)_0x4b7450['push'](_0x1058fa);_0x3a6019['wood']=_0x340a37>0x0?parseInt(_0x340a37):0x0;_0x3a6019['stone']=_0x39bc7d>0x0?parseInt(_0x39bc7d):0x0;_0x3a6019['iron']=_0x1c50f2>0x0?parseInt(_0x1c50f2):0x0;if(_0x3a6019['wood']>0x0||_0x3a6019['stone']>0x0||_0x3a6019['iron']>0x0)_0x49eb48['push'](_0x3a6019);}let _0x17496c=_0x380ca7>_0x21cab4?_0x21cab4/_0x380ca7:0x1;let _0x25b579=_0x4c7808>_0x1e9beb?_0x1e9beb/_0x4c7808:0x1;let _0x599650=_0x2dcc0f>_0x509ecc?_0x509ecc/_0x2dcc0f:0x1;for(let _0x54b14a=0x0;_0x54b14a<_0x49eb48['length'];_0x54b14a++){_0x49eb48[_0x54b14a]['wood']=parseInt(_0x49eb48[_0x54b14a]['wood']*_0x17496c);_0x49eb48[_0x54b14a]['stone']=parseInt(_0x49eb48[_0x54b14a]['stone']*_0x25b579);_0x49eb48[_0x54b14a]['iron']=parseInt(_0x49eb48[_0x54b14a]['iron']*_0x599650);}let _0x351540=[];for(let _0x5f3c4a=0x0;_0x5f3c4a<_0x49eb48['length'];_0x5f3c4a++){let _0x40447a=_0x49eb48[_0x5f3c4a]['coord'];let _0xe38ea0=_0x49eb48[_0x5f3c4a]['id'];let _0x2cd19d=_0x49eb48[_0x5f3c4a]['name'];let _0x1e923b=0x0;for(let _0x4c65d2=0x0;_0x4c65d2<_0x4b7450['length'];_0x4c65d2++){let _0xcddc9=_0x1a69f2(_0x49eb48[_0x5f3c4a]['coord'],_0x4b7450[_0x4c65d2]['coord']);_0x4b7450[_0x4c65d2]['distance']=_0xcddc9;_0x1e923b=_0x1e923b>_0xcddc9?_0x1e923b:_0xcddc9;}_0x4b7450['sort']((_0x4fe3fc,_0x570239)=>{return _0x4fe3fc['distance']>_0x570239['distance']?0x1:_0x4fe3fc['distance']<_0x570239['distance']?-0x1:0x0;});let _0x2653bd={'wood':0x0,'stone':0x0,'iron':0x0};for(let _0x3a9486=0x0;_0x3a9486<_0x4b7450['length'];_0x3a9486++){let _0x2de005=_0x4b7450[_0x3a9486]['coord'];let _0x491087=_0x4b7450[_0x3a9486]['id'];let _0x396cd3=_0x4b7450[_0x3a9486]['name'];let _0x46e345=_0x4b7450[_0x3a9486]['wood']>0x0?Math['min'](_0x49eb48[_0x5f3c4a]['wood'],_0x4b7450[_0x3a9486]['wood']):0x0;let _0x36f24b=_0x4b7450[_0x3a9486]['stone']>0x0?Math['min'](_0x49eb48[_0x5f3c4a]['stone'],_0x4b7450[_0x3a9486]['stone']):0x0;let _0x378062=_0x4b7450[_0x3a9486]['iron']>0x0?Math['min'](_0x49eb48[_0x5f3c4a]['iron'],_0x4b7450[_0x3a9486]['iron']):0x0;_0x2653bd['wood']+=_0x46e345;_0x2653bd['stone']+=_0x36f24b;_0x2653bd['iron']+=_0x378062;_0x49eb48[_0x5f3c4a]['wood']-=_0x46e345;_0x49eb48[_0x5f3c4a]['stone']-=_0x36f24b;_0x49eb48[_0x5f3c4a]['iron']-=_0x378062;_0x4b7450[_0x3a9486]['wood']-=_0x46e345;_0x4b7450[_0x3a9486]['stone']-=_0x36f24b;_0x4b7450[_0x3a9486]['iron']-=_0x378062;let _0x235151=_0x46e345+_0x36f24b+_0x378062;let _0x39d4c8=_0x235151%_0x231b7f;let _0x3308e4=_0x231b7f==0x3e8?0x2bc:0x4b0;if(_0x39d4c8<_0x3308e4){if(_0x46e345>_0x39d4c8){_0x46e345-=_0x39d4c8;_0x235151-=_0x39d4c8;}else if(_0x36f24b>_0x39d4c8){_0x36f24b-=_0x39d4c8;_0x235151-=_0x39d4c8;}else if(_0x378062>_0x39d4c8){_0x378062-=_0x39d4c8;_0x235151-=_0x39d4c8;}}_0x351540['push'](_0x4b7450[_0x3a9486]['distance']);if(_0x235151>=_0x3308e4)_0x50a3e0['push']({'total_send':_0x235151,'wood':_0x46e345,'stone':_0x36f24b,'iron':_0x378062,'coord_origin':_0x2de005,'name_origin':_0x396cd3,'id_destination':_0xe38ea0,'id_origin':_0x491087,'coord_destination':_0x40447a,'name_destination':_0x2cd19d,'distance':_0x4b7450[_0x3a9486]['distance']});let _0x3e30a1=_0x49eb48[_0x5f3c4a]['wood']+_0x49eb48[_0x5f3c4a]['stone']+_0x49eb48[_0x5f3c4a]['iron'];if(_0x3e30a1<_0x3308e4){break;}}}_0x5565d8+=_0x21cab4;_0x5e01d9+=_0x1e9beb;_0x39d4b5+=_0x509ecc;_0x30fad5+=_0x380ca7;_0x2fa589+=_0x4c7808;_0x158d1a+=_0x2dcc0f;let _0x4ccca5=0x0;for(let _0xfbfa8a=0x0;_0xfbfa8a<_0x351540['length'];_0xfbfa8a++){if(_0x4ccca5<_0x351540[_0xfbfa8a])_0x4ccca5=_0x351540[_0xfbfa8a];}_0x532fbd['push']({'nr_coords':_0x250f41[_0x1378b9]['data']['length'],'center':parseInt(_0x250f41[_0x1378b9]['mean'][0x0])+'|'+parseInt(_0x250f41[_0x1378b9]['mean'][0x1]),'max_distance':_0x4ccca5,'avg_wood':Math['round'](_0x49f7e3),'avg_stone':Math['round'](_0xf61ad2),'avg_iron':Math['round'](_0x1b2641),'total_wood_send':_0x21cab4,'total_stone_send':_0x1e9beb,'total_iron_send':_0x509ecc,'total_wood_get':_0x380ca7,'total_stone_get':_0x4c7808,'total_iron_get':_0x2dcc0f,'total_wood_cluster':_0x5a64a5,'total_stone_cluster':_0x199499,'total_iron_cluster':_0x1be2a6});}_0x532fbd['sort']((_0x11215a,_0x4d7de6)=>{return _0x11215a['max_distance']>_0x4d7de6['max_distance']?-0x1:_0x11215a['max_distance']<_0x4d7de6['max_distance']?0x1:0x0;});let _0x376ba2=new Map();for(let _0xcec112=0x0;_0xcec112<_0x50a3e0['length'];_0xcec112++){let _0x2f1eb5=_0x50a3e0[_0xcec112]['wood']+_0x50a3e0[_0xcec112]['stone']+_0x50a3e0[_0xcec112]['iron'];_0x2f1eb5=Math['ceil'](_0x2f1eb5/_0x231b7f);if(_0x376ba2['has'](_0x50a3e0[_0xcec112]['coord_origin'])){let _0x147865=_0x376ba2['get'](_0x50a3e0[_0xcec112]['coord_origin']);_0x376ba2['set'](_0x50a3e0[_0xcec112]['coord_origin'],_0x2f1eb5+_0x147865);}else{_0x376ba2['set'](_0x50a3e0[_0xcec112]['coord_origin'],_0x2f1eb5);}}for(let _0x2c918a=0x0;_0x2c918a<_0x59877c['length'];_0x2c918a++){let _0x1a9442=0x0;if(_0x376ba2['get'](_0x59877c[_0x2c918a]['coord']))_0x1a9442=_0x376ba2['get'](_0x59877c[_0x2c918a]['coord']);_0x59877c[_0x2c918a]['merchantAvailable']=_0x59877c[_0x2c918a]['merchants']-_0x1a9442;}let _0x1e63c2={};_0x1e63c2['avg_wood']=Math['round'](_0x41b06e);_0x1e63c2['avg_stone']=Math['round'](_0xe393b0);_0x1e63c2['avg_iron']=Math['round'](_0x43a015);_0x1e63c2['total_wood_send']=Math['round'](_0x5565d8);_0x1e63c2['total_stone_send']=Math['round'](_0x5e01d9);_0x1e63c2['total_iron_send']=Math['round'](_0x39d4b5);_0x1e63c2['total_wood_get']=Math['round'](_0x30fad5);_0x1e63c2['total_stone_get']=Math['round'](_0x2fa589);_0x1e63c2['total_iron_get']=Math['round'](_0x158d1a);_0x1e63c2['total_wood_home']=Math['round'](_0x39d2bd);_0x1e63c2['total_stone_home']=Math['round'](_0x329c16);_0x1e63c2['total_iron_home']=Math['round'](_0x539f54);for(let _0x48f905=0x0;_0x48f905<_0x59877c['length'];_0x48f905++){for(let _0x3fd794=0x0;_0x3fd794<_0x50a3e0['length'];_0x3fd794++){if(_0x59877c[_0x48f905]['coord']==_0x50a3e0[_0x3fd794]['coord_destination']){_0x59877c[_0x48f905]['wood']+=_0x50a3e0[_0x3fd794]['wood'];_0x59877c[_0x48f905]['stone']+=_0x50a3e0[_0x3fd794]['stone'];_0x59877c[_0x48f905]['iron']+=_0x50a3e0[_0x3fd794]['iron'];}else if(_0x59877c[_0x48f905]['coord']==_0x50a3e0[_0x3fd794]['coord_origin']){_0x59877c[_0x48f905]['wood']-=_0x50a3e0[_0x3fd794]['wood'];_0x59877c[_0x48f905]['stone']-=_0x50a3e0[_0x3fd794]['stone'];_0x59877c[_0x48f905]['iron']-=_0x50a3e0[_0x3fd794]['iron'];}_0x59877c[_0x48f905]['result_wood']=_0x59877c[_0x48f905]['wood']-Math['round'](_0x41b06e);_0x59877c[_0x48f905]['result_stone']=_0x59877c[_0x48f905]['stone']-Math['round'](_0xe393b0);_0x59877c[_0x48f905]['result_iron']=_0x59877c[_0x48f905]['iron']-Math['round'](_0x43a015);_0x59877c[_0x48f905]['result_total']=_0x59877c[_0x48f905]['result_wood']+_0x59877c[_0x48f905]['result_stone']+_0x59877c[_0x48f905]['result_iron'];}}_0x59877c['sort']((_0x29e2b2,_0x3e6526)=>{return _0x29e2b2['result_total']>_0x3e6526['result_total']?0x1:_0x29e2b2['result_total']<_0x3e6526['result_total']?-0x1:0x0;});let _0x42489e=new Map();for(let _0x57db4a=0x0;_0x57db4a<_0x50a3e0['length'];_0x57db4a++){let _0x1189cc=_0x50a3e0[_0x57db4a]['id_destination'];let _0x431c1b=_0x50a3e0[_0x57db4a]['id_origin'];let _0x581e8a='resource['+_0x431c1b+'][wood]';let _0x3841ac='resource['+_0x431c1b+'][stone]';let _0x186060='resource['+_0x431c1b+'][iron]';let _0x362b45={};if(_0x42489e['has'](_0x1189cc)){let _0x374b56=_0x42489e['get'](_0x1189cc);_0x374b56['send_resources'][_0x581e8a]=_0x50a3e0[_0x57db4a]['wood'];_0x374b56['send_resources'][_0x3841ac]=_0x50a3e0[_0x57db4a]['stone'];_0x374b56['send_resources'][_0x186060]=_0x50a3e0[_0x57db4a]['iron'];_0x374b56['total_send']+=_0x50a3e0[_0x57db4a]['total_send'];_0x374b56['total_wood']+=_0x50a3e0[_0x57db4a]['wood'];_0x374b56['total_stone']+=_0x50a3e0[_0x57db4a]['stone'];_0x374b56['total_iron']+=_0x50a3e0[_0x57db4a]['iron'];_0x374b56['distance']=Math['max'](_0x374b56['distance'],_0x50a3e0[_0x57db4a]['distance']);_0x42489e['set'](_0x1189cc,_0x374b56);}else{_0x362b45[_0x581e8a]=_0x50a3e0[_0x57db4a]['wood'];_0x362b45[_0x3841ac]=_0x50a3e0[_0x57db4a]['stone'];_0x362b45[_0x186060]=_0x50a3e0[_0x57db4a]['iron'];_0x42489e['set'](_0x1189cc,{'target_id':_0x1189cc,'coord_destination':_0x50a3e0[_0x57db4a]['coord_destination'],'name_destination':_0x50a3e0[_0x57db4a]['name_destination'],'send_resources':_0x362b45,'total_send':_0x50a3e0[_0x57db4a]['total_send'],'total_wood':_0x50a3e0[_0x57db4a]['wood'],'total_stone':_0x50a3e0[_0x57db4a]['stone'],'total_iron':_0x50a3e0[_0x57db4a]['iron'],'distance':_0x50a3e0[_0x57db4a]['distance']});}if(_0x389a96['has'](_0x1189cc)){let _0x3e3c3e=_0x389a96['get'](_0x1189cc);_0x3e3c3e['total_resources_get']+=_0x50a3e0[_0x57db4a]['wood']+_0x50a3e0[_0x57db4a]['stone']+_0x50a3e0[_0x57db4a]['iron'];_0x389a96['set'](_0x1189cc,_0x3e3c3e);}if(_0x389a96['has'](_0x431c1b)){let _0x4573fe=_0x389a96['get'](_0x431c1b);_0x4573fe['total_resources_send']+=_0x50a3e0[_0x57db4a]['wood']+_0x50a3e0[_0x57db4a]['stone']+_0x50a3e0[_0x57db4a]['iron'];_0x389a96['set'](_0x431c1b,_0x4573fe);}}let _0x44f973=Array['from'](_0x42489e['entries']())['map'](_0x54c70f=>_0x54c70f[0x1]);_0x44f973['sort']((_0xb0649,_0x15c6d4)=>{return _0xb0649['total_send']>_0x15c6d4['total_send']?-0x1:_0xb0649['total_send']<_0x15c6d4['total_send']?0x1:0x0;});let _0x87f86a=new Date()['getTime']();_0x4d2961();_0x39867f();$('#div_tables')['show']();_0x4087d8(_0x44f973,_0x1e63c2,_0x59877c,_0x532fbd);ScriptAPI['_0x238899']['_0x238794'](!void 0x0);$('#_0x238897\x20#stop')['prop']('disabled',![]);if(typeof TWMap!='undefined'){$('#map_container')['remove']();TWMap['mapHandler']['spawnSector']=_0x11abe9;let _0x1fb4ed=[];for(let _0x154ef8=0x0;_0x154ef8<_0x250f41['length'];_0x154ef8++){let _0x143777=0.2;let _0x44aa3d=_0x4b8eef(_0x143777);_0x1fb4ed['push'](_0x44aa3d);}_0x398f8b(_0x389a96,_0x1fb4ed);TWMap['init']();}};function _0x281e38(){return new Promise((_0x2f7353,_0x10125e)=>{let _0x5f1dc1=game_data['link_base_pure']+'overview_villages&mode=prod';let _0x33fe8c=_0x2d4a43(_0x5f1dc1);const _0x655f0f=new DOMParser();const _0x24f22e=_0x655f0f['parseFromString'](_0x33fe8c,'text/html');let _0x50dad8=[];if($(_0x24f22e)['find']('.paged-nav-item')['parent']()['find']('select')['length']>0x0){Array['from']($(_0x24f22e)['find']('.paged-nav-item')['parent']()['find']('select')['find']('option'))['forEach'](function(_0x40a9d3){_0x50dad8['push'](_0x40a9d3['value']);});_0x50dad8['pop']();}else if(_0x24f22e['getElementsByClassName']('paged-nav-item')['length']>0x0){let _0x550dd7=0x0;Array['from'](_0x24f22e['getElementsByClassName']('paged-nav-item'))['forEach'](function(_0x123d98){let _0xb0faa2=_0x123d98['href'];_0xb0faa2=_0xb0faa2['split']('page=')[0x0]+'page='+_0x550dd7;_0x550dd7++;_0x50dad8['push'](_0xb0faa2);});}else{_0x50dad8['push'](_0x5f1dc1);}_0x50dad8=_0x50dad8['reverse']();let _0x424501=[];let _0x13ee4b=new Map();function _0x5c561a(_0x2f4076){let _0x168fb7;if(_0x2f4076['length']>0x0){_0x168fb7=_0x2f4076['pop']();}else{_0x168fb7='stop';}let _0x2261eb=new Date()['getTime']();if(_0x2f4076['length']>=0x0&&_0x168fb7!='stop'){$['ajax']({'url':_0x168fb7,'method':'get','success':_0x5d1987=>{const _0x1878ba=new DOMParser();const _0x30bd21=_0x1878ba['parseFromString'](_0x5d1987,'text/html');if(game_data['device']=='desktop'){let _0x395ae4=Array['from']($(_0x30bd21)['find']('.row_a,\x20.row_b'));for(let _0xde1e13=0x0;_0xde1e13<_0x395ae4['length'];_0xde1e13++){let _0x2990b7=_0x395ae4[_0xde1e13]['getElementsByClassName']('quickedit-vn')[0x0]['innerText'];let _0x35d965=_0x395ae4[_0xde1e13]['getElementsByClassName']('quickedit-vn')[0x0]['innerText']['match'](/[0-9]{3}\|[0-9]{3}/)[0x0];let _0x460fbe=_0x395ae4[_0xde1e13]['getElementsByClassName']('quickedit-vn')[0x0]['getAttribute']('data-id');let _0x119cbe=parseInt(_0x395ae4[_0xde1e13]['getElementsByClassName']('wood')[0x0]['innerText']['replace']('.',''));let _0x99b4af=parseInt(_0x395ae4[_0xde1e13]['getElementsByClassName']('stone')[0x0]['innerText']['replace']('.',''));let _0x27e0c4=parseInt(_0x395ae4[_0xde1e13]['getElementsByClassName']('iron')[0x0]['innerText']['replace']('.',''));let _0x4be59c=parseInt(_0x395ae4[_0xde1e13]['querySelector']('a[href*=\x27market\x27]')['innerText']['split']('/')[0x0]);let _0x1eabd2=parseInt(_0x395ae4[_0xde1e13]['querySelector']('a[href*=\x27market\x27]')['innerText']['split']('/')[0x1]);let _0x18a6db=parseInt(_0x395ae4[_0xde1e13]['children'][0x4]['innerText']);let _0xe2f0d3=parseInt(_0x395ae4[_0xde1e13]['children'][0x2]['innerText']['replace']('.',''));let _0xde73cc=parseInt(_0x395ae4[_0xde1e13]['children'][0x6]['innerText']['split']('/')[0x0]);let _0x5b2683=parseInt(_0x395ae4[_0xde1e13]['children'][0x6]['innerText']['split']('/')[0x1]);let _0x54a487=_0xde73cc/_0x5b2683;let _0x56b8a8={'coord':_0x35d965,'id':_0x460fbe,'wood':_0x119cbe,'stone':_0x99b4af,'iron':_0x27e0c4,'name':_0x2990b7,'merchants':_0x4be59c,'merchants_total':_0x1eabd2,'capacity':_0x18a6db,'points':_0xe2f0d3};_0x424501['push'](_0x56b8a8);_0x13ee4b['set'](_0x35d965,_0x54a487);}}else{let _0x5b7e5f=Array['from']($(_0x30bd21)['find']('#production_table')['find']('.nowrap'));for(let _0x4935a3=0x0;_0x4935a3<_0x5b7e5f['length'];_0x4935a3++){let _0x2c6258=_0x5b7e5f[_0x4935a3]['previousElementSibling']['children'][0x0]['innerText']['trim']();let _0x1f4e34=_0x5b7e5f[_0x4935a3]['previousElementSibling']['children'][0x0]['innerText']['match'](/\d+\|\d+/)[0x0];let _0x4f92e8=_0x5b7e5f[_0x4935a3]['previousElementSibling']['getElementsByClassName']('quickedit-vn')[0x0]['getAttribute']('data-id');let _0x256a7d=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('mwood')[0x0]['innerText']['replace']('.',''));let _0x519123=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('mstone')[0x0]['innerText']['replace']('.',''));let _0x224489=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('miron')[0x0]['innerText']['replace']('.',''));let _0x2c53c4=parseInt(_0x5b7e5f[_0x4935a3]['querySelector']('a[href*=\x27market\x27]')['innerText']);let _0x282189=0x1f4;let _0x5c4b4f=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('ressources')[0x0]['parentElement']['innerText']);let _0x1d3af5=parseInt(_0x5b7e5f[_0x4935a3]['previousElementSibling']['children'][0x1]['innerText']['replace']('.',''));let _0x3bf9e7=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('population')[0x0]['parentElement']['innerText']['split']('/')[0x0]);let _0x5f4b29=parseInt(_0x5b7e5f[_0x4935a3]['getElementsByClassName']('population')[0x0]['parentElement']['innerText']['split']('/')[0x1]);let _0x2bd8d1=_0x3bf9e7/_0x5f4b29;let _0x3c450d={'coord':_0x1f4e34,'id':_0x4f92e8,'wood':_0x256a7d,'stone':_0x519123,'iron':_0x224489,'name':_0x2c6258,'merchants':_0x2c53c4,'merchants_total':_0x282189,'capacity':_0x5c4b4f,'points':_0x1d3af5};_0x424501['push'](_0x3c450d);_0x13ee4b['set'](_0x1f4e34,_0x2bd8d1);}}let _0x2e6078=new Date()['getTime']();let _0x26d054=_0x2e6078-_0x2261eb;window['setTimeout'](function(){_0x5c561a(_0x50dad8);},0xc8-_0x26d054);},'error':_0x432b5d=>{_0x10125e(_0x432b5d);}});}else{_0x2f7353({'list_production':_0x424501,'map_farm_usage':_0x13ee4b});}}_0x5c561a(_0x50dad8);});}function _0x3795ab(){return new Promise((_0x32b179,_0x1ef64e)=>{let _0x139b06=game_data['link_base_pure']+'overview_villages&mode=trader&type=inc';let _0x20f84a=_0x2d4a43(_0x139b06);const _0xa0cffe=new DOMParser();const _0x57573b=_0xa0cffe['parseFromString'](_0x20f84a,'text/html');let _0x5bcfc1=[];if($(_0x57573b)['find']('.paged-nav-item')['parent']()['find']('select')['length']>0x0){Array['from']($(_0x57573b)['find']('.paged-nav-item')['parent']()['find']('select')['find']('option'))['forEach'](function(_0x2b93a8){_0x5bcfc1['push'](_0x2b93a8['value']);});_0x5bcfc1['pop']();}else if(_0x57573b['getElementsByClassName']('paged-nav-item')['length']>0x0){let _0x540ddd=0x0;Array['from'](_0x57573b['getElementsByClassName']('paged-nav-item'))['forEach'](function(_0x4fdb7a){let _0x2b63c7=_0x4fdb7a['href'];_0x2b63c7=_0x2b63c7['split']('page=')[0x0]+'page='+_0x540ddd;_0x540ddd++;_0x5bcfc1['push'](_0x2b63c7);});}else{_0x5bcfc1['push'](_0x139b06);}_0x5bcfc1=_0x5bcfc1['reverse']();let _0x557237=new Map();function _0x2c0942(_0x3ecaa2){let _0xff5d4d;if(_0x3ecaa2['length']>0x0){_0xff5d4d=_0x3ecaa2['pop']();}else{_0xff5d4d='stop';}let _0x1a8954=new Date()['getTime']();if(_0x3ecaa2['length']>=0x0&&_0xff5d4d!='stop'){$['ajax']({'url':_0xff5d4d,'method':'get','success':_0x59f464=>{const _0x47f9d6=new DOMParser();const _0x314beb=_0x47f9d6['parseFromString'](_0x59f464,'text/html');let _0x34b7f3=Array['from']($(_0x314beb)['find']('.row_a,\x20.row_b'));for(let _0x50f1a6=0x0;_0x50f1a6<_0x34b7f3['length'];_0x50f1a6++){let _0x3c3290='';if(game_data['device']=='desktop'){_0x3c3290=_0x34b7f3[_0x50f1a6]['children'][0x4]['innerText']['match'](/[0-9]{3}\|[0-9]{3}/)[0x0];}else{_0x3c3290=_0x34b7f3[_0x50f1a6]['children'][0x3]['innerText']['match'](/[0-9]{3}\|[0-9]{3}/g)[0x1];}let _0x43a7da=parseInt($(_0x34b7f3[_0x50f1a6])['find']('.wood')['parent']()['text']()['replace']('.',''));let _0x1e7ea9=parseInt($(_0x34b7f3[_0x50f1a6])['find']('.stone')['parent']()['text']()['replace']('.',''));let _0x1a3f5=parseInt($(_0x34b7f3[_0x50f1a6])['find']('.iron')['parent']()['text']()['replace']('.',''));_0x43a7da=Number['isNaN'](_0x43a7da)==!![]?0x0:_0x43a7da;_0x1e7ea9=Number['isNaN'](_0x1e7ea9)==!![]?0x0:_0x1e7ea9;_0x1a3f5=Number['isNaN'](_0x1a3f5)==!![]?0x0:_0x1a3f5;let _0x2ae5b1={'wood':_0x43a7da,'stone':_0x1e7ea9,'iron':_0x1a3f5};if(_0x557237['has'](_0x3c3290)){let _0x1b587d=_0x557237['get'](_0x3c3290);_0x1b587d['wood']+=_0x43a7da;_0x1b587d['stone']+=_0x1e7ea9;_0x1b587d['iron']+=_0x1a3f5;_0x557237['set'](_0x3c3290,_0x1b587d);}else{_0x557237['set'](_0x3c3290,_0x2ae5b1);}}let _0x56f72a=new Date()['getTime']();let _0x49888e=_0x56f72a-_0x1a8954;window['setTimeout'](function(){_0x2c0942(_0x5bcfc1);},0xc8-_0x49888e);},'error':_0x2e8daf=>{_0x1ef64e(_0x2e8daf);}});}else{_0x32b179(_0x557237);}}_0x2c0942(_0x5bcfc1);});}function _0x2d4a43(_0x1ed61a){var _0x4c9399=new XMLHttpRequest();_0x4c9399['open']('GET',_0x1ed61a,![]);_0x4c9399['send'](null);return _0x4c9399['responseText'];}function _0x1a69f2(_0x2cbbe0,_0x2a75ec){let _0x3742c0=parseInt(_0x2cbbe0['split']('|')[0x0]);let _0x271c23=parseInt(_0x2cbbe0['split']('|')[0x1]);let _0x38d316=parseInt(_0x2a75ec['split']('|')[0x0]);let _0x45f22a=parseInt(_0x2a75ec['split']('|')[0x1]);return Math['sqrt']((_0x3742c0-_0x38d316)*(_0x3742c0-_0x38d316)+(_0x271c23-_0x45f22a)*(_0x271c23-_0x45f22a));}async function _0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6){let _0x3b8918='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20\x20class=\x22scriptTableAlternate\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:3%\x22>nr</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:35%\x22>target</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><a\x20href=\x22#\x22\x20id=\x22sort_distance\x22><font\x20color=\x22'+_0x4afef4+'\x22>max\x20distance</font></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><a\x20href=\x22#\x22\x20id=\x22sort_total\x22><font\x20color=\x22'+_0x4afef4+'\x22>total\x20send</font></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22><a\x20href=\x22#\x22\x20id=\x22sort_wood\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/wood.png\x22/></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22><a\x20href=\x22#\x22\x20id=\x22sort_stone\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/stone.png\x22/></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22><a\x20href=\x22#\x22\x20id=\x22sort_iron\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/iron.png\x22/></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>send</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>';for(let _0x3765b4=0x0;_0x3765b4<_0x50600e['length'];_0x3765b4++){let _0x2376ed=_0x50600e[_0x3765b4]['target_id'];let _0x41828b=_0x50600e[_0x3765b4]['total_wood'];let _0x4f23c5=_0x50600e[_0x3765b4]['total_stone'];let _0x2824a9=_0x50600e[_0x3765b4]['total_iron'];let _0x962231=_0x50600e[_0x3765b4]['id_origin'];let _0xd1554=JSON['stringify'](_0x50600e[_0x3765b4]['send_resources']);_0x3b8918+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20id=\x22delete_row\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3765b4+0x1)+'</td>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><a\x20href=\x22'+game_data['link_base_pure']+'info_village&id='+_0x50600e[_0x3765b4]['target_id']+'\x22><font\x20color=\x22'+_0x4afef4+'\x22>'+_0x50600e[_0x3765b4]['name_destination']+'</font></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50600e[_0x3765b4]['distance']['toFixed'](0x1)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x50600e[_0x3765b4]['total_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22>'+_0x32f283(_0x41828b)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22>'+_0x32f283(_0x4f23c5)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22hide_mobile\x22>'+_0x32f283(_0x2824a9)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x20btn_send\x22\x20target_id=\x22'+_0x2376ed+'\x22\x20data=\x27'+_0xd1554+'\x27\x20\x20type=\x22button\x22\x20value=\x22send\x22></td>\x0a\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>';}_0x3b8918+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20</table>';document['getElementById']('table_view')['innerHTML']=_0x3b8918;if(game_data['device']!='desktop')$('.hide_mobile')['hide']();$('.btn_send')['on']('click',async _0x2ced71=>{if($(_0x2ced71['target'])['is'](':disabled')==![]){let _0x1da7bb=$(_0x2ced71['target'])['attr']('target_id');let _0x2726dc=JSON['parse']($(_0x2ced71['target'])['attr']('data'));$('.btn_send')['attr']('disabled',!![]);let _0x5cf71f=new Date()['getTime']();_0x5babff(_0x1da7bb,_0x2726dc);let _0x429065=new Date()['getTime']();let _0x4b0a3c=_0x429065-_0x5cf71f;window['setTimeout'](()=>{$(_0x2ced71['target'])['closest']('#delete_row')['remove']();$('.btn_send')['attr']('disabled',![]);},0xc8-_0x4b0a3c);}});let _0x222f36='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<table\x20id=\x22table_stats\x22\x20class=\x22scriptTable\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20id=\x22btn_result\x22\x20type=\x22button\x22\x20value=\x22results\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><input\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20id=\x22btn_cluster\x22\x20type=\x22button\x22\x20value=\x22clusters\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/wood.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/stone.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/iron.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>total</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_wood_home'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_stone_home'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_iron_home'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>average</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['avg_wood'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['avg_stone'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['avg_iron'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>surplus</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_wood_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_stone_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_iron_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>deficit</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_wood_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_stone_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5b8561['total_iron_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x0a\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20';document['getElementById']('table_stats')['innerHTML']=_0x222f36;$('#btn_result')['on']('click',()=>{_0x552bd2(_0x141e06);});$('#btn_cluster')['on']('click',()=>{_0x246ec5(_0x3bfaa6);});document['getElementById']('sort_distance')['addEventListener']('click',()=>{_0x50600e['sort']((_0x4b3913,_0x2f3274)=>{return parseFloat(_0x4b3913['distance'])>parseFloat(_0x2f3274['distance'])?0x1:parseFloat(_0x4b3913['distance'])<parseFloat(_0x2f3274['distance'])?-0x1:0x0;});document['getElementById']('table_stats')['innerHTML']='';_0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6);});document['getElementById']('sort_total')['addEventListener']('click',()=>{_0x50600e['sort']((_0x15988e,_0x6cb5f1)=>{return _0x15988e['total_send']>_0x6cb5f1['total_send']?-0x1:_0x15988e['total_send']<_0x6cb5f1['total_send']?0x1:0x0;});document['getElementById']('table_view')['innerHTML']='';_0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6);});document['getElementById']('sort_wood')['addEventListener']('click',()=>{_0x50600e['sort']((_0x5d06db,_0x4653da)=>{return _0x5d06db['total_wood']>_0x4653da['total_wood']?-0x1:_0x5d06db['total_wood']<_0x4653da['total_wood']?0x1:0x0;});document['getElementById']('table_view')['innerHTML']='';_0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6);});document['getElementById']('sort_stone')['addEventListener']('click',()=>{_0x50600e['sort']((_0x10074c,_0x3b9670)=>{return _0x10074c['total_stone']>_0x3b9670['total_stone']?-0x1:_0x10074c['total_stone']<_0x3b9670['total_stone']?0x1:0x0;});document['getElementById']('table_view')['innerHTML']='';_0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6);});document['getElementById']('sort_iron')['addEventListener']('click',()=>{_0x50600e['sort']((_0x44d3d7,_0x3bef8e)=>{return _0x44d3d7['total_iron']>_0x3bef8e['total_iron']?-0x1:_0x44d3d7['total_iron']<_0x3bef8e['total_iron']?0x1:0x0;});document['getElementById']('table_view')['innerHTML']='';_0x4087d8(_0x50600e,_0x5b8561,_0x141e06,_0x3bfaa6);});if(document['getElementsByClassName']('btn_send')['length']>0x0){document['getElementsByClassName']('btn_send')[0x0]['focus']();}window['onkeydown']=function(_0xceff2){if(_0xceff2['which']==0xd){if(document['getElementsByClassName']('btn_send')['length']>0x0){document['getElementsByClassName']('btn_send')[0x0]['click']();}}};}function _0x32f283(_0x2add5c){return new Intl['NumberFormat']()['format'](_0x2add5c);}function _0x552bd2(_0x5c5b40){let _0x5cbc09='\x0a\x20\x20\x20\x20<center><div\x20id=\x22table_results\x22\x20style=\x22height:800px;width:800px;overflow:auto\x22>\x0a\x20\x20\x20\x20<table\x20id=\x22table_stats\x22\x20\x20class=\x22scriptTableBalancerResult\x22>\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>coord</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20><a\x20href=\x22#\x22\x20id=\x22order_points\x22><font\x20\x20color=\x22'+_0x4afef4+'\x22>points</font></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:10%\x22><a\x20href=\x22#\x22\x20id=\x22order_merchants\x22><font\x20\x20color=\x22'+_0x4afef4+'\x22>merchants</font></a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/main.png\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20id=\x22order_hours\x22><font\x20\x20color=\x22'+_0x4afef4+'\x22>[hours]</font></a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22order_deficit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center\x20style=\x22margin:10px\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/wood.png\x22/></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22order_deficit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center\x20style=\x22margin:10px\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/stone.png\x22/></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22order_deficit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center\x20style=\x22margin:10px\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/iron.png\x22/></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22#\x22\x20class=\x22order_wh\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center\x20style=\x22margin:10px\x22><img\x20src=\x22https://dsen.innogamescdn.com/asset/04d88c84/graphic/buildings/storage.png\x22/></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x0a\x20\x20\x20\x20</tr>';for(let _0x59a581=0x0;_0x59a581<_0x5c5b40['length'];_0x59a581++){let _0x37893f='#013e27',_0x1e73ba='#026440';let _0x15ccdb='#5f0000',_0x36a299='#9a0000';if(_0x59a581%0x2!=0x0){header_status_wood=parseInt(_0x5c5b40[_0x59a581]['result_wood'])>=0x0?_0x37893f:_0x15ccdb;header_status_stone=parseInt(_0x5c5b40[_0x59a581]['result_stone'])>=0x0?_0x37893f:_0x15ccdb;header_status_iron=parseInt(_0x5c5b40[_0x59a581]['result_iron'])>=0x0?_0x37893f:_0x15ccdb;}else{header_status_wood=parseInt(_0x5c5b40[_0x59a581]['result_wood'])>=0x0?_0x1e73ba:_0x36a299;header_status_stone=parseInt(_0x5c5b40[_0x59a581]['result_stone'])>=0x0?_0x1e73ba:_0x36a299;header_status_iron=parseInt(_0x5c5b40[_0x59a581]['result_iron'])>=0x0?_0x1e73ba:_0x36a299;}_0x5cbc09+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><a\x20href=\x22'+game_data['link_base_pure']+'info_village&id='+_0x5c5b40[_0x59a581]['id']+'\x22><font\x20color=\x22'+_0x4afef4+'\x22>'+_0x5c5b40[_0x59a581]['coord']+'</font></a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5c5b40[_0x59a581]['points'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><b>'+_0x5c5b40[_0x59a581]['merchantAvailable']+'</b>\x20/\x20'+_0x5c5b40[_0x59a581]['merchants_total']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(parseInt(_0x5c5b40[_0x59a581]['time_finished']*0xa)/0xa)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5c5b40[_0x59a581]['wood'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+header_status_wood+'\x22>'+_0x32f283(_0x5c5b40[_0x59a581]['result_wood'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5c5b40[_0x59a581]['stone'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+header_status_stone+'\x22>'+_0x32f283(_0x5c5b40[_0x59a581]['result_stone'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5c5b40[_0x59a581]['iron'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22background-color:'+header_status_iron+'\x22>'+_0x32f283(_0x5c5b40[_0x59a581]['result_iron'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x5c5b40[_0x59a581]['capacity'])+'</td>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}_0x5cbc09+='\x0a\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20</div></center>\x0a\x20\x20\x20\x20';Dialog['show']('content',_0x5cbc09);$('#order_points')['on']('click',()=>{_0x5c5b40['sort']((_0x47d967,_0x151e84)=>{return _0x47d967['points']>_0x151e84['points']?0x1:_0x47d967['points']<_0x151e84['points']?-0x1:0x0;});$('.popup_box_close')['click']();_0x552bd2(_0x5c5b40);});$('#order_merchants')['on']('click',()=>{_0x5c5b40['sort']((_0x467de7,_0x673dbc)=>{return _0x467de7['merchantAvailable']>_0x673dbc['merchantAvailable']?0x1:_0x467de7['merchantAvailable']<_0x673dbc['merchantAvailable']?-0x1:0x0;});$('.popup_box_close')['click']();_0x552bd2(_0x5c5b40);});$('#order_hours')['on']('click',()=>{_0x5c5b40['sort']((_0x5d581f,_0xf6a4ed)=>{return _0x5d581f['time_finished']>_0xf6a4ed['time_finished']?-0x1:_0x5d581f['time_finished']<_0xf6a4ed['time_finished']?0x1:0x0;});$('.popup_box_close')['click']();_0x552bd2(_0x5c5b40);});$('.order_deficit')['on']('click',()=>{_0x5c5b40['sort']((_0x4159c2,_0x172155)=>{return _0x4159c2['result_total']>_0x172155['result_total']?0x1:_0x4159c2['result_total']<_0x172155['result_total']?-0x1:0x0;});$('.popup_box_close')['click']();_0x552bd2(_0x5c5b40);});$('#order_wh')['on']('click',()=>{_0x5c5b40['sort']((_0x573b9d,_0x2c0386)=>{return _0x573b9d['capacity']>_0x2c0386['capacity']?0x1:_0x573b9d['capacity']<_0x2c0386['capacity']?-0x1:0x0;});$('.popup_box_close')['click']();_0x552bd2(_0x5c5b40);});}function _0x246ec5(_0x1d7b72){let _0x470e2a='\x0a\x20\x20\x20\x20<center><div\x20id=\x22table_results\x22\x20style=\x22height:800px;width:700px;overflow:auto\x22>\x0a\x20\x20\x20\x20<table\x20id=\x22table_stats\x22\x20class=\x22scriptTable\x22>\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:5%\x22>nr</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>coords/\x0acluster</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>center\x20of\x20cluster</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:50%\x22>resources</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>max\x20distance</td>\x20\x20\x20\x0a\x20\x20\x20\x20</tr>';for(let _0x28e6ab=0x0;_0x28e6ab<_0x1d7b72['length'];_0x28e6ab++){let _0x1a53af='#202825',_0x49daf1='#313e39';let _0x144caf=_0x28e6ab%0x2==0x0?_0x1a53af:_0x49daf1;_0x470e2a+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x28e6ab+0x1)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['nr_coords'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d7b72[_0x28e6ab]['center']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20id=\x22table_stats\x22\x20class=\x22scriptTableInner\x22\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>type</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/wood.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/stone.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><img\x20src=\x22https://dsen.innogamescdn.com/asset/c2e59f13/graphic/buildings/iron.png\x22/></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>total</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_wood_cluster'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_stone_cluster'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_iron_cluster'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>average</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['avg_wood'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['avg_stone'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['avg_iron'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>surplus</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_wood_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_stone_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_iron_send'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>deficit</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_wood_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_stone_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32f283(_0x1d7b72[_0x28e6ab]['total_iron_get'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d7b72[_0x28e6ab]['max_distance']['toFixed'](0x1)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}_0x470e2a+='\x0a\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20</div></center>\x0a\x20\x20\x20\x20';Dialog['show']('content',_0x470e2a);}function _0x5babff(_0x2da477,_0x347498){let _0x3cb760={'village':_0x2da477,'ajaxaction':'call','h':window['csrf_token']};TribalWars['post']('market',_0x3cb760,_0x347498,function(_0x1c5725){},function(_0x3359a5){});}async function _0x28671d(_0x13a135,_0x3a874a){let {map_construction_templates:_0xc6036d,map_coord_templates:_0x1fdee8}=await _0x517f88()['catch'](_0x419a91=>alert(_0x419a91));let _0x48438b=await _0x47710e()['catch'](_0x2a9350=>alert(_0x2a9350));let _0x188578=_0x3b3809();return new Promise((_0x5697a7,_0x25e95b)=>{if(_0x13a135==0x0)_0x5697a7(new Map());let _0x2c2d05=new Map();Array['from'](_0x48438b['keys']())['forEach'](_0x2c80d1=>{if(_0x2c80d1['includes']('_time_queued')){_0x2c2d05['set'](_0x2c80d1['replace']('_time_queued',''),{'total_wood':0x0,'total_stone':0x0,'total_iron':0x0,'time_finished':Math['round'](_0x48438b['get'](_0x2c80d1)/0xe10)});}});Array['from'](_0x1fdee8['keys']())['forEach'](_0x20cfdc=>{let _0x11c9ef=_0x20cfdc;let _0x22d5aa=_0x48438b['get'](_0x11c9ef+'_time_queued');let _0x20320d=_0x1fdee8['get'](_0x11c9ef);let _0x56c7b7=_0xc6036d['get'](_0x20320d);if(_0x48438b['get'](_0x11c9ef+'_farm')<0x1e&&_0x3a874a['get'](_0x11c9ef)>=0.99){let _0x156c0c=_0x48438b['get'](_0x11c9ef+'_main');let _0x2e9d31=_0x48438b['get'](_0x11c9ef+'_farm');let _0x362774=_0x188578['get']('farm');let _0x22b94e=_0xe8c3f0(_0x156c0c,_0x2e9d31,_0x362774);let _0xa4a026=_0x22b94e[0x0];let _0x1c74b0=_0x22b94e[0x1];let _0x3263f6=_0x22b94e[0x2];let _0x252399=_0x22b94e[0x3];_0x22d5aa+=_0xa4a026;_0x2c2d05['set'](_0x11c9ef,{'total_wood':_0x1c74b0,'total_stone':_0x3263f6,'total_iron':_0x252399,'time_finished':_0x22d5aa/0xe10});}for(let _0x537995=0x0;_0x537995<_0x56c7b7['length'];_0x537995++){let _0x42b79b=_0x56c7b7[_0x537995]['name'];let _0x25aa2e=_0x11c9ef+'_'+_0x42b79b;let _0x1f48a6=_0x56c7b7[_0x537995]['level_absolute'];let _0x38871d=_0x48438b['get'](_0x25aa2e);if(_0x1f48a6>_0x38871d){let _0x5ed957=_0x1f48a6-_0x38871d;for(let _0x34e979=0x0;_0x34e979<_0x5ed957;_0x34e979++){_0x38871d++;let _0x14587e=_0x48438b['get'](_0x11c9ef+'_main');let _0x5e38e4=_0x188578['get'](_0x42b79b);let _0x2b7ee7=_0xe8c3f0(_0x14587e,_0x38871d,_0x5e38e4);let _0xc72f14=_0x2b7ee7[0x0];let _0x3e89ef=_0x2b7ee7[0x1];let _0x53a01c=_0x2b7ee7[0x2];let _0x1c5162=_0x2b7ee7[0x3];_0x22d5aa+=_0xc72f14;if(_0x2c2d05['has'](_0x11c9ef)){let _0x4dfa9c=_0x2c2d05['get'](_0x11c9ef);_0x4dfa9c['total_wood']+=_0x3e89ef;_0x4dfa9c['total_stone']+=_0x53a01c;_0x4dfa9c['total_iron']+=_0x1c5162;_0x4dfa9c['time_finished']=_0x22d5aa/0xe10;_0x2c2d05['set'](_0x11c9ef,_0x4dfa9c);}else{_0x2c2d05['set'](_0x11c9ef,{'total_wood':_0x3e89ef,'total_stone':_0x53a01c,'total_iron':_0x1c5162,'time_finished':_0x22d5aa/0xe10});}_0x48438b['set'](_0x25aa2e,_0x38871d);if(_0x22d5aa>_0x13a135){break;}}}if(_0x22d5aa>_0x13a135){break;}}});_0x5697a7(_0x2c2d05);});}function _0x517f88(){return new Promise((_0x58291a,_0x1ca2c9)=>{if(game_data['features']['AccountManager']['active']==![]){_0x58291a({'map_coord_templates':new Map(),'map_construction_templates':new Map()});}let _0x5b3884=game_data['link_base_pure']+'am_village';let _0x2f06c9=_0x2d4a43(_0x5b3884);const _0x423542=new DOMParser();const _0x417106=_0x423542['parseFromString'](_0x2f06c9,'text/html');let _0x39508b=[];if($(_0x417106)['find']('#village_table')['prev']()['find']('select')['length']>0x0){Array['from']($(_0x417106)['find']('#village_table')['prev']()['find']('select')['get'](0x0))['forEach'](function(_0x183850){_0x39508b['push'](_0x183850['value']);});}else if($(_0x417106)['find']('#village_table')['prev']()['find']('.paged-nav-item')['length']>0x0){let _0xd05014=$(_0x417106)['find']('#village_table')['prev']()['find']('.paged-nav-item')['length'];for(let _0x573736=_0xd05014-0x2;_0x573736>=0x0;_0x573736--){let _0x34d432=game_data['link_base_pure']+('am_village&page='+_0x573736);_0x39508b['push'](_0x34d432);}}else{_0x39508b['push'](_0x5b3884);}_0x39508b=_0x39508b['reverse']();let _0xf5e54b=new Map();let _0x371da5=new Map();async function _0x3f812a(_0x20a3ec){let _0x1b66ac;if(_0x20a3ec['length']>0x0){_0x1b66ac=_0x20a3ec['pop']();}else{_0x1b66ac='stop';}let _0x3c546d=new Date()['getTime']();if(_0x20a3ec['length']>=0x0&&_0x1b66ac!='stop'){$['ajax']({'url':_0x1b66ac,'method':'get','success':_0x7c9bcf=>{const _0x291960=new DOMParser();const _0x31fabc=_0x291960['parseFromString'](_0x7c9bcf,'text/html');let _0x21dbc7=Array['from']($(_0x31fabc)['find']('.row_a,\x20.row_b'));for(let _0x1a5c24=0x0;_0x1a5c24<_0x21dbc7['length'];_0x1a5c24++){let _0x4c8ace=_0x21dbc7[_0x1a5c24]['children'][0x0]['innerText']['match'](/[0-9]{3}\|[0-9]{3}/)[0x0];let _0x2fb613=_0x21dbc7[_0x1a5c24]['children'][0x1]['innerText']['trim']();if(_0x2fb613!=''){_0xf5e54b['set'](_0x4c8ace,_0x2fb613);_0x371da5['set'](_0x2fb613,0x0);}}let _0x301b45=new Date()['getTime']();let _0x7213a9=_0x301b45-_0x3c546d;window['setTimeout'](function(){_0x3f812a(_0x39508b);},0xc8-_0x7213a9);},'error':_0x9e77b7=>{_0x1ca2c9(_0x9e77b7);}});}else{let _0x249c26=Array['from']($(_0x417106)['find']('select[name=template]')['eq'](0x0)['find']('option'));for(let _0x380ee7=0x0;_0x380ee7<_0x249c26['length'];_0x380ee7++){let _0x25f59c=game_data['link_base_pure']+('am_village&mode=queue&template='+_0x249c26[_0x380ee7]['value']);let _0x1cdae9;if(_0x380ee7<0x3)_0x1cdae9=_0x249c26[_0x380ee7]['innerText']['replaceAll']('\x0a','')['replaceAll']('\x09','')['replace'](/\(\w+\)/,'');else _0x1cdae9=_0x249c26[_0x380ee7]['innerText']['replaceAll']('\x0a','')['replaceAll']('\x09','');if(_0x371da5['has'](_0x1cdae9)){let _0x59bcd3=await _0x56b7f8(_0x25f59c);const _0x52f6a4=new DOMParser();const _0x2e8047=_0x52f6a4['parseFromString'](_0x59bcd3,'text/html');let _0x28ea47=[];Array['from']($(_0x2e8047)['find']('.sortable_row'))['forEach'](_0x1e955c=>{_0x28ea47['push']({'name':_0x1e955c['getAttribute']('data-building'),'level_relative':parseInt($(_0x1e955c)['find']('.level_relative')['text']()),'level_absolute':parseInt($(_0x1e955c)['find']('.level_absolute')['text']()['match'](/\d+/)[0x0])});});_0x371da5['set'](_0x1cdae9,_0x28ea47);}}_0x58291a({'map_coord_templates':_0xf5e54b,'map_construction_templates':_0x371da5});}}_0x3f812a(_0x39508b);});}function _0x56b7f8(_0x2a9000){return new Promise((_0x2b5d6a,_0x22d6fe)=>{let _0x2cf677=new Date()['getTime']();$['ajax']({'url':_0x2a9000,'method':'get','success':_0x93c3cc=>{let _0xe41b82=new Date()['getTime']();let _0x5748c6=_0xe41b82-_0x2cf677;window['setTimeout'](()=>{_0x2b5d6a(_0x93c3cc);},0xc8-_0x5748c6);},'error':_0x3e24ab=>{_0x22d6fe(_0x3e24ab);}});});}function _0x47710e(){return new Promise((_0x467223,_0xa202a)=>{let _0xc8278d=game_data['link_base_pure']+'overview_villages&mode=buildings';let _0x4b09f2=_0x2d4a43(_0xc8278d);const _0x259fbe=new DOMParser();const _0x2e85f4=_0x259fbe['parseFromString'](_0x4b09f2,'text/html');let _0x3fe1c9=[];if($(_0x2e85f4)['find']('.paged-nav-item')['parent']()['find']('select')['length']>0x0){Array['from']($(_0x2e85f4)['find']('.paged-nav-item')['parent']()['find']('select')['find']('option'))['forEach'](function(_0x5bdffa){_0x3fe1c9['push'](_0x5bdffa['value']);});_0x3fe1c9['pop']();}else if(_0x2e85f4['getElementsByClassName']('paged-nav-item')['length']>0x0){let _0x245e12=0x0;Array['from'](_0x2e85f4['getElementsByClassName']('paged-nav-item'))['forEach'](function(_0x1c8cdf){let _0x4dfdac=_0x1c8cdf['href'];_0x4dfdac=_0x4dfdac['split']('page=')[0x0]+'page='+_0x245e12;_0x245e12++;_0x3fe1c9['push'](_0x4dfdac);});}else{_0x3fe1c9['push'](_0xc8278d);}_0x3fe1c9=_0x3fe1c9;let _0x4319fa=new Map();function _0x5bfe05(_0x10a5df){let _0x123e3c;if(_0x10a5df['length']>0x0){_0x123e3c=_0x10a5df['pop']();}else{_0x123e3c='stop';}let _0x5c298d=new Date()['getTime']();if(_0x10a5df['length']>=0x0&&_0x123e3c!='stop'){$['ajax']({'url':_0x123e3c,'method':'get','success':_0x5cc7af=>{const _0xb82c37=new DOMParser();const _0x4fbd6d=_0xb82c37['parseFromString'](_0x5cc7af,'text/html');if(game_data['device']=='desktop'){let _0x40b99d=Array['from']($(_0x4fbd6d)['find']('.row_a,\x20.row_b'));for(let _0x31e24c=0x0;_0x31e24c<_0x40b99d['length'];_0x31e24c++){let _0x3ec8e3=$(_0x40b99d[_0x31e24c])['find']('.nowrap')['text']()['match'](/[0-9]{3}\|[0-9]{3}/)[0x0];let _0x275075=$(_0x40b99d[_0x31e24c])['find']('.queue_icon\x20img')['last']()['attr']('title');if(_0x275075==undefined){_0x275075=0x0;}else{_0x275075=_0x275075['split']('-')[0x1];_0x275075=_0x13eba1(_0x275075);}_0x4319fa['set'](_0x3ec8e3+'_time_queued',_0x275075);let _0x33fa27=$(_0x40b99d[_0x31e24c])['find']('.upgrade_building');for(let _0x221b20=0x0;_0x221b20<_0x33fa27['length'];_0x221b20++){let _0x34f355=_0x33fa27[_0x221b20]['classList'][0x1]['replace']('b_','');let _0x2765a6=parseInt(_0x33fa27[_0x221b20]['innerText']);let _0x3890e7=_0x3ec8e3+'_'+_0x34f355;_0x4319fa['set'](_0x3890e7,_0x2765a6);}let _0x294dd0=Array['from']($(_0x40b99d[_0x31e24c])['find']('.queue_icon\x20img'))['map'](_0x5f1af2=>_0x5f1af2['src']['match'](/\w+.png/)[0x0]['replace']('.png',''));for(let _0x4e5317=0x0;_0x4e5317<_0x294dd0['length'];_0x4e5317++){let _0x288cc7=_0x3ec8e3+'_'+_0x294dd0[_0x4e5317];if(_0x4319fa['has'](_0x288cc7)){let _0x13261e=_0x4319fa['get'](_0x288cc7);_0x4319fa['set'](_0x288cc7,_0x13261e+0x1);}else{_0x4319fa['set'](_0x288cc7,0x1);}}}}else{let _0x46194d=Array['from']($(_0x4fbd6d)['find']('.row_a,\x20.row_b'));for(let _0x3ad2d9=0x0;_0x3ad2d9<_0x46194d['length'];_0x3ad2d9++){let _0x15d3ae=$(_0x46194d[_0x3ad2d9])['find']('.nowrap')['text']()['match'](/[0-9]{3}\|[0-9]{3}/)[0x0];let _0x228ac5=$(_0x46194d[_0x3ad2d9]['nextElementSibling']['nextElementSibling'])['find']('img')['last']()['attr']('title');if(_0x228ac5==undefined){_0x228ac5=0x0;}else{_0x228ac5=_0x228ac5['split']('-')[0x1];_0x228ac5=_0x13eba1(_0x228ac5);}_0x4319fa['set'](_0x15d3ae+'_time_queued',_0x228ac5);let _0x2d6345=$(_0x46194d[_0x3ad2d9]['nextElementSibling'])['find']('table')['find']('td');let _0x435ab1=$(_0x46194d[_0x3ad2d9]['nextElementSibling'])['find']('table')['find']('th');for(let _0x3b41b2=0x0;_0x3b41b2<_0x2d6345['length'];_0x3b41b2++){let _0x364326=_0x435ab1[_0x3b41b2]['getElementsByTagName']('img')[0x0]['src']['split']('buildings/')[0x1]['replace']('.png','');let _0x2455d2=parseInt(_0x2d6345[_0x3b41b2]['innerText']);let _0x2c1975=_0x15d3ae+'_'+_0x364326;_0x4319fa['set'](_0x2c1975,_0x2455d2);}let _0x4155bd=Array['from']($(_0x46194d[_0x3ad2d9]['nextElementSibling']['nextElementSibling'])['find']('img'))['map'](_0x1eb1cd=>_0x1eb1cd['src']['match'](/\w+.png/)[0x0]['replace']('.png',''));for(let _0x2865e7=0x0;_0x2865e7<_0x4155bd['length'];_0x2865e7++){let _0x50caea=_0x15d3ae+'_'+_0x4155bd[_0x2865e7];if(_0x4319fa['has'](_0x50caea)){let _0x8d6c52=_0x4319fa['get'](_0x50caea);_0x4319fa['set'](_0x50caea,_0x8d6c52+0x1);}else{_0x4319fa['set'](_0x50caea,0x1);}}}}let _0x3541f4=new Date()['getTime']();let _0xdc06d9=_0x3541f4-_0x5c298d;window['setTimeout'](function(){_0x5bfe05(_0x3fe1c9);},0xc8-_0xdc06d9);},'error':_0x4a3745=>{_0xa202a(_0x4a3745);}});}else{_0x467223(_0x4319fa);}}_0x5bfe05(_0x3fe1c9);});}function _0x13eba1(_0x11e7ba){var _0x5ab1a6='';let _0x41ed47=document['getElementById']('serverDate')['innerText']['split']('/');if(_0x11e7ba['includes'](lang['aea2b0aa9ae1534226518faaefffdaad']['replace']('\x20%s',''))){_0x5ab1a6=_0x41ed47[0x1]+'/'+_0x41ed47[0x0]+'/'+_0x41ed47[0x2]+'\x20'+_0x11e7ba['match'](/\d+:\d+/)[0x0];}else if(_0x11e7ba['includes'](lang['57d28d1b211fddbb7a499ead5bf23079']['replace']('\x20%s',''))){var _0x413c68=new Date(_0x41ed47[0x1]+'/'+_0x41ed47[0x0]+'/'+_0x41ed47[0x2]);_0x413c68['setDate'](_0x413c68['getDate']()+0x1);_0x5ab1a6=('0'+(_0x413c68['getMonth']()+0x1))['slice'](-0x2)+'/'+('0'+_0x413c68['getDate']())['slice'](-0x2)+'/'+_0x413c68['getFullYear']()+'\x20'+_0x11e7ba['match'](/\d+:\d+/)[0x0];}else if(_0x11e7ba['includes'](lang['0cb274c906d622fa8ce524bcfbb7552d']['split']('\x20')[0x0])){var _0x1c765d=_0x11e7ba['match'](/\d+.\d+/)[0x0]['split']('.');_0x5ab1a6=_0x1c765d[0x1]+'/'+_0x1c765d[0x0]+'/'+_0x41ed47[0x2]+'\x20'+_0x11e7ba['match'](/\d+:\d+/)[0x0];}_0x5ab1a6=new Date(_0x5ab1a6);let _0x228b8c=document['getElementById']('serverTime')['innerText'];let _0x176d1c=document['getElementById']('serverDate')['innerText']['split']('/');_0x176d1c=_0x176d1c[0x1]+'/'+_0x176d1c[0x0]+'/'+_0x176d1c[0x2];let _0xc622dd=new Date(_0x176d1c+'\x20'+_0x228b8c);let _0x17368d=parseInt((_0x5ab1a6['getTime']()-_0xc622dd['getTime']())/0x3e8);if(_0x17368d<0x0){_0x5ab1a6['setDate'](_0x5ab1a6['getDate']()+0x1);_0x17368d=parseInt((_0x5ab1a6['getTime']()-_0xc622dd['getTime']())/0x3e8);}return _0x17368d;}function _0x3b3809(){if(localStorage['getItem'](game_data['world']+'constantBuildings')!==null){let _0x39f3bf=new Map(JSON['parse'](localStorage['getItem'](game_data['world']+'constantBuildings')));return _0x39f3bf;}else{let _0x3ff198=_0x2d4a43('/interface.php?func=get_building_info');const _0x5d4dc0=new DOMParser();const _0x4bc0cf=_0x5d4dc0['parseFromString'](_0x3ff198,'text/html');let _0x5075dc=new Map();let _0x5dc1dd=_0x4bc0cf['getElementsByTagName']('config')[0x0]['children'];for(let _0x4a8938=0x0;_0x4a8938<_0x5dc1dd['length'];_0x4a8938++){let _0x157482=_0x5dc1dd[_0x4a8938]['tagName']['toLowerCase']();let _0x2eb5ce=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('wood')[0x0]['innerText']);let _0x15a09d=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('stone')[0x0]['innerText']);let _0x8c143f=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('iron')[0x0]['innerText']);let _0x452fd8=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('wood_factor')[0x0]['innerText']);let _0xb40f3d=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('stone_factor')[0x0]['innerText']);let _0x8e25c9=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('iron_factor')[0x0]['innerText']);let _0x57c140=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('build_time')[0x0]['innerText']);let _0x26a14f=Number(_0x5dc1dd[_0x4a8938]['getElementsByTagName']('build_time_factor')[0x0]['innerText']);_0x5075dc['set'](_0x157482,{'wood':_0x2eb5ce,'stone':_0x15a09d,'iron':_0x8c143f,'wood_factor':_0x452fd8,'stone_factor':_0xb40f3d,'iron_factor':_0x8e25c9,'build_time':_0x57c140,'build_time_factor':_0x26a14f});}let _0x550107=JSON['stringify'](Array['from'](_0x5075dc['entries']()));localStorage['setItem'](game_data['world']+'constantBuildings',_0x550107);return _0x5075dc;}}function _0xe8c3f0(_0x312d07,_0x1f4cc8,_0x3b1f6f){let _0x4dbce3={0x1:0x1,0x2:0x1,0x3:0.112292,0x4:0.289555,0x5:0.46113,0x6:0.606372,0x7:0.723059,0x8:0.815935,0x9:0.889947,0xa:0.948408,0xb:0.994718,0xc:1.031,0xd:1.059231,0xe:1.080939,0xf:1.09729,0x10:1.109156,0x11:1.117308,0x12:1.122392,0x13:1.124817,0x14:1.124917,0x15:1.123181,0x16:1.119778,0x17:1.114984,0x18:1.109038,0x19:1.102077,0x1a:1.0942,0x1b:1.085601,0x1c:1.076369,0x1d:1.066566,0x1e:1.056291};var _0x56c9ff=_0x3b1f6f['build_time']*Math['pow'](1.2,_0x1f4cc8-0x1)*Math['pow'](1.05,-_0x312d07)*_0x4dbce3[_0x1f4cc8];let _0x42005c=Math['round'](_0x3b1f6f['wood']*Math['pow'](_0x3b1f6f['wood_factor'],_0x1f4cc8-0x1));let _0x5ddcf8=Math['round'](_0x3b1f6f['stone']*Math['pow'](_0x3b1f6f['stone_factor'],_0x1f4cc8-0x1));let _0x3f05b7=Math['round'](_0x3b1f6f['iron']*Math['pow'](_0x3b1f6f['iron_factor'],_0x1f4cc8-0x1));return[Math['round'](_0x56c9ff),_0x42005c,_0x5ddcf8,_0x3f05b7];}function _0x141e11(_0x27b43c,_0x12d9a3){let _0x1172b7=[];let _0xbeaa1e=0xf423f;let _0x2ea638=0x32;for(let _0x22ddbb=0x0;_0x22ddbb<_0x2ea638;_0x22ddbb++){let _0x535229=_0x21c7b1(_0x27b43c,_0x12d9a3);if(_0xbeaa1e>_0x535229['maxDistance']){_0xbeaa1e=_0x535229['maxDistance'];_0x1172b7=_0x535229;}}return _0x1172b7;}function _0x21c7b1(_0x292d09,_0x2c1826){var _0x2beea0,_0x2752ba,_0x93d148,_0x4469ba,_0x49b383;if(!_0x2c1826||!_0x2c1826['numberOfClusters']){_0x2beea0=0x1;}else{_0x2beea0=_0x2c1826['numberOfClusters'];}if(!_0x2c1826||!_0x2c1826['distanceFunction']){_0x2752ba=_0x212592;}else{_0x2752ba=_0x2c1826['distanceFunction'];}if(!_0x2c1826||!_0x2c1826['vectorFunction']){_0x93d148=_0x9563fc;}else{_0x93d148=_0x2c1826['vectorFunction'];}if(!_0x2c1826||!_0x2c1826['maxIterations']){_0x49b383=0x3e8;}else{_0x49b383=_0x2c1826['maxIterations'];}let _0x3555b5=_0x4bccfc(_0x292d09,_0x2beea0,_0x2752ba,_0x93d148,_0x49b383)['clusters'];let _0x4eaa9e=0x0;for(let _0x16794d=0x0;_0x16794d<_0x3555b5['length'];_0x16794d++){let _0x109d08=_0x3555b5[_0x16794d]['data'];for(let _0x43f097=0x0;_0x43f097<_0x109d08['length'];_0x43f097++){for(let _0x3b9085=_0x43f097+0x1;_0x3b9085<_0x109d08['length'];_0x3b9085++){let _0x432d86=_0x212592(_0x109d08[_0x43f097],_0x109d08[_0x3b9085]);_0x4eaa9e=_0x4eaa9e>_0x432d86?_0x4eaa9e:_0x432d86;}}}_0x3555b5['maxDistance']=_0x4eaa9e;return _0x3555b5;}function _0x4bccfc(_0x3b8547,_0x1bd396,_0x1df6fa,_0x5ea766,_0x527ae3){let _0x44ce81=[];for(let _0x404316=0x0;_0x404316<_0x1bd396;_0x404316++){let _0x31653d=parseInt(Math['random']()*Object['keys'](_0x3b8547)['length']);_0x44ce81['push'](_0x3b8547[_0x31653d]);}var _0x199189=_0x39b0ae(_0x44ce81);var _0x50a2a9=0xf423f;var _0x16378b=0x0;var _0x306b61=[];while(_0x16378b<_0x527ae3){_0x4c6922(_0x199189);_0x325713(_0x3b8547,_0x199189,_0x1df6fa,_0x5ea766);_0x5730dd(_0x199189,_0x5ea766);var _0x33a796=_0x453148(_0x199189,_0x5ea766,_0x1df6fa);_0x16378b++;}return{'clusters':_0x199189,'iterations':_0x306b61};}function _0x9563fc(_0x28e581){return _0x28e581;}function _0x453148(_0x4351ae,_0xa847ec,_0x54a7ff){var _0x236d6c=0x0;_0x4351ae['forEach'](function(_0x393ba0){_0x393ba0['data']['forEach'](function(_0x407a15){_0x236d6c=_0x236d6c+Math['pow'](_0x54a7ff(_0x393ba0['mean'],_0xa847ec(_0x407a15)),0x2);});});return _0x236d6c;}function _0x5730dd(_0x249a7c,_0x9ede7f){_0x249a7c['forEach'](function(_0x11a733){_0x58af22(_0x11a733,_0x9ede7f);});}function _0x58af22(_0x526d22,_0x2a18a1){var _0xd3615=[];for(var _0x4af25f=0x0;_0x4af25f<_0x526d22['mean']?.['length'];_0x4af25f++){_0xd3615['push'](_0x4c4854(_0x526d22['data'],_0x4af25f,_0x2a18a1));};_0x526d22['mean']=_0xd3615;}function _0x4c4854(_0x418d7c,_0x4e4177,_0x5595d5){var _0x2783d2=0x0;var _0x233897=_0x418d7c['length'];if(_0x233897==0x0)return 0x0;_0x418d7c['forEach'](function(_0x42e2c4){_0x2783d2=_0x2783d2+_0x5595d5(_0x42e2c4)[_0x4e4177];});return _0x2783d2/_0x233897;}function _0x325713(_0x115dd0,_0x3d564f,_0xfbd8f3,_0x3a76e0){_0x115dd0['forEach'](function(_0x59eb9a){var _0x4396c0=_0x3c0b14(_0x3a76e0(_0x59eb9a),_0x3d564f,_0xfbd8f3);if(!_0x4396c0['data'])_0x4396c0['data']=[];_0x4396c0['data']['push'](_0x59eb9a);});}function _0x3c0b14(_0x501565,_0x461fad,_0x42bbfe){var _0x39bcc2={};var _0x958e25=0x98967f;_0x461fad['forEach'](function(_0x2ee6dc){var _0x772988=_0x42bbfe(_0x2ee6dc['mean'],_0x501565);if(_0x772988<_0x958e25){_0x958e25=_0x772988;_0x39bcc2=_0x2ee6dc;};});return _0x39bcc2;}function _0x4c6922(_0x19f8ab){_0x19f8ab['forEach'](function(_0x3e1871){_0x3e1871['data']=[];});}function _0x39b0ae(_0x1ca493){var _0xa52b20=[];_0x1ca493['forEach'](function(_0x5b5ba4){var _0x553edb={'mean':_0x5b5ba4,'data':[]};_0xa52b20['push'](_0x553edb);});return _0xa52b20;}function _0x212592(_0xa9fbc0,_0x390443){var _0x3d0eb8=0x0;for(var _0x2faa0e=0x0;_0x2faa0e<_0xa9fbc0['length'];_0x2faa0e++){_0x3d0eb8=_0x3d0eb8+Math['pow'](_0xa9fbc0[_0x2faa0e]-_0x390443[_0x2faa0e],0x2);};return Math['sqrt'](_0x3d0eb8);}function _0x398f8b(_0x2f0816,_0x3f76cf){let _0x6dd904=!![];TWMap['mapHandler']['spawnSector']=function(_0x45b637,_0x2e7bff){_0x11abe9['call'](TWMap['mapHandler'],_0x45b637,_0x2e7bff);if(_0x6dd904==!![]){_0x6dd904=![];window['setTimeout'](()=>{let _0x475c84=TWMap['map']['_visibleSectors'];Object['keys'](_0x475c84)['forEach'](_0x4bb344=>{let _0x4999c7=_0x475c84[_0x4bb344]['_elements'];Object['keys'](_0x4999c7)['forEach'](_0x71a107=>{let _0x5a4a26=_0x4999c7[_0x71a107]['id']['match'](/\d+/);if(_0x5a4a26!=null){if(_0x2f0816['has'](_0x5a4a26[0x0])){let _0x27ab15=_0x2f0816['get'](_0x5a4a26[0x0]);_0x2da49e(_0x27ab15,_0x3f76cf[_0x27ab15['label_cluster']]);}}});});_0x6dd904=!![];},0x32);}};}function _0x2da49e(_0x123c62,_0x5afa48){try{if(document['getElementById']('info_extra'+_0x123c62['villageId'])==null){let _0x3f3522='#026440';let _0x1b6b3b='#E80000';let _0xa707ae=document['getElementById']('map_village_'+_0x123c62['villageId']);let _0x70d620=document['getElementById']('map_village_'+_0x123c62['villageId'])['parentElement'];let _0x5d682a=_0xa707ae['style']['left'];let _0xf302c2=_0xa707ae['style']['top'];while(document['getElementById']('map_icons_'+_0x123c62['villageId'])!=null){document['getElementById']('map_icons_'+_0x123c62['villageId'])['remove']();}if(document['getElementById']('map_cmdicons_'+_0x123c62['villageId']+'_0')!=null)document['getElementById']('map_cmdicons_'+_0x123c62['villageId']+'_0')['remove']();if(document['getElementById']('map_cmdicons_'+_0x123c62['villageId']+'_1')!=null)document['getElementById']('map_cmdicons_'+_0x123c62['villageId']+'_1')['remove']();let _0x41ac2a='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22border_info\x22\x20id=\x22info_extra'+_0x123c62['villageId']+'\x22\x20style=\x22position:absolute;left:'+_0x5d682a+';top:'+_0xf302c2+';width:51px;height:36px;z-index:3;\x20'+('background-color:'+_0x5afa48['colorOpacity']+';outline:'+_0x5afa48['color']+'\x20solid\x202px')+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center><font\x20color=\x22'+_0x4afef4+'\x22\x20\x20class=\x22shadow20\x22\x20style=\x22position:absolute;left:'+_0x5d682a+';top:'+_0xf302c2+';width:14px;height:14px;z-index:4;margin-left:0px;;\x20font-size:\x2012px\x22>nr:'+_0x123c62['label_cluster']+'\x20</font></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center><font\x20color=\x22'+_0x3f3522+'\x22\x20\x20class=\x22shadow20\x22\x20style=\x22position:absolute;left:'+_0x5d682a+';top:'+_0xf302c2+';width:14px;height:14px;z-index:4;margin-left:0px;margin-top:11px;\x20font-size:\x2012px\x22>'+parseInt(_0x123c62['total_resources_get']/0x3e8)+'k\x20</font></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<center><font\x20color=\x22'+_0x1b6b3b+'\x22\x20\x20class=\x22shadow20\x22\x20style=\x22position:absolute;left:'+_0x5d682a+';top:'+_0xf302c2+';width:14px;height:14px;z-index:4;margin-left:0px;margin-top:23px;\x20font-size:\x2012px\x22>'+parseInt(_0x123c62['total_resources_send']/0x3e8)+'k\x20</font></center>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';$(_0x41ac2a)['appendTo'](_0x70d620);}}catch(_0x29c48c){}}function _0x4b8eef(_0x418ddd){let _0x10f7a9='rgb(';let _0x58f307='rgba(';for(let _0x531996=0x0;_0x531996<0x3;_0x531996++){let _0x5e0041=Math['floor'](Math['random']()*0xff);_0x10f7a9+=_0x5e0041+',';_0x58f307+=_0x5e0041+',';}_0x10f7a9=_0x10f7a9['substr'](0x0,_0x10f7a9['length']-0x1)+')';_0x58f307=_0x58f307+_0x418ddd+')';return{'color':_0x10f7a9,'colorOpacity':_0x58f307};}function _0x30e6ba(){let _0xbc5269='\x0a\x20\x20\x20\x20.scriptContainer{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20'+_0x1ddf5e+'%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x36fef7+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20aspect-ratio:\x20100\x20/\x2029;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:move;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:50;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2015px;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x205px\x205px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:'+_0x551ec1+';\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptHeader{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x551ec1+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x20\x20\x20\x20\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptFooter{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x551ec1+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20right;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:50px;\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20.scriptTable{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2095%;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20table-layout:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:20px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:20px;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable\x20td{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable\x20tr:nth-child(odd){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable\x20tr:nth-child(even){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20.scriptTable\x20tr:first-child{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:15px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x52ee4d)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable\x20tr:not(:first-child):hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20'+_0x308715(_0xf32e6f,_0x5ecbac)+';\x0a\x20\x20\x20\x20}\x0a\x0a\x0a\x0a\x20\x20\x20\x20.scriptTable3Tr{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2095%;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20table-layout:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:20px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:20px;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20td{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:5px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+2){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+3){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+4){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+5){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+6){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:nth-child(6n+7){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x0a\x0a\x0a\x0a\x20\x20\x20\x20.scriptTable3Tr\x20tr:first-child{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:15px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x52ee4d)+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20sticky;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010;\x0a\x20\x20\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20.scriptTableInner{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2095%;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20table-layout:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:2px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:2px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableInner\x20td{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x202px\x202px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableInner\x20tr:nth-child(odd){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0x25cb9c,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableInner\x20tr:nth-child(even){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x25cb9c+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableInner\x20tr:first-child\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x202px\x202px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:15px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0x25cb9c,_0x52ee4d)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableInner\x20tr:not(:first-child):hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20'+_0x308715(_0x25cb9c,_0x5ecbac)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x0a\x0a\x0a\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.scriptTableAlternate{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20table-layout:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:20px;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableAlternate\x20tr:nth-child(odd){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x4c907f+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableAlternate\x20tr:nth-child(even){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x252335+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableAlternate\x20td{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableAlternate\x20tr:first-child\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20sticky;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0x4c907f,_0x52ee4d)+';\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableAlternate\x20tr:not(:first-child):hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20'+_0x308715(_0x252335,_0x5ecbac)+';\x0a\x20\x20\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20.scriptTableBalancerResult{\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2095%;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20table-layout:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:20px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:20px;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20td{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:1px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20word-wrap:\x20break-word;\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(even)\x20td:nth-child(-n+4){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(odd)\x20td:nth-child(-n+4){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(even)\x20td:nth-child(5){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x54fc2c+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(odd)\x20td:nth-child(5){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x172c0a+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(even)\x20td:nth-child(7){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x2d56b4+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(odd)\x20td:nth-child(7){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x24644b+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(even)\x20td:nth-child(9){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x45e143+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(odd)\x20td:nth-child(9){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x3111d+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(even)\x20td:nth-child(11){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0xf32e6f+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:not(:first-child):nth-child(odd)\x20td:nth-child(11){\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,-_0x23b653)+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.scriptTableBalancerResult\x20tr:first-child{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-style:\x20solid;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-width:\x201px\x201px;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-color:\x20'+_0x28dc98+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:15px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20sticky;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x308715(_0xf32e6f,_0x52ee4d)+';\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.scriptInput\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:50%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color\x20:\x20'+_0x126948+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:'+_0x4afef4+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.tab-panels\x20ul\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.tab-panels\x20ul\x20li\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20list-style-type:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x202px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x203px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px\x2010px\x200\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:'+_0x4afef4+'\x0a\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.tab-panels\x20ul\x20li:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#666;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.tab-panels\x20ul\x20li.active\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#666;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.tab-panels\x20.panel\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20'+_0x551ec1+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.tab-panels\x20.panel.active\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:block;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20.shadow20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x200\x204px\x20black,\x200\x200\x204px\x20black,\x200\x200\x204px\x20black,\x200\x200\x204px\x20black,\x200\x200\x204px\x20black;\x0a\x20\x20\x20\x20}\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20',_0x343c34=document['head']||document['getElementsByTagName']('head')[0x0],_0x17fe15=document['createElement']('style');_0x343c34['appendChild'](_0x17fe15);_0x17fe15['type']='text/css';if(_0x17fe15['styleSheet']){_0x17fe15['styleSheet']['cssText']=_0xbc5269;}else{_0x17fe15['appendChild'](document['createTextNode'](_0xbc5269));}}_0x30e6ba();function _0x308715(_0x502081,_0x497584){let _0x378458=_0x502081;_0x378458=_0x378458['replace'](/^\s*#|\s*$/g,'');if(_0x378458['length']===0x3){_0x378458=_0x378458['replace'](/(.)/g,'$1$1');}let _0x5c203f=parseInt(_0x378458['substr'](0x0,0x2),0x10);let _0x2efdaf=parseInt(_0x378458['substr'](0x2,0x2),0x10);let _0x6ebfcb=parseInt(_0x378458['substr'](0x4,0x2),0x10);const _0x5c1fe6=(0x64+_0x497584)/0x64;_0x5c203f=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x5c203f*_0x5c1fe6)));_0x2efdaf=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x2efdaf*_0x5c1fe6)));_0x6ebfcb=Math['round'](Math['min'](0xff,Math['max'](0x0,_0x6ebfcb*_0x5c1fe6)));return'#'+('00'+_0x5c203f['toString'](0x10))['slice'](-0x2)['toUpperCase']()+('00'+_0x2efdaf['toString'](0x10))['slice'](-0x2)['toUpperCase']()+('00'+_0x6ebfcb['toString'](0x10))['slice'](-0x2)['toUpperCase']();}function _0x4740c7(_0x16bebe){if(_0x16bebe['indexOf']('#')===0x0){_0x16bebe=_0x16bebe['slice'](0x1);}if(_0x16bebe['length']===0x3){_0x16bebe=_0x16bebe[0x0]+_0x16bebe[0x0]+_0x16bebe[0x1]+_0x16bebe[0x1]+_0x16bebe[0x2]+_0x16bebe[0x2];}if(_0x16bebe['length']!==0x6){throw new Error('Invalid\x20HEX\x20color.');}var _0xc05197=(0xff-parseInt(_0x16bebe['slice'](0x0,0x2),0x10))['toString'](0x10),_0x434a2d=(0xff-parseInt(_0x16bebe['slice'](0x2,0x4),0x10))['toString'](0x10),_0x5967e3=(0xff-parseInt(_0x16bebe['slice'](0x4,0x6),0x10))['toString'](0x10);return'#'+_0x55e01e(_0xc05197)+_0x55e01e(_0x434a2d)+_0x55e01e(_0x5967e3);}function _0x55e01e(_0x4ac3bd,_0x109d69){_0x109d69=_0x109d69||0x2;var _0x5abb10=new Array(_0x109d69)['join']('0');return(_0x5abb10+_0x4ac3bd)['slice'](-_0x109d69);};
        },
        _0x238794: function(event) {
            /* SEND RESOURCES */
            let $pbElement = $('.scriptTableAlternate input');
            !$pbElement.length ? this._0x238750(!void 0) : this._0x238794.timers = $pbElement.map((i, $pb) => setTimeout((event) => $($pb).trigger('click') && i == $pbElement.length-1 && this._0x238750(!void 0), i * 4e+2) || !void 0);
        },
        _0x238850: function(event) {
            /* CHANGE INPUT */
            return $(event).closest('td').find('output').val(event.value);
        },
        _0x238849: async function(event) {
            /* OVERVIEW RESOURCES */
            let $pbElement = ``, selector = $('#request-balancer #init'); if (true && !selector.prop('checked') || selector.prop('disabled', true) && !!void 0) return !clearTimeout(this._0x238849.timers) && $('#_0x238897 #resources-table').empty(!void 0);
            !await this._0x238955('transport_own', (xhr) => $pbElement += $(xhr).find('#trades_table')[0]?.innerHTML || ``) && $pbElement ? $('#_0x238897 #resources-table').html('<table id="container" width="100%">' + $pbElement + '</table>').find('tr').each((i, $pb) => $($pb.cells).each((i, $pb) => [0, 1, 4, 7].includes(i) ? $($pb).remove() : !null) && !$pb.className.includes('row') && i || !$pb.cells[4].textContent ? $($pb).remove() : !NaN) && Timing.tickHandlers.timers.init() : $('#_0x238897 #resources-table').html(`<span style="font-size: smaller; color: #6d6db3;">NÃO EXISTEM TRANSPORTES PARA SEREM EXIBIDOS!</span>`);
            this._0x238849.timers = setTimeout(($pb) => this._0x238849(!null), 60 * 1000 + Math.random() * (180 * 1000 - 60 * 1000) || !void 0);
            selector.prop('disabled', false);
        },
        _0x238955: function(string, event) { 
            /* PROCESS PAGES */
            return $.ajax({url: game_data.link_base_pure + `${ScriptAPI._0x238676(string, 0)}&group=0`, method: 'POST', data: `page_size=1000&h=${game_data.csrf}`}).then(async (xhr) => {
                let pagedNavItem = $(xhr).find('a.paged-nav-item'), pageSize = [xhr]; for (let i=0;i<pagedNavItem.length-1;i++) {
                    let response = await $.get(game_data.link_base_pure + `${ScriptAPI._0x238676(string, 1)}&page=${i+1}`);
                    pageSize.push(response);
                };          
                return pageSize.forEach(event);
            });
        },
        _0x238751: function(event) {
            /* STOP SCRIPT */
            !this._0x238794.timers && !clearTimeout(this._0x238750.timers) || ![...this._0x238794.timers, this._0x238750.timers].forEach(($pb) => clearTimeout($pb) || !void 0);
            return $('#_0x238897 #init:not([type=checkbox])').prop('disabled', false) && $('#end-time-balancer').html(`00:00:00`);
        },
        _0x238750: function(event) {
            /* RELOAD BALANCER */
            let [script_fixed, script_min, script_max] = $('input[id*=time-balancer]').map((i, input) => ScriptAPI._0x238982(input.value) ?? !void 0), script_timer = $('#_0x238897 #time-balancer option:selected')[0].textContent != 'RANDOM' ? script_fixed : script_min + Math.random() * (script_max - script_min);
            this._0x238750.timers = setTimeout(($pb) => balancingResources(this), script_timer * 1000);
            return $('#end-time-balancer').html(`<span class="timer">${ScriptAPI._0x238993(script_timer)}</span>`) && !Timing.tickHandlers.timers.init();
        },
        _0x238749: function(event) {
            /* SAVE SCRIPT */
            let options = $('#_0x238897 table').find('input, select:not(#time-balancer)').toArray(!void 0).map(($pb) => $pb.value);
            return localStorage.setItem('_0x238899', JSON.stringify({options}));
        },

    },
    _0x238898: {
        /*-------------------------------
        * SCRIPT UNITS MANAGER VERSION 1.0.0 *
        --------------------------------*/
        _0x238739: function($pbEvent) {
            /* CREATE NEW TEMPLATE */
            let templates_length = $('#templates-manager tbody').length, new_template = `<tbody><tr><th rowspan="2">MODELO #${templates_length+1}</th><th class="groups-select">GRUPO</th>${game_data.units.filter((unit) => !['knight', 'snob', 'militia'].includes(unit) && !void 0).reduce((acc, unit) => acc += `<th><a href="#" class="unit_link" data-unit="` + unit + `"><img src="/graphic/unit/unit_` + unit + `.png"></a></th>`, ``)}${['wood', 'stone', 'iron', 'population'].reduce((acc, icon, i) => acc += `<th><span class="icon header ${icon}"` + (i == 3 && `style="vertical-align: -7px;"` || ``) + `></span></th>`, ``)}<th class="delete-template" rowspan="2"><a href="#" onclick="ScriptAPI._0x238898._0x238921(this)">X</a></th></tr><tr><td>${Connection.receiveBridgedGroups}</td>${game_data.units.filter((unit) => !['knight', 'snob', 'militia'].includes(unit) && !void 0).reduce((acc, unit) => acc += `<td><input type="number" id="unit_` + unit + `" value="0"></td>`, ``)}${['wood', 'stone', 'iron', 'population'].reduce((acc, icon) => acc += `<td><input type="number" id="icon_${icon}" value="0"></td>`, ``)}</tr></tbody>`
            return $('#templates-manager table').append(new_template) && $pbEvent && ScriptAPI._0x238898._0x238739(false);
        },
        _0x238921: function(event) {
            /* REMOVE TEMPLATE */
            return $(event).closest('tbody').remove() && $('#templates-manager tbody').each((i, $pb) => $($pb).find('th[rowspan]:not(.delete-template)').text(`MODELO #${i+1}`) || !void 0);
        },
        _0x238947: function(event) {
            /* INIT */
            let scriptUpdated = JSON.parse(localStorage._0x238898 || null);
            let options = $(scriptUpdated?.templates).find('option:selected').map((i, $pb) => $pb.value);
            return localStorage._0x238898 && $('#templates-manager table').html(scriptUpdated.templates) && $('#templates-manager td:has(select)').each((i, $pb) => $pb.innerHTML = Connection.receiveBridgedGroups).find('select').each((i, $pb) => $($pb).find(`option[value=${options[i]}]`)[0].setAttribute('selected', ``) || !void 0) && $('#buildings-config input').each((i, $pb) => $pb.value = scriptUpdated.inputs[i]) || ScriptAPI._0x238898._0x238739(true);
        },
        _0x238735: function(event) {
            /* SET ATTRIBUTE */
            return event.target.id && !event.target.setAttribute('value', event.target.value) || $(event.target).find('option[selected]').removeAttr('selected') && event.target.selectedOptions[0].setAttribute('selected', ``);
        },
        _0x238955: function(string, group_id, event) { 
            /* PROCESS PAGES */
            return $.ajax({url: game_data.link_base_pure + `${ScriptAPI._0x238676(string, 0)}&group=${group_id}`, method: 'POST', data: `page_size=1000&h=${game_data.csrf}`}).then(async (xhr) => {
                let pagedNavItem = $(xhr).find('a.paged-nav-item'), pageSize = [xhr]; for (let i=0;i<pagedNavItem.length-1;i++) {
                    let response = await $.get(game_data.link_base_pure + `${ScriptAPI._0x238676(string, 1)}&group=${group_id}&page=${i+1}`);
                    pageSize.push(response);
                };       
                return pageSize.forEach(event);
            });
        },
        _0x238911: function(event) {
            /* RELOAD MANAGER */
            let [script_fixed, script_min, script_max] = $('input[id*=time-manager]').map((i, input) => ScriptAPI._0x238982(input.value) ?? !void 0), script_timer = $('#time-manager option:selected')[0].textContent != 'RANDOM' ? script_fixed : script_min + Math.random() * (script_max - script_min);
            this._0x238911.timers = setTimeout(($pb) => this._0x238732(!void 0), script_timer * 1000);
            return $('#end-time-manager').html(`<span class="timer">${ScriptAPI._0x238993(script_timer)}</span>`) && Timing.tickHandlers.timers.init();
        },
        _0x238732: async function(event) {
            /* PROCESS XML */
            let selector = $('#init-manager, #stop-manager').prop('disabled', true), templates = $('#templates-manager tbody').toArray(!void 0).reduce((acc, $pb, i) => (acc[`template ${i+1}`] = [...$($pb.lastChild.cells)].reduce((acc, {firstChild: $pb}, i) => (acc[!i && 'option' || $pb.id] = i ? Number($pb.value) : $pb.selectedOptions[i].value, acc), {}), acc), {});
            let [packages_barracks, packages_stable, packages_garage, queues_barracks, queues_stable, queues_garage] = $('#buildings-config input[type=number]').map((i, $pb) => $pb.value);
            let UnitAssignmentRouter = ($pb) => ['spear', 'sword', 'axe', 'archer'].includes($pb) && ['barracks', queues_barracks, packages_barracks] || ['spy', 'light', 'marcher', 'heavy'].includes($pb) && ['stable', queues_stable, packages_stable] || ['garage', queues_garage, packages_garage];
            let skipVillagesUnits = {}, BuildingRequestUnits = [];
            await this._0x238955('production', '0', (xhr) => $(xhr).find('#production_table tbody tr').each((i, $pb) => skipVillagesUnits[$pb.textContent.match(/\d{1,3}\|\d{1,3}/)[0]] = {
                    barracks: $($pb).find('img[src*=spear], img[src*=sword], img[src*=axe], img[src*=archer]').length, stable: $($pb).find('img[src*=spy], img[src*=light], img[src*=marcher], img[src*=heavy]').length, garage: $($pb).find('img[src*=ram], img[src*=catapult]').length,
                }),
            );
            for (let template in templates) {
                await this._0x238955('recruits', templates[template].option, function(xhr, index) { 
                    $(xhr).find('#mass_train_table tbody').each(function(ii, {firstElementChild: {cells: $pb}}) {
                        let village = $pb[0].textContent.match(/\d{1,3}\|\d{1,3}/)[0];
                        let [available_wood, available_stone, available_iron] = $pb[1].textContent.replace(/\s+/g, '\x20').trim().split(' ').map(($pb, i) => $pb.replace(/\./, '') - templates[template]['icon_' + (!i && 'wood' || i == 1 && 'stone' || 'iron')]), [total_population, max_population] = $pb[2].textContent.match(/\d+/g), available_population = (max_population - total_population - templates[template].icon_population);
                        let resourcesPopulation = {wood: 0, stone: 0, iron: 0, pop: 0}, template_units = ['option', 'icon_wood', 'icon_stone', 'icon_iron', 'icon_population'].reduce((acc, $pb) => delete acc[$pb] && acc, {
                                ...templates[template],
                            },
                        );
                        $($pb).slice(3, -1).each(function(i, {firstElementChild: $pb}) {
                            let [available_unit, recruit_unit] = [$pb.textContent.trim(), $($pb).find('img').attr('title') || '0'].map(($pb) => Number($pb) ?? !void 0);
                            let $pbElement = UnitAssignmentRouter(game_data.units[i]);
                            template_units[`unit_${game_data.units[i]}`] && skipVillagesUnits[village][$pbElement[0]] < $pbElement[1] && (template_units[`unit_${game_data.units[i]}`] -= (available_unit + recruit_unit), !void 0) && ['wood', 'stone', 'iron', 'pop'].forEach(($pb) => resourcesPopulation[$pb] += $pbElement[2] * ScriptAPI._0x238675.units[game_data.units[i]][$pb]);
                        });
                        let proportional = Math.min(available_wood / resourcesPopulation.wood, available_stone / resourcesPopulation.stone, available_iron / resourcesPopulation.iron, available_population / resourcesPopulation.pop);
                        let UnitPathURLBuilder = Object.entries(template_units).map(([unit, $pb]) => [unit.replace(/unit_/, ``), $pb]).reduce(function(acc, [unit, $pb], i) {
                            let $pbElement = UnitAssignmentRouter(game_data.units[i]), diference = ~~($pbElement[2] * (proportional > 1e+0 ? 1e+0 : proportional > 0e+0 && proportional || 0e+0));  
                                return acc += `${ii||i?'&':''}units[${APIUpdated.database[village].villageID}][${game_data.units[i]}]=${$pb > 0 && skipVillagesUnits[village][$pbElement[0]] < $pbElement[1] ? $pb < diference ? $pb : diference : ``}`}, ``
                            );
                            return (BuildingRequestUnits[index] ||= {UnitPathURLBuilder: ''}).UnitPathURLBuilder += UnitPathURLBuilder;
                        },
                    );
                    return BuildingRequestUnits[index].url = game_data.link_base_pure + `train&mode=mass&action=train_mass&page=${index}`;
                });
                await this._0x238731(BuildingRequestUnits) && BuildingRequestUnits.splice(0e+0);
            };
            return selector.eq(1).prop('disabled', false) && this._0x238911(!void 0);
        },
        _0x238731: function(templates) {
            /* SEND UNITS */
            return new Promise(async function(resolve) {
                for (let template of templates) {
                    await $.ajax({url: template.url, method: 'POST', data: template.UnitPathURLBuilder + `&h=${game_data.csrf}`,
                        success: function(event) {
                            return UI.SuccessMessage('Gerenciamento iniciado com sucesso!');
                        },
                    }); 
                };
                return resolve(!void 0);
            });
        },
        _0x238972: function(event) {
            /* STOP SCRIPT */
            !clearTimeout(this._0x238911.timers) && $('#end-time-manager').html(`&nbsp;00:00:00`);
            return $('#init-manager').prop('disabled', false);
        },
        _0x238957: function(event) {
            /* SAVE SCRIPT */
            let templates = $('#templates-manager table')[0].innerHTML, inputs = $('#buildings-config input').map((i, $pb) => $pb.value);
            return !localStorage.setItem('_0x238898', JSON.stringify({templates, inputs})) && UI.SuccessMessage('Todos os modelos foram salvos com sucesso!');
        },
    },
    _0x238676: function(event, index, village_id) {
        /* ENDPOINTS */
        return {troops: [`overview_villages&mode=units&action=change_page_size&type=own_home&group=0`, `overview_villages&mode=units&type=own_home&group=0`], report: [`report&action=change_page_size&mode=all&from=0`, `report&mode=all`], commands: ['overview_villages&mode=commands&action=change_page_size&type=attack&group=0', `overview_villages&mode=commands&type=attack&group=0`], transport_own: ['overview_villages&mode=trader&action=change_page_size&type=own', 'overview_villages&mode=trader&type=own&group=0'], transport: ['overview_villages&mode=trader&action=change_page_size&type=inc', 'overview_villages&mode=trader&type=inc&type=inc'], market: ['market&mode=call&action=change_call_pagesize', `market&mode=call&order=distance&dir=ASC&target_id=${village_id || game_data.village.id}`], production: [`overview_villages&mode=prod&action=change_page_size`, `overview_villages&mode=prod`], recruits: ['train&mode=mass&action=change_page_size', 'train&mode=mass']}[event][index];
    },
    _0x238978: function(event) {
        /* CAPTCHA SECURITY */
        let questlog = $('.questlog'), mutationObserver = new MutationObserver(([{addedNodes: [event]}]) => event?.id == 'botprotection_quest' && $('#discord-webhooks')[0].value.startsWith('https://discord.com/api/webhooks/') && $.ajax({url: $('#discord-webhooks')[0].value, method: 'POST', contentType: 'application/json', data: JSON.stringify({content: null, embeds: [{title: 'Obsidian Captcha Security', description: `Olá jogador ${game_data.player.name}, surgiu um captcha na sua conta e devido a questões de segurança a Obsidian esta fechada.`, color: 11420700}], attachments: []})}) && $('#menu, #obsidian-scripts').remove() && void 0);
        return mutationObserver.observe(questlog[0], {subtree: true, childList: true});
    },
    _0x238979: function (from, to) {
        /* CALCULATE DISTANCE */
        let [x1, y1] = from.split('|'), [x2, y2] = to.split('|'), deltaX = Math.abs(x1 - x2), deltaY = Math.abs(y1 - y2);
        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);
    },
    _0x238980: function (event) {
        /* CONVERT TO VALID FORMAT */
        return event.replace(/(\d+)\/(\d+)\/(\d+) (.*)/, '$3-$2-$1 $4');
    },
    _0x238982: function(event) {
        /* HOURS TO SECONDS */
        return event.split(':').map(Number).reduce((acc, el, i) => acc + (!i ? el * 3600 : i == 1 ? el * 60 : el), 0);
    },
    _0x238962: function(event) {
        /* CHANGE SELECT */
        return $(event.target).closest('td, th').find('input').each((i, $pb) => $($pb).css('display', (i, $pb) => ['inline-block', 'table-cell'].includes($pb) && 'none' || 'table-cell') || !void 0);
    },
    _0x238774: function(event) {
        return !mobiledevice || $('#obsidian-scripts, #script-packages, #container-small-planner, #import-commands').css(
            {'top': '50%', 'left': '50%', 'transform': 'translate(-50%, -50%)'},
        );
    },
    _0x238675: function(event) {
        return this._0x238675.units = {'spear':{'wood':0x32,'stone':0x1e,'iron':0xa,'pop':0x1},'sword':{'wood':0x1e,'stone':0x1e,'iron':0x46,'pop':0x1},'axe':{'wood':0x3c,'stone':0x1e,'iron':0x28,'pop':0x1},'archer':{'wood':0x64,'stone':0x1e,'iron':0x3c,'pop':0x1},'spy':{'wood':0x32,'stone':0x32,'iron':0x14,'pop':0x2},'light':{'wood':0x7d,'stone':0x64,'iron':0xfa,'pop':0x4},'marcher':{'wood':0xfa,'stone':0x64,'iron':0x96,'pop':0x5},'heavy':{'wood':0xc8,'stone':0x96,'iron':0x258,'pop':0x6},'ram':{'wood':0x12c,'stone':0xc8,'iron':0xc8,'pop':0x5},'catapult':{'wood':0x140,'stone':0x190,'iron':0x64,'pop':0x8}};
    },
    _0x238947: async function(event, string) {
        /* INIT */
        ScriptAPI._0x238675(!void 0), this._0x238995._0x238963(), this._0x238947.updatedTime = Date.now(), this._0x238947.scriptUpdated = JSON.parse(localStorage.ScriptAPI || null) ?? {}; 
        if (!window.location.href.includes(this._0x238947.scriptUpdated._0x238992 || 'screen=overview_villages&mode=combined') || string != 'secret') return; Connection = {
            debug: $pb => 1e+9, enqueueHandler: $pb => 1e+8, registerObserver: $pb => 1e+7, receiveBridgedEvent: $pb => 1e+6, receiveBridgedGroups: await ScriptAPI._0x238990(!void 0),
        };
        let timeLeft = new Date(event) - Timing.getCurrentServerTime(), serverinfo = $('.server_info'), scriptHTML = `<div id="obsidian-scripts" class="vis content-border" style="display: none; position: fixed; top: 10%; left: 20%; border-radius: 8px; z-index: 100;">
            <style>#obsidian-scripts, #obsidian-scripts td, #obsidian-scripts #import-commands, #obsidian-scripts #container-small-planner, #obsidian-scripts #container-big-planner, #obsidian-scripts #script-packages {background: #36393f !important;}#obsidian-scripts th, #obsidian-scripts td[rowspan], #obsidian-scripts .vis_item, #obsidian-scripts #loading, #obsidian-scripts h3, #obsidian-scripts h4 {background-color: #202225 !important;background-image: none;}#obsidian-scripts textarea {background-color: #202225;resize: none;width: 97%;height: 50px;}#obsidian-scripts .info_box {background: #202225 url(https://dsbr.innogamescdn.com/asset/234518f7/graphic/questionmark.png) no-repeat 4px center;}#obsidian-scripts input[type="text"], #obsidian-scripts input[type="number"], #obsidian-scripts input[type="time"], #obsidian-scripts button, #obsidian-scripts textarea, #obsidian-scripts .info_box, #obsidian-scripts small, #obsidian-scripts th, #obsidian-scripts td, #obsidian-scripts h3, #obsidian-scripts h4 {color: rgb(255, 255, 223);}#obsidian-scripts input[type="button"], #obsidian-scripts button {background-image: linear-gradient(#6e7178 0%, #36393f 30%, #202225 80%, black 100%);}#obsidian-scripts input[type="text"], #obsidian-scripts input[type="number"], #obsidian-scripts input[type="time"] {background: none;outline: 1px solid light-dark(rgb(118, 118, 118), rgb(133, 133, 133));border: 0px;}#obsidian-scripts button {border-radius: 10px;font-weight: bold;}#obsidian-scripts select {background: none;color: #868f42;}#obsidian-scripts a {color: #ae441c;}#obsidian-scripts .switch {position: relative;display: inline-block;margin-top: 3px;width: 37px;height: 20px;}#obsidian-scripts .switch input {display: none;}#obsidian-scripts .slider {position: absolute;cursor: pointer;top: 0;left: 0;right: 0;bottom: 0;background-color: #ccc;transition: .4s;border-radius: 20px;}#obsidian-scripts .slider:before {position: absolute;content: "";height: 18px;width: 18px;left: 2px;bottom: 1px;background-color: white;transition: .4s;border-radius: 50%;}#obsidian-scripts input:checked + .slider {background-color: #2d935a;}#obsidian-scripts input:checked + .slider:before {transform: translateX(15px);}</style>
            <audio autoplay loop><source src="https://twdevtools.github.io/sounds/obsidian-mute.ogg" type="audio/ogg"><source src="https://twdevtools.github.io/sounds/obsidian-mute.mp3" type="audio/mpeg"></audio>
            <table style="padding: 2px 2px 0px 2px; width: 100%;">
                <thead>
                    <style>.header-th {text-align: center;font-family: sans-serif;border-radius: 6px;padding: 8px;}</style>
                    <tr>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#obsidian-group')">HISTÓRIA</a></th>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#welcome-obsidian')">BEM-VINDO</a></th>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#_0x238994')">AGENDADOR</a></th>
                        <th class="header-th"` + (!game_data.features.FarmAssistent.possible || !game_data.features.FarmAssistent.active ? ` style="display: none;"` : ``) + `><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#_0x238995')">FARMADOR</a></th>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#_0x238996')">CUNHADOR</a></th>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#_0x238897')">BALANCEADOR</a></th>
                        <th class="header-th"><a class="a-color" href="#" onclick="ScriptAPI._0x238985('#_0x238898')">GERENTE DE UNIDADES</a></th>
                        <th class="header-th" style="border-radius: 16px; padding: 3px 1px 2px 0px; width: 34px;"><img src="https://twdevtools.github.io/images/obsidian-minimize.png" style="vertical-align: -2px; margin: 0px 0px 0px 1px; width: 25px; cursor: pointer;" onclick="ScriptAPI._0x238984('#obsidian-scripts', 'none')"></th>
                    </tr>
                </thead>
            </table>
            <div id="obsidian-group" style="display: none; text-align: center; font-weight: bold; max-width: 650px; padding: 12px; color: rgb(151 149 148);">
                <h3 style="border-radius: 8px; padding: 6px;">HISTORIA DO GRUPO OBSIDIAN</h3>
                <img src="https://twdevtools.github.io/images/obsidian-animation.GIF" style="position: absolute; z-index: -1; opacity: 0.2; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                Há muito tempo, uma civilização avançada chamada Obsidian dominava a arte do código e da tecnologia. Sua habilidade em desenvolver algoritmos e sistemas era incomparável, permitindo-lhes controlar, criar realidades virtuais e alterar a estrutura da própria informação.<br><br>
                Essa tecnologia não se limitava apenas ao mundo físico, mas também permeava os domínios digitais e metafísicos. Os códigos de Obsidian eram como chaves mestras que desbloqueavam os segredos do universo, permitindo a compreensão e manipulação de energias cósmicas e dimensões além da nossa percepção convencional.<br><br>
                No auge de seu poder, a civilização de Obsidian foi ameaçada por uma grande catástrofe natural. Para preservar seu conhecimento e evitar que caísse em mãos erradas, eles decidiram esconder seus arquivos em uma cidade subterrânea, protegida por armadilhas mágicas e guardiões poderosos.<br><br>
                Centenas de anos se passaram, e a cidade de Obsidian se perdeu na história, tornando-se uma lenda. Até que um arqueólogo destemido, motivado por histórias antigas, descobriu o local da cidade perdida. Ao explorar suas ruínas, ele encontrou os antigos arquivos de Obsidian.<br><br>
                Ao analisar esses arquivos, descobre que o conhecimento contido neles é verdadeiramente impressionante. No entanto, ele também percebe a responsabilidade monumental que carrega ao ter acesso a esse poder.<br><br>
                O arqueólogo, diante da magnitude do conhecimento contido nos arquivos de Obsidian, enfrenta uma escolha crucial. Com a ajuda dos Alquimistas da Luz, o arqueólogo embarca em uma jornada para compreender e aplicar sabiamente o conhecimento de Obsidian. Eles estabelecem um conselho de sábios, composto por especialistas de diversas áreas, para orientar o uso ético e responsável dessa tecnologia avançada.<br><br>
                Juntos, eles começam a desenvolver soluções para os desafios globais utilizando os princípios de tecnologia aprendidos com os antigos códigos de Obsidian, eles transformam a sociedade de forma positiva, guiando-a rumo a um futuro equilibrado e próspero.<br><br>
                Assim, o legado de Obsidian é honrado não apenas pela redescoberta de seu conhecimento, mas também pela forma como é aplicado para o bem de toda a humanidade, trazendo uma nova era de progresso e consciência para o mundo.
            </div>
            <div id="welcome-obsidian" style="display: block; padding: 12px;">
                <h3 style="text-align: center; padding: 6px; border-radius: 8px;">BEM VINDO AO OBSIDIAN SCRIPTS!</h3>
                <img src="https://twdevtools.github.io/images/obsidian-animation.GIF" style="position: absolute; width: 140px; z-index: 1; top: 45px; left: -20px;">
                <div class="vis" style="margin: 25px 5px 25px 80px;"><h4>EXPIRA:&nbsp;<span id="time-expire" style="color: #53853b;"></span>&nbsp;EM:&nbsp;<span id="timer-end" class="timer" style="color: #c9c922;"></span>&nbsp;<a href="#" style="text-decoration: underline; font-style: italic;" onclick="ScriptAPI._0x238984('#script-packages', 'block')">CLIQUE AQUI PARA RENOVAR O PODER DA OBSIDIAN!</a></h4></div>
                <div class="vis"><h4 style="margin: 0px;">DISCORD WEBHOOK:</h4><small style="margin: 0px 0px 0px 7px;">Este método serve para enviar notificações para seu discord sobre alertas na sua conta, como captcha e etc...<br>&nbsp;&nbsp;Como criar um webhook:&nbsp;<a href="https://support.discord.com/hc/pt-br/articles/228383668-Usando-Webhooks" target="_blank" rel="noopener noreferrer">Clique Aqui</a></small><input id="discord-webhooks" type="text" style="font-size: 13pt; width: 87%; margin: 8px;" placeholder="https://discord.com/api/webhooks/..."><button style="vertical-align: 1px;" onclick="ScriptAPI._0x238992(this)">SALVAR</button></div>
                <div class="vis"><h4 style="margin: 0px;">EXECUTAR/ABRIR A OBSIDIAN:</h4><img src="https://twdevtools.github.io/images/obsidian-screen.jpeg" style="border-radius: 20px;"><br><small style="margin: 0px 0px 0px 7px;">Aqui deve-se configurar a localidade onde a Obsidian será executado.<br></small><input id="run-screen" type="text" style="font-size: 13pt; width: 87%; margin: 8px;" placeholder="ex: screen=accountmanager..."><button style="vertical-align: 1px;" onclick="ScriptAPI._0x238992(this)">SALVAR</button></div>
                <div class="vis"><h4 style="font-family: sans-serif; margin: 0px;">ETIQUETAR COMANDOS:&nbsp;<input id="run-incomings" type="checkbox" style="vertical-align: -2px;" onclick="let _=ScriptAPI._0x238997;_._0x238956(!void 0);_._0x238957(null);"></h4><small style="margin: 0px 0px 0px 7px;">🚨 Configure a etiqueta conforme a imagem abaixo:</small><br><button style="margin: 6px;" onclick="ScriptAPI._0x238986(this)">EXPANDIR IMAGEM:</button><br><img src="https://twdevtools.github.io/images/obsidian-incomings.jpeg" style="display: none; border-radius: 8px; margin: 0px 6px 6px;"><div class="info_box" style="margin: 0px 6px 6px;"><div class="content" style="text-align: left; font-size: larger;">VERIFICANDO NOVAMENTE EM:&nbsp;<div id="timer-incomings" style="display: contents; color: #c14848;">00:00:00</div><span style="vertical-align: 2px; font-size: 8px; margin-left: 6px; color: #c9c922;">SEMPRE É GERADO UM TEMPO ALEATÓRIO PARA VERIFICAR ENTRE 1MIN E 5MIN!</span></div></div></div>
                <div class="vis"><h4 style="margin: 0px;">REDES SOCIAIS:</h4><img src="https://twdevtools.github.io/images/obsidian-whatsapp.png" style="width: 25px; margin: 4px;"><a href="https://chat.whatsapp.com/Hb6SdZFNnMP7SE3qqavU2H" target="_blank" rel="noopener noreferrer" style="font-family: math; vertical-align: 11px;">WHATSAPP</a><img src="https://twdevtools.github.io/images/obsidian-discord.png" style="width: 33px;"><a href="https://discord.gg/SBpuDZ5" target="_blank" rel="noopener noreferrer" style="font-family: math; vertical-align: 11px;">DISCORD</a></div>
                <div class="serverTime" style="position: absolute; font-size: small; bottom: 3px; right: 5px; color: #c9c922;"><span id="time"></span></div>
            </div>
            <div id="_0x238994" style="display: none;">
                <style>#_0x238994 thead {position: sticky; top: 0px; z-index: 1;}#_0x238994 thead th {border-bottom: 1px solid #7D510F;}#_0x238994 .registered td, #_0x238994 .combinations-found td, #_0x238994 .info-targets td {background-color: #202225 !important;}#_0x238994 .registered img {vertical-align: -2px;cursor: pointer;width: 13px;}#_0x238994 .additional-settings th, #_0x238994 .additional-settings td {text-align: center; border-radius: 0px 8px 8px 0px;}#_0x238994 .additional-settings input {vertical-align: -2px;margin: 0px;}#_0x238994 .close {text-align: center;font-size: larger;font-weight: bold;color: #c14848;cursor: pointer;}#_0x238994 .description {text-align: center;font-family: fantasy;font-size: 11px;}</style>
                <div id="title-Script"><h3 style="text-align: center; padding: 6px; margin: 0px;">OBSIDIAN AGENDADOR</h3></div>
                <div class="container" style="overflow: auto; max-height: 211px; outline: 1px solid #7D510F">
                    <table width="100%">
                        <thead>
                            <tr>
                                <th style="text-align: center">#</th>
                                <th>DE:</th>
                                <th>PARA:</th>
                                ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<th><label for="unit_` + unit + `"><img src="/graphic/unit/unit_` + unit + `.png"></label></th>`, ``)}
                                <th>SAIDA:</th>
                                <th>CHEGADA:</th>
                                <th>EM:</th>
                                <th>TIPO:</th>
                                <th style="text-align: center">#</th>
                            </tr>
                        </thead>
                        <tbody class="registered"></tbody>
                    </table>
                </div>
                <div id="_0x238948" style="outline: 1px solid #7D510F; overflow: auto; max-height: 200px; margin-top: 1px;">
                    <style>#_0x238948 th {text-align: center;font-family: sans-serif;}#_0x238948 img {vertical-align: -5px;padding: 3px;}</style>
                    <table width="100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ALVO:</th>
                                <th><img src="/graphic/command/attack_large.png">&nbsp;ATAQUES AGENDADOS:</th>
                                <th><img src="/graphic/command/support.png">&nbsp;APOIOS AGENDADOS:</th>
                                <th><img src="/graphic/command/snob.png">&nbsp;NOBRES AGENDADOS:</th>
                            </tr>
                        </thead>
                        <style>.td-targets {text-align: center;font-size: larger;font-family: sans-serif;}</style>
                        <tbody class="info-targets"></tbody>
                    </table>
                </div>
                <div id="_0x238949" style="outline: 1px solid #7D510F; overflow: auto; margin-top: 1px; width: 100%; height: 100px;"></div>
                <div class="additional-settings" style="margin: 6px 0px 0px 0px;">
                    <table style="border-radius: 0px 8px 8px 0px; outline: 1px solid #7d510f; width: 450px;">
                        <tbody>
                            <tr>
                                <th>EMITIR UM SOM SEMPRE AO SAIR COMANDOS:</th>
                                <td><label class="switch"><input id="sound-commands" type="checkbox" onchange="ScriptAPI._0x238994._0x238957(this)"><span class="slider"></span></label></td>
                            </tr>
                            <tr>
                                <th>SALVAR HISTÓRICO DA CAIXA DE REGISTROS:</th>
                                <td><label class="switch"><input id="report-commands" type="checkbox" onchange="ScriptAPI._0x238994._0x238957(this)"><span class="slider"></span></label></td>
                            </tr>
                        </tbody>
                    </table>
                </div>           
                <div class="user-actions"><input type="button" class="btn" style="margin: 6px 2px 4px 4px;" onclick="ScriptAPI._0x238984('#container-small-planner', 'block')" value="PROGRAMAR COMANDOS"><input type="button" class="btn" onclick="ScriptAPI._0x238994._0x238954(this)" value="REORDENAR COMANDOS"><input type="button" class="btn" onclick="ScriptAPI._0x238994._0x238857(this)" value="EXPORTAR COMANDOS"><input type="button" class="btn" style="margin: 0px 4px 0px 2px;" onclick="ScriptAPI._0x238984('#import-commands', 'block')" value="IMPORTAR COMANDOS"></div>
                <div id="import-commands" class="vis content-border" style="display: none; border-radius: 8px 8px 8px 8px; z-index: 1; position: fixed; top: 10%; left: 40%; width: 400px; height: 130px;">
                    <div class="close-Script" style="position: absolute; top: 2px; right: 10px; z-index: 1; font-size: large"><a onclick="ScriptAPI._0x238984('#import-commands', 'none')" href="#">X</a></div>
                    <h4 style="border-radius: 8px 8px 0px 0px; padding: 6px;">COLAR SEUS COMANDOS EXPORTADOS ABAIXO:</h4><br><textarea id="import-textarea" style="margin: -8px 0px 0px 8px; width: 375px;" placeholder="<tr id=vwgNxsowS><td align=center></td><td style=text-align: center; width: 70px;><a href=/game.php?></a>..."></textarea>
                    <button style="margin: 4px;" onclick="ScriptAPI._0x238994._0x238856(this)">AGENDAR COMANDOS EXPORTADOS</button>
                </div>
                <div id="container-small-planner" class="vis content-border" style="display: none; border-radius: 8px; font-family: auto; z-index: 1; position: fixed; top: 10%; left: 40%;">
                    <style>#_0x238994 .alert {margin-left: 2px;color: #ae441c;font-weight: bold;}</style>
                    <div class="close-Script" style="position: absolute; top: 3px; right: 10px; z-index: 1; font-size: large"><a onclick="ScriptAPI._0x238984('#container-small-planner', 'none')" href="#">X</a></div>
                    <div class="vis-train" style="display: none;">
                        <table width="250" style="border-width: 0px 1px 1px 0px; outline: 1px solid #7d510f; border-radius: 8px 0px 8px 0px;">
                            <tbody>
                                <tr>
                                    <th style="text-align: center" colspan="2"><span id="default_name_span">COMANDO</span></th>
                                </tr>
                                <tr>
                                    <th>DE:</th>
                                    <td>000|000</td>
                                </tr>
                                <tr>
                                    <th>PARA:</th>
                                    <td>000|000</td>
                                </tr>
                                <tr>
                                    <th>SAIDA:</th>
                                    <td>00/00/0000 00:00:00</td>
                                </tr>
                                <tr>
                                    <th>CHEGADA:</th>
                                    <td>00/00/0000 00:00:00</td>
                                </tr>
                                <tr>
                                    <th>EM:</th>
                                    <td style="color: #c14848">0:00:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="vis-troops" style="margin: 6px"><a href="#" onclick="ScriptAPI._0x238994._0x238939(this)"><img src="https://twdevtools.github.io/images/obsidian-plus.png" style="vertical-align: -4px; width: 16px;">&nbsp;ADICIONAR COMANDO</a></div>
                    <div class="train-container" style="outline: 1px solid #7D510F">
                        <style>#obsidian-scripts td[class*=unit-item] {background-color: #202225;}#obsidian-scripts input[name*=train] {margin: 1px;}</style>
                        <table class="container" width="100%">
                            <tbody>
                                <tr>
                                    <th style="text-align: center" colspan="100"><h3 style="margin: 0px">ALTERAR COMANDO</h3></th>
                                </tr>
                                <tr>
                                    <th style="text-align: center">#</th>
                                    ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<th width="40"><a href="#" class="unit_link" data-unit="` + unit + `"><img src="/graphic/unit/unit_` + unit + `.png"></a></th>`, ``)}
                                </tr>
                                <tr class="train-ui" style="display: table-row">
                                    <th style="text-align: center">TOTAL</th>
                                    ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<td class="unit-item-` + unit + `" style="opacity: 0.3;">0</td>`, ``)}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="user-actions"><input type="button" class="btn" style="margin: 4px" onclick="ScriptAPI._0x238994._0x238953(this)" value="AGENDAR PERSONALIZADO"></div>
                    <div class="customize" style="outline: 1px solid #7D510F">
                        <style>#obsidian-scripts .customize input {width: 37px; margin: 1px;}</style>
                        <table class="container" width="100%">
                            <tbody>
                                <tr>
                                    <th style="text-align: center" colspan="100"><h3 style="margin: 0px">CUSTOMIZAR</h3></th>
                                </tr>
                                <tr>
                                    <th style="text-align: center">#</th>
                                    ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<th width="40"><a href="#" class="unit_link" data-unit="` + unit + `"><img src="/graphic/unit/unit_` + unit + `.png"></a></th>`, ``)}
                                </tr>
                                <tr id="custom-units" style="display: table-row">
                                    <th style="text-align: center">UNIDADES</th>
                                    ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<td><input type="text" id="unit_` + unit + `" value="0"></td>`, ``)}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="content" style="font-size: 13pt; border-bottom: 1px solid #7D510F">
                        <table width="100%">
                            <style>#container-small-planner .content th {text-align: center;width: 425px;}#container-small-planner .content td {background-color: #202225 !important;}#container-small-planner .content input {outline: none;font-size: 11pt;width: 45px;}#container-small-planner .content select {-webkit-appearance: none;font-size: 11pt;width: 100%;margin: 2px;border: none;}</style>
                            <tbody>
                                <tr>
                                    <th>DEFINIR DATA/HORA PARA CHEGADA:</th>
                                    <td colspan="3"><input id="arrival" type="text" style="width: 100%;" oninput="ScriptAPI._0x238994._0x238916(this)" placeholder="DD/MM/AAAA 00:00:00"></td>
                                </tr>
                                <tr>
                                    <th>ENVIAR IMEDIATAMENTE:&nbsp;<small style="color: #c9c922;">AVISO: DATA/HORA É IGNORADO SE ATIVADO</small></th>
                                    <td colspan="4"><select id="instantly"><option value="1">ATIVADO</option><option value="2" selected>DESATIVADO</option></select></td>
                                </tr>
                                <tr>
                                    <th>AGENDAR PARA ENVIAR TODAS AS TROPAS DISPONÍVEIS:</th>
                                    <td colspan="4"><select id="all-troops"><option value="1" selected>ATIVADO</option><option value="2">DESATIVADO</option></select></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="options-container" style="margin: -1px 0px -4px 0px;">
                        <small class="alert">*OS CAMPOS ABAIXO SÃO FORMATADOS AUTOMATICAMENTE!</small>
                        <table style="outline: 1px solid #7D510F; width: 100%;">
                            <style>#options-container textarea {border: none;}#options-container select {vertical-align: -1px;border-radius: 4px;width: auto !important;}#options-container input {vertical-align: -1px;outline: none !important;width: 18px;}#options-container th:has(span) {font-family: monospace;font-size: larger;padding: 4px;}#options-container th:has(button) {padding: 3px 0px 3px 4px;}#options-container button {font-size: 9px;}</style>
                            <tbody>
                                <tr>
                                    <td colspan="3"><textarea id="targets" style="width: 99%;" placeholder="SEUS ALVOS: 000|000 000|000..."></textarea></td>
                                </tr>
                                <tr>
                                    <th colspan="3">ALVOS:&nbsp;<span style="color: #c14848;">0</span></th>
                                </tr>
                                <tr>
                                    <th><button onclick="ScriptAPI._0x238994._0x238814(this);">IMPORTAR DO GRUPO SELECIONADO:</button>&nbsp;${Connection.receiveBridgedGroups}</th>
                                    <th><button onclick="ScriptAPI._0x238994._0x238814(this);">IMPORTAR DO GRUPO SELECIONADO:</button>&nbsp;${Connection.receiveBridgedGroups}</th>
                                    <th><button onclick="ScriptAPI._0x238994._0x238814(this);">IMPORTAR DO GRUPO SELECIONADO:</button>&nbsp;${Connection.receiveBridgedGroups}</th>
                                </tr>
                                <tr>
                                    ${['A', 'D', 'N'].reduce((acc, $pb) => acc += `<td><textarea placeholder="ALDEIAS [${$pb}]: 000|000 000|000..."></textarea></td>`, ``)}
                                </tr>
                                <tr>
                                    ${Array.from({length: 3}).reduce((acc, $pb) => acc += `<th><select onchange="ScriptAPI._0x238962(event);"><option value="1">MS FIXO</option><option value="2">MS RANDOM</option></select>&nbsp;:&nbsp;<input type="text" value="000"><input type="text" style="display: none;" value="000">&nbsp;:&nbsp;<input type="text" style="display: none;" value="999"></th>`, ``)}
                                </tr>
                                <tr>
                                    <th>ALDEIAS:&nbsp;<span style="color: #53853b;">0</span></th>
                                    <th>ALDEIAS:&nbsp;<span style="color: #53853b;">0</span></th>
                                    <th>ALDEIAS:&nbsp;<span style="color: #53853b;">0</span></th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="user-actions" style="margin: 10px 0px 0px 2px;"><input type="button" class="btn" onclick="ScriptAPI._0x238994._0x238958(this)" value="CALCULAR POSSIBILIDADES"><br><small class="alert">*AS UNIDADES ABAIXO SÃO DESMARCADAS CLICANDO NA IMAGEM!</small></div>
                    <h4 style="display: flex; align-items: center;">EXPANDIR A LISTA DE COMANDOS ENCONTRADOS PARA:&nbsp;<input id="commands-list" type="text" style="outline: none; font-size: 11pt; width: 25px; color: #ae441c;" value="200">&nbsp;<small style="color: #c9c922;">INSERIR VALORES ALTÍSSIMOS PODE TRAVAR SEU NAVEGADOR!</small></h4>
                    <div class="container" style="overflow: auto; max-height: 300px">
                        <table width="100%">
                            <thead>
                                <tr class="units-select" style="cursor: default" onclick="ScriptAPI._0x238994._0x238951(event)">
                                    <th style="text-align: center; border-bottom-left-radius: 5px;">#</th>
                                    <th>DE:</th>
                                    <th>PARA:</th>
                                    ${game_data.units.slice(0, -1).reduce((acc, unit) => acc += `<th><img src="/graphic/unit/unit_` + unit + `.png"></th>`, ``)}
                                    <th>SAIDA:</th>
                                    <th>CHEGADA:</th>
                                    <th>EM:</th>
                                    <th style="text-align: center;">#</th>
                                    <th style="text-align: center; border-bottom-right-radius: 5px;">#</th>
                                </tr>
                            </thead>
                            <tbody class="combinations-found"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="_0x238995" style="display: none;">
                <div id="title-Script"><h3 style="text-align: center; padding: 6px; margin: 0px;">OBSIDIAN AUTOFARM</h3></div>
                <div id="templates">
                    <table class="vis" style="width: 100%; outline: 1px solid #7D510F; padding: 2px;">
                        <tbody>
                            ${['template_a', 'template_b', 'template_c'].reduce((acc, el, i) => acc + `<tr>
                                <td rowspan="2" align="center" width="10%"><a class="farm_icon farm_icon_${el.charAt(9)} decoration" href="#" onclick="return false;"></a></td>
                                <th style="text-align: center; width: 70px; font-family: math;">ON/OFF</th>
                                ${ScriptAPI._0x238995._0x238963.units.reduce((acc, unit) => acc + `<th style="text-align: center;"><a href="#" class="unit_link" data-unit="${unit}"><img src="/graphic/unit/unit_${unit}.png"></a></th>`, ``)}
                                <th style="text-align: center"><img src="/graphic/rechts.png"></th>
                                ${['1', '0'].reduce((acc, el) => acc += `<th style="text-align: center;"><img src="/graphic/max_loot/${el}.png"></img></th>`, ``)}
                                ${[`blue`, `green`, `yellow`, `red_yellow`, `red_blue`, `red`].reduce((acc, img) => acc += `<th style="text-align: center;"><img src="/graphic/dots/${img}.png"></th>`, ``)}
                                ${!i ? `<td rowspan="6" width="15%" align="center"><div class="vis_item"><input class="btn" type="button" onclick="ScriptAPI._0x238995._0x238969(this)" value="Salvar"></div></td>` : ``}
                            </tr>
                            <tr id="${el}" ${i != 2 ? `` : ` onclick="ScriptAPI._0x238995._0x238967(event)"`}>
                                ${i != 2 ? `<input type="hidden" value="31219"><input type="hidden" value="0">` : ``}
                                <td align="center"><input id="farm_start" type="checkbox"></td>
                                ${ScriptAPI._0x238995._0x238963.units.reduce((acc, unit) => acc + (i != 2 ? `<td align="center"><input name="unit_${unit}" type="number" style="width: 35px;" value="0"></td>` : `<td align="center"><input name="unit_${unit}" type="checkbox" style="width: 30px;" onclick="" value="0" ${unit==`spy` ? `disabled` : ``}></td>`), ``)}
                                <td align="center"><input id="distance" type="number" style="width: 35px;" value="0"></td>
                                ${['max_loot', 'parcial_loot'].reduce((acc, el) => acc += `<td align="center"><input id="${el}" type="checkbox" style="width: 30px;"></td>`, ``)}
                                ${[`blue`, `green`, `yellow`, `red_yellow`, `red_blue`, `red`].reduce((acc, el) => acc + `<td align="center"><input id="${el}_dots" type="checkbox" style="width: 30px;"></td>`, ``)}
                            </tr>`, ``)}
                        </tbody>
                    </table>
                    <div id="loading" style="text-align: center;"></div>
                </div>
                <div id="options" class="vis" style="border-radius: 0px 0px 8px 8px; font-family: auto; margin: 0px;">
                <style>#obsidian-scripts input[id^=time-farm] {height: 14px;vertical-align: 1px;}</style>
                    <table width="100%">
                        <tbody>
                            <tr>
                                <th style="text-align: center;">SELECIONAR GRUPO PARA FARMAR:</th>
                                <td>${Connection.receiveBridgedGroups}</td>
                            </tr>
                            <tr>
                                <th style="text-align: center;">DEFINIR TEMPO DE ESPERA PARA VOLTAR A FARMAR:</th>
                                <td><select id="time-farm" onchange="ScriptAPI._0x238962(event)"><option value="1">FIXO</option><option value="2" selected>RANDOM</option></select>&nbsp;:&nbsp;<input id="time-farm-fixed" type="time" style="display: none;" value="00:01"><input id="time-farm-min" type="time" value="00:01">&nbsp;:&nbsp;<input id="time-farm-max" type="time" value="00:05"></td>
                            </tr>
                            <tr>
                                <th style="text-align: center;">VELOCIDADE PARA ENVIAR OS COMANDOS:</th>
                                <td><select id="interval-farm" onchange="ScriptAPI._0x238962(event)"><option value="1">FIXO</option><option value="2" selected>RANDOM</option></select>&nbsp;:&nbsp;<input id="interval-farm-fixed" type="number" style="display: none; width: 56px;" value="400"><input id="interval-farm-min" type="number" style="width: 56px;" value="400">&nbsp;:&nbsp;<input id="interval-farm-max" type="number" style="width: 56px;" value="600"></td>
                            </tr>
                            <tr>
                                <th style="text-align: center;">REORDENAR ALDEIAS BÁRBARAS:</th>
                                <td><select id="order" style="width: 100%;"><option value="1">DISTANCIA - MENOR PARA O MAIOR</option><option value="2">DISTANCIA - MAIOR PARA O MENOR</option></select></td>
                            </tr>
                            <tr>
                                <th style="text-align: center;">FARMAR EM ALDEIAS BÁRBARAS SENDO ATACADAS:</th>
                                <td><input id="ignore-attacks" type="checkbox" style="vertical-align: -2px; margin: 1px;"><small style="vertical-align: 1px; color: #c9c922;">&nbsp;&nbsp;AVISO: RECOMENDADO DEIXAR DESATIVADO!</small></td>
                            </tr>
                            <tr>
                                <th style="text-align: center; color: #c9c922;">RAIO DE BUSCA POR ALDEIA EM CAMPOS DO MAPEAMENTO:</th>
                                <td><input id="radius" type="number" style="margin: 1px; width: 66px;" placeholder="EX: 20" value="20"></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="info_box" style="margin: 0px 2px;"><div class="content" style="text-align: left;">LEIA-ME:<br>- O mapeamento automático utiliza&nbsp;<span style="color: #c14848">SELECIONAR GRUPO - MODELO [A] DE TROPAS</span>&nbsp;ao realizar as buscas.<br>- O raio de buscas será realizado em todas as aldeias do grupo selecionado.<br>- Apenas as aldeias bárbaras que não foram mapeadas serão inclusas no mapeamento.</div></div>
                    <div id="user-actions" style="margin-bottom: 6px; margin: 4px;"><input id="init" type="button" class="btn" onclick="ScriptAPI._0x238995._0x238956(this)" value="FARMAR"><input id="stop" type="button" class="btn" onclick="ScriptAPI._0x238995._0x238972(this)" value="PAUSAR"><input id="mapping" type="button" class="btn" value="MAPEAMENTO AUTOMÁTICO" onclick="ScriptAPI._0x238995._0x238961(this)"></div>
                </div>
            </div>
            <div id="_0x238996" style="display: none;">
                <div id="title-Script"><h3 style="text-align: center; padding: 6px; margin: 0px;">OBSIDIAN CUNHADOR</h3></div>
                <div id="options" class="vis" style="border-width: 1px 0px 1px 0px; margin: 0px;">
                    <style>#_0x238996 th {text-align: center;font-weight: normal;}#_0x238996 input[id^=time-coins], #_0x238996 input[id^=time-resources] {height: 14px;}#_0x238996 input[type="radio"] {vertical-align: -2px;margin-top: 0px;}</style>
                    <table width="100%">
                        <tbody>
                            <tr>
                                <th>SELECIONAR ALDEIA PARA CUNHAR:</th>
                                <td>` + await ScriptAPI._0x238974(this) + `</td>
                            </tr>
                            <tr>
                                <th>VERIFICAR MOEDAS DISPONÍVEIS A CADA:</th>
                                <td><select id="time-coins" onchange="ScriptAPI._0x238962(event)"><option value="1">FIXO</option><option value="2" selected>RANDOM</option></select>&nbsp;:&nbsp;<input id="time-coins-fixed" type="time" style="display: none;" value="00:01"><input id="time-coins-min" type="time" value="00:01">&nbsp;:&nbsp;<input id="time-coins-max" type="time" value="00:05"></td>
                            </tr>
                            <tr>
                                <th>VERIFICANDO NOVAMENTE EM:</th>
                                <td id="end-time-coins" style="color: #c14848;">00:00:00</td>
                            </tr>
                            <tr>
                                <th style="text-align: center; border-radius: 8px; font-weight: bold; padding: 4px;" colspan="10">PUXADOR AUTOMÁTICO DE RECURSOS</th>
                            </tr>
                            <tr>
                                <th>SELECIONAR GRUPO PARA PUXAR:</th>
                                <td>${Connection.receiveBridgedGroups}</td>
                            </tr>
                            <tr>
                                <th>VERIFICAR RECURSOS DISPONÍVEIS APÓS:</th>
                                <td><select id="time-resources" onchange="ScriptAPI._0x238962(event)"><option value="1">FIXO</option><option value="2" selected>RANDOM</option></select>&nbsp;:&nbsp;<input id="time-resources-fixed" type="time" style="display: none;" value="00:05"><input id="time-resources-min" type="time" value="00:05">&nbsp;:&nbsp;<input id="time-resources-max" type="time" value="00:10"></td>
                            </tr>
                            <tr>
                                <th>FATOR PARA PUXAR OS RECURSOS:</th>
                                <td style="font-family: fantasy; color: chocolate;">MOEDA<input type="radio" name="factor" value="1" checked>&nbsp;RECURSOS<input type="radio" name="factor" value="2"</td>
                            </tr>
                            <tr>
                                <th>VERIFICANDO NOVAMENTE EM:</th>
                                <td id="end-time-resources" style="color: #c14848;">00:00:00</td>
                            </tr>
                            <tr>
                                <td colspan="10"><div id="resources-table" style="text-align: center; white-space: nowrap; overflow: auto; max-height: 150px;"></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="user-actions" style="margin: 4px 2px 4px;"><input id="init" type="button" class="btn" onclick="ScriptAPI._0x238996._0x238956(this)" value="CUNHAR"><input id="stop" type="button" class="btn" onclick="ScriptAPI._0x238996._0x238972(this)" value="PAUSAR"></div>
                <div id="request-resources" class="vis" style="position: absolute; border-radius: 8px; font-size: smaller; font-weight: bold; padding: 0px 1px 0px 5px; bottom: 5px; right: 5px; color: #c9c922; margin: 0px;">PUXAR RECURSOS:<input id="init" type="checkbox" style="vertical-align: -3px;" onclick="ScriptAPI._0x238996._0x238973(this)"></div>
            </div>
            <div id="_0x238897" style="display: none;">
                <h3 style="text-align: center; padding: 6px; margin: 0px;">OBSIDIAN BALANCEADOR</h3>
                <style>#_0x238897 th {text-align: center;font-weight: normal;}#_0x238897 td small {vertical-align: 2px;}#_0x238897 img {vertical-align: -2px;cursor: pointer;width: 15px;}#_0x238897 input[type="time"] {height: 14px;}#_0x238897 input[type="range"] {height: 11px;width: 85%;}</style>                   
                <table style="outline: 1px solid #7D510F; width: 100%;">
                    <tbody>
                        <tr>
                            <th>RESERVAS DE COMERCIANTES:</th>
                            <td><input id="reserve-merchants" type="range" min="0" max="235" step="1" oninput="ScriptAPI._0x238899._0x238850(this)" value="0"><small>=&nbsp;<output>0</output></small></td>
                            <td align="center"><img src="/graphic/questionmark.png" onclick="return UI.SuccessMessage('Número de comerciantes para manter em casa.', 2500);"></td>
                        </tr>
                        <tr>
                            <th>HORAS PARA MANTER CONSTRUINDO:</th>
                            <td><input id="time-building" type="range" min="1" max="48" step="1" oninput="ScriptAPI._0x238899._0x238850(this)" value="8"><small>=&nbsp;<output>8</output></small></td>
                            <td align="center"><img src="/graphic/questionmark.png" onclick="return UI.SuccessMessage('Período máximo em horas que as aldeias devem ter recursos para os edifícios, seu gerente de conta deve estar ativo e suas aldeias devem ter um modelo ativo.', 10000);"></td>
                        </tr>
                        <tr>
                            <th>FATOR PARA BALANCEAMENTO:</th>
                            <td><input id="balancing-factor" type="range" min="0" max="1" step="0.1" oninput="ScriptAPI._0x238899._0x238850(this)" value="0.5"><small>=&nbsp;<output>0.5</output></small></td>
                            <td align="center"><img src="/graphic/questionmark.png" onclick="return UI.SuccessMessage('Fator 0: Suas aldeias receberão recursos apenas para os edifícios (do gerente de conta).<br><br>Fator 0.1 ~ 0.9: Exemplo 0.2, Neste caso suas aldeias receberão 20% do valor médio de cada recurso e receberão recursos suficientes para os edifícios (do gerente de conta).<br><br>Fator 1: Os recursos serão distribuídos igualmente, no final do balanceamento todas as aldeias terão a mesma quantidade de recursos.', 20000);"></td>
                        </tr>
                        <tr>
                            <th>NÚMEROS DE CLUSTERS:</th>
                            <td><input id="number-clusters" type="range" min="1" max="100" step="1" oninput="ScriptAPI._0x238899._0x238850(this)" value="1"><small>=&nbsp;<output>1</output></small></td>
                            <td align="center"><img src="/graphic/questionmark.png" onclick="return UI.SuccessMessage('Se estiver definido como 1 cluster, o balanceamento de recursos será global e para 2 ou mais será localmente por cada cluster.<br><br>Um número maior de clusters resulta em um tempo máximo de viagem mais curto e mais equilibrado localmente, o que é menos ideal.<br><br>Toda vez que o script é executado, os clusters são calculados aleatoriamente e podem não ser calculados de maneira ideal todas as vezes, portanto, preste atenção à distância máxima de viagem.<br><br>Se for executado no mapa pode-se ver como os clusters foram formados e quantos recursos são enviados e recebidos.', 30000);"></td>
                        </tr>
                        <tr>
                            <th>GRUPO PARA BALANCEAMENTO:</th>
                            <td colspan="2">${Connection.receiveBridgedGroups}</td>
                        </tr>
                        <tr>
                            <th>TIMER FIXO/RANDOM PARA REINICIO:</th>
                            <td><select id="time-balancer" onchange="ScriptAPI._0x238962(event)"><option value="1">FIXO</option><option value="2" selected="">RANDOM</option></select>&nbsp;:&nbsp;<input id="time-balancer-fixed" type="time" style="display: none;" value="00:15"><input id="time-balancer-min" type="time" value="00:30" style="display: table-cell;">&nbsp;:&nbsp;<input id="time-balancer-max" type="time" value="01:00" style="display: table-cell;"></td>
                        </tr>
                        <tr>
                            <th>REINICIANDO NOVAMENTE EM:</th>
                            <td id="end-time-balancer" style="padding-left: 2px; color: #c14848;">00:00:00</td>
                        </tr>
                        <tr>
                            <td colspan="10"><div id="resources-table" style="text-align: center; white-space: nowrap; overflow: auto; max-height: 150px;"></div></td>
                        </tr>
                    </tbody>
                </table>
                <div id="user-actions" style="padding: 5px 2px 4px;"><input id="init" type="button" class="btn" onclick="return balancingResources(this)" value="INICIAR BALANCEAMENTO"><input id="stop" type="button" class="btn" onclick="ScriptAPI._0x238899._0x238751(this);" value="PAUSAR"></div>
                <div id="request-balancer" class="vis" style="position: absolute; border-radius: 8px; font-size: smaller; font-weight: bold; padding: 0px 1px 0px 5px; bottom: 5px; right: 5px; color: #c9c922; margin: 0px;">MOSTRAR TABELA DE RECURSOS:<input id="init" type="checkbox" style="vertical-align: -3px;" onclick="ScriptAPI._0x238899._0x238849(this);"></div>
            </div>
            <div id="_0x238898" style="display: none;">
                <style>#templates-manager th[rowspan]:not(.delete-template) {text-align: center;width: 95px;} #templates-manager th:not([rowspan]) {width: 35px;} #templates-manager .groups-select {text-align: center;font-family: fantasy;font-weight: normal;font-size: larger;}#templates-manager select {width: auto !important;}#templates-manager input {width: 45px;margin: 1px;}#_0x238898 .delete-template {text-align: center;font-size: 20px;width: 30px;}</style>
                <div id="title-Script"><h3 style="text-align: center; padding: 6px; margin: 0px;">OBSIDIAN GERENTE DE UNIDADES</h3></div>
                <div id="templates-manager" oninput="ScriptAPI._0x238898._0x238735(event)" style="position: relative; outline: 1px solid #7D510F; overflow: auto; max-height: 200px;"><table width="100%"></table></div>
                <div id="buildings-config">
                    <style>#buildings-config th:not(.managers-settings th) {font-family: auto;text-align: center;width: 250px;}#buildings-config input:not([type="time"]) {width: 35px;}#buildings-config img {width: 70px;}</style>
                    <table width="100%">
                        <thead>
                            <tr>
                                ${['barracks', 'stable', 'garage'].reduce((acc, $pb, i) => acc += `<th colspan="2"><img src="/graphic/big_buildings/${$pb}3.png"${i && ' style="vertical-align: -50px;"' || ``}></th>`, ``)}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                ${['barracks', 'stable', 'garage'].reduce((acc, $pb, i) => acc += `<th>PACOTES DE UNIDADES:</th><td><input id="packages_${$pb}" type="number" value="${!i && '50' || i == 1 && '20' || '10'}"></td>`, ``)}
                            </tr>
                            <tr>
                                ${['barracks', 'stable', 'garage'].reduce((acc, $pb) => acc += `<th>MÁXIMO DE FILAS:</th><td><input id="queues_${$pb}"type="number" value="2"></td>`, ``)}
                            </tr>
                            <tr>
                                <td colspan="100">
                                    <div class="managers-settings">
                                        <style>#_0x238898 .managers-settings input {outline: none !important;}</style>
                                        <table style="border-bottom: 1px solid #7d510f; width: 100%;">
                                            <tbody>
                                                <tr>
                                                    <th style="padding: 6px; text-align: center;">GERENCIAR MODELOS CRIADOS A CADA:</th>
                                                    <th><select id="time-manager" onchange="ScriptAPI._0x238962(event)" style="border: none;"><option value="1">FIXO</option><option value="2" selected="">RANDOM</option></select>&nbsp;:&nbsp;<input id="time-manager-fixed" type="time" style="display: none;" value="01:00"><input id="time-manager-min" type="time" value="01:00">&nbsp;:&nbsp;<input id="time-manager-max" type="time" value="03:00"></th>
                                                    <th rowspan="2" style="text-align: center; width: 85px;"><button onclick="ScriptAPI._0x238898._0x238957(this)">SALVAR</button></th>
                                                </tr>
                                                <tr>
                                                    <th style="padding: 6px; text-align: center;">REINICIANDO O GERENCIAMENTO DE UNIDADES EM:</th>
                                                    <th id="end-time-manager" style="padding-left: 5px; color: #c14848;">00:00:00</th>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="user-actions" style="margin: 4px 0px 6px 4px;"><input id="init-manager" type="button" class="btn" style="margin-right: 4px;" onclick="ScriptAPI._0x238898._0x238732(this)" value="INICIAR GERENCIAMENTO DE UNIDADES"><input id="stop-manager" type="button" class="btn" onclick="ScriptAPI._0x238898._0x238972(this)" value="PAUSAR GERENCIAMENTO"><input id="new-template" type="button" class="btn" style="margin-left: 4px;" onclick="ScriptAPI._0x238898._0x238739(false)" value="+ CRIAR UM NOVO MODELO"></div>
            </div>
            <div id="script-packages" class="vis content-border" style="display: none; text-align: center; border-radius: 8px; position: fixed; top: 30%; left: 40%; z-index: 1; height: 300px;">
                <div class="close-Script" style="position: absolute; top: 9px; right: 10px; z-index: 1; font-size: large"><a onclick="ScriptAPI._0x238984('#script-packages', 'none')" href="#">X</a></div>
                <h3 style="border-radius: 8px 8px 0px 0px; padding: 12px; margin: 0px;">PACOTES DA TECNOLOGIA DA OBSIDIAN</h3>
                <div><style>#script-packages img {width: 150px;}</style><img src="https://twdevtools.github.io/images/obsidian-scripts.png"><img src="https://twdevtools.github.io/images/obsidian-green.png"><img src="https://twdevtools.github.io/images/obsidian-purple.png"><img src="https://twdevtools.github.io/images/obsidian-black.png"></div>
                <div id="obsidian-offers" style="display: flex; justify-content: space-evenly; font-weight: bold; color: burlywood;"><style>#obsidian-offers span {color: #ae441c;}</style><a href="https://mpago.la/2pXj5gk" target="_blank" rel="noopener noreferrer"><button class="btn">PACOTE MENSAL<br><span>R$ 29,90</span></button></a><a href="https://mpago.la/1cUdDP3" target="_blank" rel="noopener noreferrer"><button class="btn">PACOTE 3 MESES<br><span>R$ 69,90</span></button></a><a href="https://mpago.la/1xR3KU5" target="_blank" rel="noopener noreferrer"><button class="btn">PACOTE 6 MESES<br><span>R$ 129,90</span></button></a><a href="https://mpago.la/32ReZ59" target="_blank" rel="noopener noreferrer"><button class="btn">PACOTE ANUAL<br><span>R$ 239,90</span></button></a></div>
                <div class="vis" style="text-align: left; margin: 14px 24px; color: rgb(255, 255, 223);"><h4 style="color: #c9c922;">IMPORTANTE!</h4><span>&nbsp;Ao realizar o pagamento, enviar o comprovante com o nick do mesmo para autenticação.</a></span></div>
            </div>
        </div>`;
        $('.questlog').append(`<div id="menu" style="width: 25px; height: 25px; border: 1px solid #603000; background-color: #36393f; margin: 10px; background-image: url(https://twdevtools.github.io/images/obsidian-scripts.png); background-position: center; background-repeat: no-repeat; cursor: pointer; position: relative; text-align: center; box-shadow: rgba(60, 30, 0, 0.7) 2px 2px 2px; border-radius: 3px; background-size: contain;" onclick="ScriptAPI._0x238984('#obsidian-scripts', 'block')"></div>`) && $(document.body).append(scriptHTML).find('#obsidian-scripts, #import-commands, #container-small-planner, #container-big-planner, #script-packages').draggable() && await new Promise((resolve) => new MutationObserver(($pb) => $('#welcome-obsidian #time').html('<strong>' + $('#serverDate')[0].textContent + '\x20' + $('#serverTime')[0].textContent + '</strong>') && !clearInterval(this._0x238994._0x238892.intervalID || resolve(!void 0) && 0e+9) && this._0x238994._0x238892('integrated') || $pb).observe(serverinfo[0], {subtree: true, childList: true}) || null) && $('#time-expire').html(event) && $('#timer-end').html(this._0x238993(timeLeft / 1000) ?? !void 0);
        (!this._0x238947.scriptUpdated.lastUpdated || this._0x238947.scriptUpdated.lastUpdated + (3600 * 1000) <= this._0x238947.updatedTime) ? !UI.SuccessMessage('Atualizando o Banco de dados, aguarde...') && await this._0x238987() && await this._0x238983('newUpdated') : await this._0x238983('updatedFalse');
        Timing.tickHandlers.timers.handleTimerEnd = (event) => (event.target.id != 'timer-end' && $(event.target).closest('tbody').attr('class') == 'combinations-found' || event.target.closest('div').id == 'resources-table') && event.target.closest('tr').remove();
        return this._0x238947.scriptUpdated._0x238981 && $('#discord-webhooks').val(this._0x238947.scriptUpdated._0x238981), this._0x238947.scriptUpdated._0x238992 && $('#run-screen').val(this._0x238947.scriptUpdated._0x238992), this._0x238994._0x238947(), this._0x238995._0x238947(), this._0x238997._0x238947(), this._0x238898._0x238947(), this._0x238899._0x238947(), this._0x238978(), this._0x238774();
    },
    _0x238983: function(updatedScript) {
        /* INDEXEDDB */
        let RequestindexedDB = function(resolve) {
            let request = indexedDB.open('villagesAPI');
            request.onupgradeneeded = function(event) {
                let objectStore = event.target.result.createObjectStore('APIUpdated', {autoIncrement: true});
                objectStore.add(window.APIUpdated); 
                return resolve(!void 0);
            };
            request.onsuccess = function(event) {
                let transaction = event.target.result.transaction('APIUpdated', 'readwrite'), objectStore = transaction.objectStore('APIUpdated'), getRequest = objectStore.getAll();
                return getRequest.onsuccess = function({target: {result: [event]}}) {
                    return updatedScript != 'updatedFalse' ? objectStore.clear() && objectStore.add(window.APIUpdated) : window.APIUpdated = event, resolve(!void 0);
                };
            };
        };
        return new Promise(RequestindexedDB); 
    },
    _0x238984: function(selector, event) {
        /* OPEN AND HIDDEN SCRIPTS */
        return $(selector).css('display', event);
    },
    _0x238985: function(event) {
        /* OPEN AND HIDDEN TABS */
        return $('#obsidian-group, #welcome-obsidian, #_0x238994, #_0x238995, #_0x238996, #_0x238897, #_0x238898').css('display', 'none') && $(event).css('display', 'block');
    },
    _0x238986: function(event) {
        /* OPEN IMAGE */
        let img = $('#obsidian-scripts img[src*=incomings]');
        return event.textContent.includes('EXPANDIR') ? img.css('display', 'block') && $(event).text('RECOLHER IMAGEM:') : img.css('display', 'none') && $(event).text('EXPANDIR IMAGEM:');
    },
    _0x238987: function (event) {
        /* REQUEST API */
        return new Promise(async (resolve) => {
            try {
                window.APIUpdated = {
                    'database': await this._0x238988(), 'units': await this._0x238989(),
                };
                this._0x238947.scriptUpdated.lastUpdated = this._0x238947.updatedTime;
                return !localStorage.setItem('ScriptAPI', JSON.stringify(this._0x238947.scriptUpdated)) && !UI.SuccessMessage('Banco de dados atualizado!') && resolve(!void 0);
            } catch (error) {
                return !UI.ErrorMessage(`O Banco de dados não foi atualizado! erro: ${error.message}`);
            };
        });
    },
    _0x238988: function (event) {
        /* REQUEST DATA */
        return $.ajax({url: '/map/village.txt', method: 'GET'}).then((xhr) => {
            let database = {};
            xhr.split('\n').forEach(($pb) => {
                let index = $pb.split(',');
                database[index[2] + '|' + index[3]] = {
                    villageID: index[0], playerID: index[4],
                };
            });
            return database;
        });
    },
    _0x238989: function (event) {
        /* REQUEST UNITS */
        return $.get('/interface.php?func=get_unit_info').then((xhr) => {
            let units = {};
            $(xhr).find('config').children().each((i, unit) => units[unit.tagName] = Number(
                $(unit).find('speed').prop('textContent'),
            ));
            return units;
        });
    },
    _0x238990: function (event) {
        /* REQUEST GROUPS */
        return $.get(game_data.link_base_pure + 'groups&mode=overview&ajax=load_group_menu&').then((xhr) => {
            let html = '<select class="optionGroup" style="width: 100%;">';
            xhr.result.forEach((el) => {
                return el.type == 'separator' ? html += '<option disabled></option>' : html += '<option value="' + el.group_id + '">' + el.name + '</option>';
            });
            html += `</select>`;
            return html;
        });
    },
    _0x238974: function (event) {
        /* REQUEST VILLAGES */
        return $.ajax({url: game_data.link_base_pure + 'groups&ajax=load_villages_from_group', method: 'POST', group_id: 0}).then((xhr) => {
            let html = '<select class="optionVillage" style="width: 100%;">';
            $(xhr.html).find('#group_table tr').each(function(i) {
                return html += '<option value="' + i + '">' + this.textContent.replace(/\s+/g, '\x20').trim() + '</option>';
            });
            html += `</select>`;
            return html;
        });
    },
    _0x238991: function(event) {
        /* AUTHENTICATION SCRIPT */
        let scriptURL = document.currentScript;
        return $.ajax(`https://twdevtools.github.io/database/scripts/0x4a6807.txt`).then((stringify) => {
            let dataURL = atob(stringify), xhr = JSON.parse(dataURL)[game_data.player.name], success = xhr.includes('fixed') ? xhr : new Date(xhr);
            let serverDate = $('#serverDate')[0].textContent, serverTime = $('#serverTime')[0].textContent, currentTime = new Date(this._0x238980(`${serverDate} ${serverTime}`));
            return xhr && (success == 'fixed' || success - currentTime > 0) && scriptURL && scriptURL.src.startsWith('https://twdevtools.github.io/'), this._0x238947(xhr, 'secret');
        });
    },
    _0x238992: function(event) {
        /* DISCORD AND SCREEN URL */
        let resolveElements = ($pb) => !localStorage.setItem('ScriptAPI', JSON.stringify(this._0x238947.scriptUpdated)) && $(event).css('color', 'mediumseagreen').text('SALVO!') && setTimeout(($pb) => $(event).css('color', ``).text('SALVAR'), 2000), selector = $(event).closest('div').find('input')[0];
        switch (selector.id) {
        case 'discord-webhooks':
            this._0x238947.scriptUpdated._0x238981 = selector.value;
            selector.value.startsWith('https://discord.com/api/webhooks/') || !selector.value ? resolveElements(this) : UI.ErrorMessage('Discord WebHook inválido!');
            break;
        case 'run-screen':
            let screen = $('#run-screen')[0].value.replace(/#/, ``), dataURL = [...$('a:not(#obsidian-scripts a)').map((i, a) => a.href)];
            this._0x238947.scriptUpdated._0x238992 = screen;
            screen.startsWith('screen=') && dataURL.some((url) => url.includes(screen) && !void 0) ? resolveElements(this) : UI.ErrorMessage('URL inválida!');
            break;
        };
        return !void 0;
    },
    _0x238993: function (event) {
        /* SECONDS TO HMS */
        let $pbHours = ~~(event / 3600), $pbMinutes = ~~(event % 3600 / 60), $pbSeconds = ~~(event % 60);
        return ('' + $pbHours).padStart(2, '0') + ':' + ('' + $pbMinutes).padStart(2, '0') + ':' + ('' + $pbSeconds).padStart(2, '0');
    },
};
this.ScriptAPI._0x238991(!NaN);
